(()=>{var e={294:(e,t,i)=>{const{compunet:n}=i(3950),r=i(5828),s=i(9898);i(1030);class o extends n.ClientCallback{async onNewMessage(e,t){console.log(" Mensaje recibido en tiempo real:",{de:e.senderName,contenido:e.content,esGrupo:e.isGroupMessage}),r.addMessage(e);const i=r.getActiveChat();i&&(e.isGroupMessage&&e.chatId===i.id||!e.isGroupMessage&&(e.senderId===i.id||e.chatId===i.id))&&s.displayNewMessage(e),s.renderChatList()}async onNewGroup(e,t){console.log(" Nuevo grupo recibido:",e.chatName),r.addChat(e),i(9898).renderChatList(),console.log(` Has sido agregado al grupo: ${e.chatName}`)}}e.exports=o},359:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(7788),i(5896),i(9483),i(3239),i(1781),i(7548),i(8372),i(5527),i(4652);const r=n.module("Ice"),s=r.Slice;r.AdapterNotFoundException=class extends r.UserException{constructor(e=""){super(e)}static get _parent(){return r.UserException}static get _id(){return"::Ice::AdapterNotFoundException"}_mostDerivedType(){return r.AdapterNotFoundException}},r.InvalidReplicaGroupIdException=class extends r.UserException{constructor(e=""){super(e)}static get _parent(){return r.UserException}static get _id(){return"::Ice::InvalidReplicaGroupIdException"}_mostDerivedType(){return r.InvalidReplicaGroupIdException}},r.AdapterAlreadyActiveException=class extends r.UserException{constructor(e=""){super(e)}static get _parent(){return r.UserException}static get _id(){return"::Ice::AdapterAlreadyActiveException"}_mostDerivedType(){return r.AdapterAlreadyActiveException}},r.ObjectNotFoundException=class extends r.UserException{constructor(e=""){super(e)}static get _parent(){return r.UserException}static get _id(){return"::Ice::ObjectNotFoundException"}_mostDerivedType(){return r.ObjectNotFoundException}},r.ServerNotFoundException=class extends r.UserException{constructor(e=""){super(e)}static get _parent(){return r.UserException}static get _id(){return"::Ice::ServerNotFoundException"}_mostDerivedType(){return r.ServerNotFoundException}},r.Locator=class extends r.Object{},r.LocatorPrx=class extends r.ObjectPrx{},s.defineOperations(r.Locator,r.LocatorPrx,["::Ice::Locator","::Ice::Object"],0,{findObjectById:[,2,1,,[9],[[r.Identity]],,[r.ObjectNotFoundException],,],findAdapterById:[,2,1,,[9],[[7]],,[r.AdapterNotFoundException],,],getRegistry:[,2,1,,["Ice.LocatorRegistryPrx"],,,,,]}),r.LocatorRegistry=class extends r.Object{},r.LocatorRegistryPrx=class extends r.ObjectPrx{},s.defineOperations(r.LocatorRegistry,r.LocatorRegistryPrx,["::Ice::LocatorRegistry","::Ice::Object"],0,{setAdapterDirectProxy:[,2,2,,,[[7],[9]],,[r.AdapterAlreadyActiveException,r.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,,,[[7],[7],[9]],,[r.AdapterAlreadyActiveException,r.AdapterNotFoundException,r.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,,,[[7],["Ice.ProcessPrx"]],,[r.ServerNotFoundException],,]}),r.LocatorFinder=class extends r.Object{},r.LocatorFinderPrx=class extends r.ObjectPrx{},s.defineOperations(r.LocatorFinder,r.LocatorFinderPrx,["::Ice::LocatorFinder","::Ice::Object"],0,{getLocator:[,,,,["Ice.LocatorPrx"],,,,,]}),t.Ice=r},365:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(1601),r=i.n(n),s=i(6314),o=i.n(s)()(r());o.push([e.id,"/* ====== RESET ====== */\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Segoe UI', sans-serif;\n}\n\nbody {\n    background-color: #0d1117;\n}\n\n/* ====== LAYOUT GENERAL ====== */\n.app-container {\n    display: flex;\n    height: 100vh;\n    background-color: #0d1117;\n    color: #e6edf3;\n}\n\n/* ====== SIDEBAR ====== */\n.sidebar {\n    width: 320px;\n    background-color: #161b22;\n    border-right: 1px solid #30363d;\n    display: flex;\n    flex-direction: column;\n}\n\n/* HEADER */\n.sidebar-header {\n    padding: 20px;\n    background-color: #1f6feb;\n    color: white;\n}\n\n.sidebar-header h2 {\n    font-size: 20px;\n    font-weight: 600;\n}\n\n.user-info {\n    margin-top: 8px;\n    opacity: 0.9;\n}\n\n/* ====== ACCIONES ====== */\n.sidebar-actions {\n    display: flex;\n    gap: 10px;\n    padding: 10px;\n    background-color: #0d1117;\n    border-bottom: 1px solid #30363d;\n}\n\n.btn-action {\n    flex: 1;\n    padding: 8px 10px;\n    background-color: #238636;\n    color: white;\n    border: none;\n    border-radius: 5px;\n    cursor: pointer;\n    font-size: 13px;\n    font-weight: bold;\n}\n\n.btn-action:hover {\n    background-color: #2ea043;\n}\n\n/* ====== LISTA DE CHATS ====== */\n.chat-list {\n    overflow-y: auto;\n}\n\n.chat-item {\n    padding: 15px 20px;\n    border-bottom: 1px solid #21262d;\n    cursor: pointer;\n    transition: background 0.15s;\n    color: #e6edf3;\n}\n\n.chat-item:hover {\n    background-color: #21262d;\n}\n\n.chat-item.active {\n    background-color: #1f6feb33;\n}\n\n.chat-item-name {\n    font-weight: bold;\n}\n\n.chat-item-preview {\n    font-size: 13px;\n    color: #8b949e;\n}\n\n.chat-item-time {\n    font-size: 12px;\n    color: #8b949e;\n}\n\n/* ====== ÃREA DEL CHAT ====== */\n.chat-area {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    background-color: #0d1117;\n}\n\n/* HEADER DEL CHAT */\n.chat-header {\n    padding: 18px;\n    background-color: #1f6feb;\n    color: white;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.chat-type-badge {\n    font-size: 12px;\n    padding: 2px 6px;\n    border-radius: 4px;\n    background-color: #388bfd;\n}\n\n/* ====== MENSAJES ====== */\n.messages-container {\n    flex: 1;\n    padding: 20px;\n    overflow-y: auto;\n}\n\n/* Mensajes recibidos */\n.message {\n    margin-bottom: 12px;\n    max-width: 70%;\n    display: flex;\n}\n\n.message-bubble {\n    background-color: #21262d;\n    padding: 10px 14px;\n    border-radius: 10px;\n    color: #e6edf3;\n    box-shadow: 0 1px 2px #00000044;\n}\n\n/* Mensajes enviados */\n.message.sent {\n    justify-content: flex-end;\n}\n\n.message.sent .message-bubble {\n    background-color: #1f6feb;\n}\n\n/* Nombre del remitente */\n.message-sender {\n    font-size: 12px;\n    color: #79c0ff;\n    margin-bottom: 3px;\n}\n\n/* Hora */\n.message-time {\n    font-size: 10px;\n    color: #8b949e;\n    margin-top: 4px;\n    text-align: right;\n}\n\n/* ====== INPUT MENSAJE ====== */\n.message-input-container {\n    display: flex;\n    padding: 12px;\n    gap: 10px;\n    background-color: #161b22;\n    border-top: 1px solid #30363d;\n}\n\n#message-input {\n    flex: 1;\n    padding: 10px;\n    border-radius: 20px;\n    border: 1px solid #30363d;\n    background-color: #0d1117;\n    color: #e6edf3;\n}\n\n.btn-send {\n    padding: 10px 16px;\n    background-color: #388bfd;\n    color: white;\n    border: none;\n    border-radius: 20px;\n    cursor: pointer;\n}\n\n.btn-send:hover {\n    background-color: #1f6feb;\n}\n\n/* ====== MODAL ====== */\n.modal {\n    display: none;\n    position: fixed;\n    inset: 0;\n    background: rgba(0,0,0,0.5);\n    align-items: center;\n    justify-content: center;\n}\n\n.modal.show {\n    display: flex;\n}\n\n.modal-content {\n    background-color: #161b22;\n    border: 1px solid #30363d;\n    width: 400px;\n    padding: 20px;\n    border-radius: 8px;\n    color: #e6edf3;\n}\n\n.modal-header {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 15px;\n}\n\n.modal-close {\n    background: none;\n    border: none;\n    color: #e6edf3;\n    font-size: 22px;\n    cursor: pointer;\n}\n\n.users-list {\n    max-height: 200px;\n    overflow-y: auto;\n    border: 1px solid #30363d;\n    border-radius: 6px;\n    padding: 5px;\n}\n\n/* ====== BOTONES DEL MODAL ====== */\n.btn-secondary {\n    background-color: #21262d;\n    color: #e6edf3;\n}\n\n.btn-primary {\n    background-color: #1f6feb;\n    color: white;\n}\n\n/* ====== LOADING ====== */\n.loading-overlay {\n    position: fixed;\n    inset: 0;\n    display: none;\n    background: rgba(0,0,0,0.4);\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n}\n\n.loading-overlay.show {\n    display: flex;\n}\n\n.spinner {\n    width: 40px;\n    height: 40px;\n    border: 5px solid #1f6feb;\n    border-top: 5px solid transparent;\n    border-radius: 50%;\n    animation: spin 0.8s linear infinite;\n}\n\n.btn-record {\n    padding: 10px 14px;\n    background-color: #238636;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    cursor: pointer;\n    font-size: 18px;\n    transition: all 0.3s;\n}\n\n.btn-record:hover {\n    background-color: #2ea043;\n    transform: scale(1.1);\n}\n\n.btn-record.recording {\n    background-color: #da3633;\n    animation: pulse 1s infinite;\n}\n\n@keyframes pulse {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0.6; }\n}\n\n.btn-record:disabled {\n    background-color: #6e7681;\n    cursor: not-allowed;\n}\n\n/* Estilos para mensajes de audio */\n.audio-message {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 8px;\n    background-color: #1f6feb22;\n    border-radius: 8px;\n    margin: 4px 0;\n}\n\n.audio-play-btn {\n    background-color: #1f6feb;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n    font-size: 16px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.audio-play-btn:hover {\n    background-color: #388bfd;\n}\n\n.audio-duration {\n    font-size: 12px;\n    color: #8b949e;\n}\n\n@keyframes spin {\n    to { transform: rotate(360deg); }\n}\n\n/* ====== ESTILO PARA EL BADGE DE GRUPO EN LA LISTA DE CHATS ====== */\n.chat-item-header {\n    /* Usar flexbox para alinear el nombre, el badge y la hora */\n    display: flex;\n    align-items: center;\n    justify-content: space-between; /* Para que la hora se vaya al final */\n    gap: 10px; /* Espacio entre los elementos del header */\n}\n\n.chat-item-name {\n    /* Permitir que el nombre y el badge estÃ©n juntos, pero darles espacio para respirar */\n    display: flex;\n    align-items: center;\n    font-weight: bold;\n    /* Para que el nombre no ocupe todo el espacio y permita que la hora se mueva a la derecha */\n    flex-shrink: 1; \n}\n\n.chat-item-badge {\n    /* Clase para el badge que envuelve la palabra \"Grupo\" */\n    display: inline-block; \n    \n    /* ðŸ”‘ CLAVE: AÃ±adir un margen para separar el badge del nombre del grupo */\n    margin-left: 8px; \n    \n    /* Estilos visuales */\n    background-color: #388bfd; /* Azul, similar a chat-type-badge */\n    color: white;\n    padding: 1px 6px;\n    border-radius: 4px;\n    font-size: 10px; /* MÃ¡s pequeÃ±o para que se vea como una etiqueta */\n    font-weight: 600;\n}",""]);const a=o},374:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(7788),i(5896),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice"),s=r.Slice;let o=n.module("IceGrid");o.UserAccountNotFoundException=class extends r.UserException{constructor(e=""){super(e)}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::UserAccountNotFoundException"}_mostDerivedType(){return o.UserAccountNotFoundException}},o.UserAccountMapper=class extends r.Object{},o.UserAccountMapperPrx=class extends r.ObjectPrx{},s.defineOperations(o.UserAccountMapper,o.UserAccountMapperPrx,["::Ice::Object","::IceGrid::UserAccountMapper"],1,{getUserAccount:[,,,,[7],[[7]],,[o.UserAccountNotFoundException],,]}),t.IceGrid=o},403:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(5896),i(3239),i(1779),i(4997),i(359),i(7168),i(9157);const r=n.Debug,s=n.HashMap,o=n.LocatorRegisterPrx,a=n.Protocol;class c{constructor(e,t,i){this._locator=e,this._locatorRegistry=null,this._table=t,this._background=i,this._adapterRequests=new Map,this._objectRequests=new s(s.compareEquals)}destroy(){this._locatorRegistry=null,this._table.clear()}equals(e){return this===e||e instanceof c&&this._locator.equals(e._locator)}hashCode(){return this._locator.hashCode()}getLocator(){return this._locator}getLocatorRegistry(){return null!==this._locatorRegistry?n.Promise.resolve(this._locatorRegistry):this._locator.getRegistry().then(e=>(this._locatorRegistry=o.uncheckedCast(e.ice_locator(null).ice_endpointSelection(n.EndpointSelectionType.Ordered)),this._locatorRegistry))}getEndpoints(e,t,i,s){const o=s||new n.Promise;r.assert(e.isIndirect());let a=null;const c={value:!1};if(e.isWellKnown()){const t=this._table.getObjectReference(e.getIdentity(),i,c);if(!c.value){if(!this._background||null===t)return this.getObjectRequest(e).addCallback(e,null,i,o),o;this.getObjectRequest(e).addCallback(e,null,i,null)}if(t.isIndirect()){if(!t.isWellKnown())return e.getInstance().traceLevels().location>=1&&this.traceWellKnown("found adapter for well-known object in locator cache",e,t),this.getEndpoints(t,e,i,o),o}else a=t.getEndpoints()}else if(a=this._table.getAdapterEndpoints(e.getAdapterId(),i,c),!c.value){if(!this._background||null===a)return this.getAdapterRequest(e).addCallback(e,t,i,o),o;this.getAdapterRequest(e).addCallback(e,t,i,null)}return r.assert(null!==a),e.getInstance().traceLevels().location>=1&&this.getEndpointsTrace(e,a,!0),o.resolve([a,!0]),o}clearCache(e){if(r.assert(e.isIndirect()),e.isWellKnown()){const t=this._table.removeObjectReference(e.getIdentity());null!==t&&(t.isIndirect()?t.isWellKnown()||(e.getInstance().traceLevels().location>=2&&this.traceWellKnown("removed adapter for well-known object from locator cache",e,t),this.clearCache(t)):e.getInstance().traceLevels().location>=2&&this.trace("removed endpoints for well-known object from locator cache",e,t.getEndpoints()))}else{const t=this._table.removeAdapterEndpoints(e.getAdapterId());null!==t&&e.getInstance().traceLevels().location>=2&&this.trace("removed endpoints for adapter from locator cache",e,t)}}trace(e,t,i){r.assert(t.isIndirect());const n=[];n.push(e),n.push("\n"),t.isWellKnown()?(n.push("well-known proxy = "),n.push(t.toString()),n.push("\n")):(n.push("adapter = "),n.push(t.getAdapterId()),n.push("\n")),n.push("endpoints = "),n.push(i.map(e=>e.toString()).join(":")),t.getInstance().initializationData().logger.trace(t.getInstance().traceLevels().locationCat,n.join(""))}traceWellKnown(e,t,i){r.assert(t.isWellKnown());const n=[];n.push(e),n.push("\n"),n.push("well-known proxy = "),n.push(t.toString()),n.push("\n"),n.push("adapter = "),n.push(i.getAdapterId()),t.getInstance().initializationData().logger.trace(t.getInstance().traceLevels().locationCat,n.join(""))}getEndpointsException(e,t){r.assert(e.isIndirect());const i=e.getInstance();try{throw t}catch(t){if(t instanceof n.AdapterNotFoundException){if(i.traceLevels().location>=1){const t=[];t.push("adapter not found\n"),t.push("adapter = "),t.push(e.getAdapterId()),i.initializationData().logger.trace(i.traceLevels().locationCat,t.join(""))}const t=new n.NotRegisteredException;throw t.kindOfObject="object adapter",t.id=e.getAdapterId(),t}if(t instanceof n.ObjectNotFoundException){if(i.traceLevels().location>=1){const t=[];t.push("object not found\n"),t.push("object = "),t.push(n.identityToString(e.getIdentity(),i.toStringMode())),i.initializationData().logger.trace(i.traceLevels().locationCat,t.join(""))}const t=new n.NotRegisteredException;throw t.kindOfObject="object",t.id=n.identityToString(e.getIdentity(),i.toStringMode()),t}if(t instanceof n.NotRegisteredException)throw t;if(t instanceof n.LocalException){if(i.traceLevels().location>=1){const n=[];n.push("couldn't contact the locator to retrieve endpoints\n"),e.getAdapterId().length>0?(n.push("adapter = "),n.push(e.getAdapterId()),n.push("\n")):(n.push("well-known proxy = "),n.push(e.toString()),n.push("\n")),n.push("reason = "+t.toString()),i.initializationData().logger.trace(i.traceLevels().locationCat,n.join(""))}throw t}r.assert(!1)}}getEndpointsTrace(e,t,i){if(null!==t&&t.length>0)i?e.isWellKnown()?this.trace("found endpoints for well-known proxy in locator cache",e,t):this.trace("found endpoints for adapter in locator cache",e,t):e.isWellKnown()?this.trace("retrieved endpoints for well-known proxy from locator, adding to locator cache",e,t):this.trace("retrieved endpoints for adapter from locator, adding to locator cache",e,t);else{const t=e.getInstance(),i=[];i.push("no endpoints configured for "),e.getAdapterId().length>0?(i.push("adapter\n"),i.push("adapter = "),i.push(e.getAdapterId()),i.push("\n")):(i.push("well-known object\n"),i.push("well-known proxy = "),i.push(e.toString()),i.push("\n")),t.initializationData().logger.trace(t.traceLevels().locationCat,i.join(""))}}getAdapterRequest(e){if(e.getInstance().traceLevels().location>=1){const t=e.getInstance(),i=[];i.push("searching for adapter by id\n"),i.push("adapter = "),i.push(e.getAdapterId()),t.initializationData().logger.trace(t.traceLevels().locationCat,i.join(""))}let t=this._adapterRequests.get(e.getAdapterId());return void 0!==t||(t=new d(this,e),this._adapterRequests.set(e.getAdapterId(),t)),t}getObjectRequest(e){if(e.getInstance().traceLevels().location>=1){const t=e.getInstance(),i=[];i.push("searching for well-known object\n"),i.push("well-known proxy = "),i.push(e.toString()),t.initializationData().logger.trace(t.traceLevels().locationCat,i.join(""))}let t=this._objectRequests.get(e.getIdentity());return void 0!==t||(t=new u(this,e),this._objectRequests.set(e.getIdentity(),t)),t}finishRequest(e,t,i,n){if(null===i||i._getReference().isIndirect())for(let e=0;e<t.length;++e)this._table.removeObjectReference(t[e].getIdentity());e.isWellKnown()?(null===i||i._getReference().isWellKnown()?n&&this._table.removeObjectReference(e.getIdentity()):this._table.addObjectReference(e.getIdentity(),i._getReference()),r.assert(this._objectRequests.has(e.getIdentity())),this._objectRequests.delete(e.getIdentity())):(null===i||i._getReference().isIndirect()?n&&this._table.removeAdapterEndpoints(e.getAdapterId()):this._table.addAdapterEndpoints(e.getAdapterId(),i._getReference().getEndpoints()),r.assert(this._adapterRequests.has(e.getAdapterId())),this._adapterRequests.delete(e.getAdapterId()))}}n.LocatorInfo=c;class l{constructor(e,t,i){this._ref=e,this._ttl=t,this._promise=i}response(e,t){let i=null;if(null!==t){const n=t._getReference();if(this._ref.isWellKnown()&&!a.isSupported(this._ref.getEncoding(),n.getEncoding()));else if(n.isIndirect()){if(this._ref.isWellKnown()&&!n.isWellKnown())return this._ref.getInstance().traceLevels().location>=1&&e.traceWellKnown("retrieved adapter for well-known object from locator, adding to locator cache",this._ref,n),void e.getEndpoints(n,this._ref,this._ttl).then(e=>{null!==this._promise&&this._promise.resolve(e)},e=>{null!==this._promise&&this._promise.reject(e)})}else i=n.getEndpoints()}this._ref.getInstance().traceLevels().location>=1&&e.getEndpointsTrace(this._ref,i,!1),null!==this._promise&&this._promise.resolve(null===i?[[],!1]:[i,!1])}exception(e,t){try{e.getEndpointsException(this._ref,t)}catch(e){null!==this._promise&&this._promise.reject(e)}}}class h{constructor(e,t){this._locatorInfo=e,this._ref=t,this._callbacks=[],this._wellKnownRefs=[],this._sent=!1,this._response=!1,this._proxy=null,this._exception=null}addCallback(e,t,i,n){const r=new l(e,i,n);this._response?r.response(this._locatorInfo,this._proxy):null!==this._exception?r.exception(this._locatorInfo,this._exception):(this._callbacks.push(r),null!==t&&this._wellKnownRefs.push(t),this._sent||(this._sent=!0,this.send()))}response(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,!1),this._response=!0,this._proxy=e;for(let t=0;t<this._callbacks.length;++t)this._callbacks[t].response(this._locatorInfo,e)}exception(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof n.UserException),this._exception=e;for(let t=0;t<this._callbacks.length;++t)this._callbacks[t].exception(this._locatorInfo,e)}}class u extends h{constructor(e,t){super(e,t),r.assert(t.isWellKnown())}send(){try{this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then(e=>this.response(e),e=>this.exception(e))}catch(e){this.exception(e)}}}class d extends h{constructor(e,t){super(e,t),r.assert(t.isIndirect())}send(){try{this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then(e=>this.response(e),e=>this.exception(e))}catch(e){this.exception(e)}}}e.exports.Ice=n},427:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry,r=i(3905).Glacier2;i(8930),i(1488),i(1930),i(7788),i(5896),i(9483),i(3239),i(1781),i(7548),i(8372),i(3418),i(5527);const s=n.module("Ice"),o=s.Slice;r.CannotCreateSessionException=class extends s.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return s.UserException}static get _id(){return"::Glacier2::CannotCreateSessionException"}_mostDerivedType(){return r.CannotCreateSessionException}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},o.PreservedUserException(r.CannotCreateSessionException),r.Session=class extends s.Object{},r.SessionPrx=class extends s.ObjectPrx{},o.defineOperations(r.Session,r.SessionPrx,["::Glacier2::Session","::Ice::Object"],0,{destroy:[,,,,,,,,,]}),r.StringSet=class extends s.Object{},r.StringSetPrx=class extends s.ObjectPrx{},o.defineOperations(r.StringSet,r.StringSetPrx,["::Glacier2::StringSet","::Ice::Object"],0,{add:[,2,2,,,[["Ice.StringSeqHelper"]],,,,],remove:[,2,2,,,[["Ice.StringSeqHelper"]],,,,],get:[,2,2,,["Ice.StringSeqHelper"],,,,,]}),r.IdentitySet=class extends s.Object{},r.IdentitySetPrx=class extends s.ObjectPrx{},o.defineOperations(r.IdentitySet,r.IdentitySetPrx,["::Glacier2::IdentitySet","::Ice::Object"],0,{add:[,2,2,,,[["Ice.IdentitySeqHelper"]],,,,],remove:[,2,2,,,[["Ice.IdentitySeqHelper"]],,,,],get:[,2,2,,["Ice.IdentitySeqHelper"],,,,,]}),r.SessionControl=class extends s.Object{},r.SessionControlPrx=class extends s.ObjectPrx{},o.defineOperations(r.SessionControl,r.SessionControlPrx,["::Glacier2::SessionControl","::Ice::Object"],0,{categories:[,,,,["Glacier2.StringSetPrx"],,,,,],adapterIds:[,,,,["Glacier2.StringSetPrx"],,,,,],identities:[,,,,["Glacier2.IdentitySetPrx"],,,,,],getSessionTimeout:[,2,2,,[3],,,,,],destroy:[,,,,,,,,,]}),r.SessionManager=class extends s.Object{},r.SessionManagerPrx=class extends s.ObjectPrx{},o.defineOperations(r.SessionManager,r.SessionManagerPrx,["::Glacier2::SessionManager","::Ice::Object"],0,{create:[,,,2,["Glacier2.SessionPrx"],[[7],["Glacier2.SessionControlPrx"]],,[r.CannotCreateSessionException],,]}),r.SSLSessionManager=class extends s.Object{},r.SSLSessionManagerPrx=class extends s.ObjectPrx{},o.defineOperations(r.SSLSessionManager,r.SSLSessionManagerPrx,["::Glacier2::SSLSessionManager","::Ice::Object"],0,{create:[,,,2,["Glacier2.SessionPrx"],[[r.SSLInfo],["Glacier2.SessionControlPrx"]],,[r.CannotCreateSessionException],,]}),t.Glacier2=r},532:(e,t,i)=>{const n=i(1454).Ice,r=n.Logger;let s=null;n.getProcessLogger=function(){return null===s&&(s=new r("","")),s},n.setProcessLogger=function(e){s=e},e.exports.Ice=n},537:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice,t.Ice=r},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},543:(e,t,i)=>{const n=i(8846).Ice;i(8789),i(4262),i(6070),i(4997),i(9294);const r=n.Instance,s=n.Debug;n.Communicator=class{constructor(e){this._instance=new r(e)}finishSetup(e){this._instance.finishSetup(this,e)}destroy(){return this._instance.destroy()}shutdown(){try{return this._instance.objectAdapterFactory().shutdown()}catch(e){return s.assert(e instanceof n.CommunicatorDestroyedException),n.Promise.resolve()}}waitForShutdown(){try{return this._instance.objectAdapterFactory().waitForShutdown()}catch(e){return s.assert(e instanceof n.CommunicatorDestroyedException),n.Promise.resolve()}}isShutdown(){try{return this._instance.objectAdapterFactory().isShutdown()}catch(e){if(!(e instanceof n.CommunicatorDestroyedException))throw e;return!0}}stringToProxy(e){return this._instance.proxyFactory().stringToProxy(e)}proxyToString(e){return this._instance.proxyFactory().proxyToString(e)}propertyToProxy(e){return this._instance.proxyFactory().propertyToProxy(e)}proxyToProperty(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)}stringToIdentity(e){return n.stringToIdentity(e)}identityToString(e){return n.identityToString(e,this._instance.toStringMode())}createObjectAdapter(e){const t=new n.AsyncResultBase(this,"createObjectAdapter",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,t),t}createObjectAdapterWithEndpoints(e,t){0===e.length&&(e=n.generateUUID()),this.getProperties().setProperty(e+".Endpoints",t);const i=new n.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,i),i}createObjectAdapterWithRouter(e,t){0===e.length&&(e=n.generateUUID());const i=new n.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null);return this.proxyToProperty(t,e+".Router").forEach((e,t)=>{this.getProperties().setProperty(t,e)}),this._instance.objectAdapterFactory().createObjectAdapter(e,t,i),i}addObjectFactory(e,t){this._instance.addObjectFactory(e,t)}findObjectFactory(e){return this._instance.findObjectFactory(e)}getValueFactoryManager(){return this._instance.initializationData().valueFactoryManager}getImplicitContext(){return this._instance.getImplicitContext()}getProperties(){return this._instance.initializationData().properties}getLogger(){return this._instance.initializationData().logger}getDefaultRouter(){return this._instance.referenceFactory().getDefaultRouter()}setDefaultRouter(e){this._instance.setDefaultRouter(e)}getDefaultLocator(){return this._instance.referenceFactory().getDefaultLocator()}setDefaultLocator(e){this._instance.setDefaultLocator(e)}flushBatchRequests(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}get instance(){return this._instance}},e.exports.Ice=n},701:(e,t,i)=>{const n=i(8846).Ice,r=n._ModuleRegistry;i(7548),i(3643),i(2466),i(4262),i(6352),i(5896),i(2698),i(4997),i(8930),i(5874),i(9157),i(3016),i(9072),i(1488),i(2713);const s=n.ArrayUtil,o=n.Debug,a=n.ExUtil,c=n.FormatType,l=n.OptionalFormat,h=n.Protocol,u=n.SlicedData,d=n.TraceUtil;Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)};class p{constructor(e,t){this.index=e,this.cb=t}}class _{constructor(e,t,i,n){this._stream=e,this._encaps=t,this._sliceValues=i,this._valueFactoryManager=n,this._patchMap=null,this._unmarshaledMap=new Map,this._typeIdMap=null,this._typeIdIndex=0,this._valueList=null}readOptional(){return!1}readPendingValues(){}readTypeId(e){let t;if(null===this._typeIdMap&&(this._typeIdMap=new Map),e){if(t=this._typeIdMap.get(this._stream.readSize()),void 0===t)throw new n.UnmarshalOutOfBoundsException}else t=this._stream.readString(),this._typeIdMap.set(++this._typeIdIndex,t);return t}newInstance(e){let t=this._valueFactoryManager.find(e),i=null;return void 0!==t&&(i=t(e)),null==i&&(t=this._valueFactoryManager.find(""),void 0!==t&&(i=t(e))),null==i&&(i=this._stream.createInstance(e)),i}addPatchEntry(e,t){o.assert(e>0);const i=this._unmarshaledMap.get(e);if(null!=i)return void t(i);null===this._patchMap&&(this._patchMap=new Map);let n=this._patchMap.get(e);void 0===n&&(n=[],this._patchMap.set(e,n)),n.push(t)}unmarshal(e,t){if(this._unmarshaledMap.set(e,t),t._iceRead(this._stream),null!==this._patchMap){const i=this._patchMap.get(e);if(void 0!==i){o.assert(i.length>0);for(let e=0;e<i.length;++e)i[e](t);this._patchMap.delete(e)}}if(null!==this._patchMap&&0!==this._patchMap.size||null!==this._valueList){if(null===this._valueList&&(this._valueList=[]),this._valueList.push(t),null===this._patchMap||0===this._patchMap.size){for(let e=0;e<this._valueList.length;e++)try{this._valueList[e].ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}this._valueList=[]}}else try{t.ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}}class g extends _{constructor(e,t,i,n){super(e,t,i,n),this._sliceType=0}readValue(e){o.assert(null!==e);let t=this._stream.readInt();if(t>0)throw new n.MarshalException("invalid object id");t=-t,0===t?e(null):this.addPatchEntry(t,e)}throwException(){o.assert(0===this._sliceType);const e=this._stream.readBool();this._sliceType=2,this._skipFirstSlice=!1,this.startSlice();const t=this._typeId;for(;;){const i=this._stream.createUserException(this._typeId);if(null!==i)throw i._read(this._stream),e&&this.readPendingValues(),i;this.skipSlice();try{this.startSlice()}catch(e){throw e instanceof n.UnmarshalOutOfBoundsException&&(e.reason="unknown exception type `"+t+"'"),e}}}startInstance(e){o.assert(this._sliceType===e),this._skipFirstSlice=!0}endInstance(e){if(1===this._sliceType){if(this.startSlice(),0!==this._stream.readSize())throw new n.MarshalException("invalid Object slice");this.endSlice()}return this._sliceType=0,null}startSlice(){if(this._skipFirstSlice)return this._skipFirstSlice=!1,this._typeId;if(1===this._sliceType){const e=this._stream.readBool();this._typeId=this.readTypeId(e)}else this._typeId=this._stream.readString();if(this._sliceSize=this._stream.readInt(),this._sliceSize<4)throw new n.UnmarshalOutOfBoundsException;return this._typeId}endSlice(){}skipSlice(){this._stream.traceSkipSlice(this._typeId,this._sliceType),o.assert(this._sliceSize>=4),this._stream.skip(this._sliceSize-4)}readPendingValues(){let e;do{e=this._stream.readSize();for(let t=e;t>0;--t)this.readInstance()}while(e>0);if(null!==this._patchMap&&0!==this._patchMap.size)throw new n.MarshalException("index for class received, but no instance")}readInstance(){const e=this._stream.readInt();let t=null;if(e<=0)throw new n.MarshalException("invalid object id");this._sliceType=1,this._skipFirstSlice=!1,this.startSlice();const i=this._typeId;for(;;){if(this._typeId==n.Value.ice_staticId())throw new n.NoValueFactoryException("",i);if(t=this.newInstance(this._typeId),t)break;if(!this._sliceValues)throw new n.NoValueFactoryException("no value factory found and slicing is disabled",this._typeId);this.skipSlice(),this.startSlice()}this.unmarshal(e,t)}}class m extends _{constructor(e,t,i,n,r){super(e,t,i,n),this._compactIdResolver=r,this._current=null,this._valueIdIndex=1}readValue(e){const t=this._stream.readSize();if(t<0)throw new n.MarshalException("invalid object id");0===t?null!==e&&e(null):null!==this._current&&0!==(this._current.sliceFlags&h.FLAG_HAS_INDIRECTION_TABLE)?null!==e&&(null===this._current.indirectPatchList&&(this._current.indirectPatchList=[]),this._current.indirectPatchList.push(new p(t-1,e))):this.readInstance(t,e)}throwException(){o.assert(null===this._current),this.push(2),this.startSlice();const e=this._current.typeId;for(;;){const t=this._stream.createUserException(this._current.typeId);if(null!==t)throw t._read(this._stream),t;if(this.skipSlice(),0!==(this._current.sliceFlags&h.FLAG_IS_LAST_SLICE)){if(0===e.indexOf("::"))throw new n.UnknownUserException(e.substr(2));throw new n.UnknownUserException(e)}this.startSlice()}}startInstance(e){o.assert(void 0!==e),o.assert(null!==this._current.sliceType&&this._current.sliceType===e),this._current.skipFirstSlice=!0}endInstance(e){let t=null;return e&&(t=this.readSlicedData()),null!==this._current.slices&&(this._current.slices.length=0,this._current.indirectionTables.length=0),this._current=this._current.previous,t}startSlice(){if(this._current.skipFirstSlice)return this._current.skipFirstSlice=!1,this._current.typeId;if(this._current.sliceFlags=this._stream.readByte(),1===this._current.sliceType?(this._current.sliceFlags&h.FLAG_HAS_TYPE_ID_COMPACT)===h.FLAG_HAS_TYPE_ID_COMPACT?(this._current.typeId="",this._current.compactId=this._stream.readSize()):0!==(this._current.sliceFlags&(h.FLAG_HAS_TYPE_ID_INDEX|h.FLAG_HAS_TYPE_ID_STRING))?(this._current.typeId=this.readTypeId(0!==(this._current.sliceFlags&h.FLAG_HAS_TYPE_ID_INDEX)),this._current.compactId=-1):(this._current.typeId="",this._current.compactId=-1):(this._current.typeId=this._stream.readString(),this._current.compactId=-1),0!==(this._current.sliceFlags&h.FLAG_HAS_SLICE_SIZE)){if(this._current.sliceSize=this._stream.readInt(),this._current.sliceSize<4)throw new n.UnmarshalOutOfBoundsException}else this._current.sliceSize=0;return this._current.typeId}endSlice(){if(0!==(this._current.sliceFlags&h.FLAG_HAS_OPTIONAL_MEMBERS)&&this._stream.skipOptionals(),0!==(this._current.sliceFlags&h.FLAG_HAS_INDIRECTION_TABLE)){const e=[],t=this._stream.readAndCheckSeqSize(1);for(let i=0;i<t;++i)e[i]=this.readInstance(this._stream.readSize(),null);if(0===e.length)throw new n.MarshalException("empty indirection table");if((null===this._current.indirectPatchList||0===this._current.indirectPatchList.length)&&0===(this._current.sliceFlags&h.FLAG_HAS_OPTIONAL_MEMBERS))throw new n.MarshalException("no references to indirection table");null!==this._current.indirectPatchList&&(this._current.indirectPatchList.forEach(t=>{if(o.assert(t.index>=0),t.index>=e.length)throw new n.MarshalException("indirection out of range");this.addPatchEntry(e[t.index],t.cb)}),this._current.indirectPatchList.length=0)}}skipSlice(){this._stream.traceSkipSlice(this._current.typeId,this._current.sliceType);const e=this._stream.pos;if(0===(this._current.sliceFlags&h.FLAG_HAS_SLICE_SIZE))throw 1===this._current.sliceType?new n.NoValueFactoryException("no value factory found and compact format prevents slicing (the sender should use the sliced format instead)",this._current.typeId):0===this._current.typeId.indexOf("::")?new n.UnknownUserException(this._current.typeId.substring(2)):new n.UnknownUserException(this._current.typeId);o.assert(this._current.sliceSize>=4),this._stream.skip(this._current.sliceSize-4);const t=new n.SliceInfo;t.typeId=this._current.typeId,t.compactId=this._current.compactId,t.hasOptionalMembers=0!==(this._current.sliceFlags&h.FLAG_HAS_OPTIONAL_MEMBERS),t.isLastSlice=0!==(this._current.sliceFlags&h.FLAG_IS_LAST_SLICE);const i=this._stream._buf,r=i.position;let s=r;if(t.hasOptionalMembers&&--s,i.position=e,t.bytes=i.getArray(s-e),i.position=r,null===this._current.slices&&(this._current.slices=[],this._current.indirectionTables=[]),0!==(this._current.sliceFlags&h.FLAG_HAS_INDIRECTION_TABLE)){const e=this._stream.readAndCheckSeqSize(1),t=[];for(let i=0;i<e;++i)t[i]=this.readInstance(this._stream.readSize(),null);this._current.indirectionTables.push(t)}else this._current.indirectionTables.push(null);this._current.slices.push(t)}readOptional(e,t){return(null===this._current||0!==(this._current.sliceFlags&h.FLAG_HAS_OPTIONAL_MEMBERS))&&this._stream.readOptImpl(e,t)}readInstance(e,t){o.assert(e>0);let i=null;if(e>1)return null!==t&&this.addPatchEntry(e,t),e;this.push(1),e=++this._valueIdIndex,this.startSlice();const r=this._current.typeId;for(;;){if(this._current.compactId>=0){if(this._current.typeId="",null!==this._compactIdResolver)try{this._current.typeId=this._compactIdResolver.call(null,this._current.compactId)}catch(e){if(!(e instanceof n.LocalException))throw new n.MarshalException("exception in CompactIdResolver for ID "+this._current.compactId,e);throw e}0===this._current.typeId.length&&(this._current.typeId=this._stream.resolveCompactId(this._current.compactId))}if(this._current.typeId.length>0&&(i=this.newInstance(this._current.typeId)),null!=i)break;if(!this._sliceValues)throw new n.NoValueFactoryException("no value factory found and slicing is disabled",this._current.typeId);if(this.skipSlice(),0!==(this._current.sliceFlags&h.FLAG_IS_LAST_SLICE)){i=new n.UnknownSlicedValue(r);break}this.startSlice()}if(this.unmarshal(e,i),null===this._current&&null!==this._patchMap&&0!==this._patchMap.size)throw new n.MarshalException("index for class received, but no instance");return null!==t&&t(i),e}readSlicedData(){if(null===this._current.slices)return null;o.assert(this._current.slices.length===this._current.indirectionTables.length);for(let e=0;e<this._current.slices.length;++e){const t=this._current.indirectionTables[e],i=this._current.slices[e];if(i.instances=[],t)for(let e=0;e<t.length;++e)this.addPatchEntry(t[e],f(i.instances,e,n.Value))}return new u(s.clone(this._current.slices))}push(e){null===this._current?this._current=new m.InstanceData(null):this._current=this._current.next?this._current.next:new m.InstanceData(this._current),this._current.sliceType=e,this._current.skipFirstSlice=!1}}m.InstanceData=class{constructor(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.skipFirstSlice=!1,this.slices=null,this.indirectionTables=null,this.sliceFlags=0,this.sliceSize=0,this.typeId=null,this.compactId=0,this.indirectPatchList=null}};const f=function(e,t,i){return n=>{null===n||n instanceof i||a.throwUOE(i.ice_staticId(),n),e[t]=n}};class y{constructor(){this.start=0,this.sz=0,this.encoding=null,this.encoding_1_0=!1,this.decoder=null,this.next=null}reset(){this.decoder=null}setEncoding(e){this.encoding=e,this.encoding_1_0=e.equals(n.Encoding_1_0)}}class S{constructor(e,t,i){const n={instance:null,encoding:null,bytes:null,buffer:null};this._checkArgs([e,t,i],n),this._initialize(n)}_checkArgs(e,t){if(e.forEach(e=>{if(null!=e)if(e.constructor===n.Communicator)t.instance=e.instance;else if(e.constructor===n.Instance)t.instance=e;else if(e.constructor===n.EncodingVersion)t.encoding=e;else if(e.constructor===n.Buffer)t.buffer=e;else if(e.constructor===ArrayBuffer)t.bytes=e;else{if(e.constructor!==Uint8Array)throw new n.InitializationException("unknown argument to InputStream constructor");t.bytes=e.buffer}}),null!==t.buffer&&null!==t.bytes)throw new n.InitializationException("invalid argument to InputStream constructor")}_initialize(e){this._instance=e.instance,this._encoding=e.encoding,this._encapsStack=null,this._encapsCache=null,this._closure=null,this._sliceValues=!0,this._startSeq=-1,this._sizePos=-1,this._compactIdResolver=null,null!==this._instance?(null===this._encoding&&(this._encoding=this._instance.defaultsAndOverrides().defaultEncoding),this._traceSlicing=this._instance.traceLevels().slicing>0,this._valueFactoryManager=this._instance.initializationData().valueFactoryManager,this._logger=this._instance.initializationData().logger):(null===this._encoding&&(this._encoding=h.currentEncoding),this._traceSlicing=!1,this._valueFactoryManager=null,this._logger=null),null!==e.bytes?this._buf=new n.Buffer(e.bytes):null!==e.buffer?this._buf=e.buffer:this._buf=new n.Buffer}reset(){this._buf.reset(),this.clear()}clear(){null!==this._encapsStack&&(o.assert(null===this._encapsStack.next),this._encapsStack.next=this._encapsCache,this._encapsCache=this._encapsStack,this._encapsCache.reset(),this._encapsStack=null),this._startSeq=-1,this._sliceValues=!0}swap(e){o.assert(this._instance===e._instance),[e._buf,this._buf]=[this._buf,e._buf],[e._encoding,this._encoding]=[this._encoding,e._encoding],[e._traceSlicing,this._traceSlicing]=[this._traceSlicing,e._traceSlicing],[e._closure,this._closure]=[this._closure,e.closure],[e._sliceValues,this._sliceValues]=[this._sliceValues,e._sliceValues],this.resetEncapsulation(),e.resetEncapsulation(),[e._startSeq,this._startSeq]=[this._startSeq,e._startSeq],[e._minSeqSize,this._minSeqSize]=[this._minSeqSize,e._minSeqSize],[e._sizePos,this._sizePos]=[this._sizePos,e._sizePos],[e._valueFactoryManager,this._valueFactoryManager]=[this._valueFactoryManager,e._valueFactoryManager],[e._logger,this._logger]=[this._logger,e._logger],[e._compactIdResolver,this._compactIdResolver]=[this._compactIdResolver,e._compactIdResolver]}resetEncapsulation(){this._encapsStack=null}resize(e){this._buf.resize(e),this._buf.position=e}startValue(){o.assert(null!==this._encapsStack&&null!==this._encapsStack.decoder),this._encapsStack.decoder.startInstance(1)}endValue(e){return o.assert(null!==this._encapsStack&&null!==this._encapsStack.decoder),this._encapsStack.decoder.endInstance(e)}startException(){o.assert(null!==this._encapsStack&&null!==this._encapsStack.decoder),this._encapsStack.decoder.startInstance(2)}endException(e){return o.assert(null!==this._encapsStack&&null!==this._encapsStack.decoder),this._encapsStack.decoder.endInstance(e)}startEncapsulation(){let e=this._encapsCache;null!==e?(e.reset(),this._encapsCache=this._encapsCache.next):e=new y,e.next=this._encapsStack,this._encapsStack=e,this._encapsStack.start=this._buf.position;const t=this.readInt();if(t<6)throw new n.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new n.UnmarshalOutOfBoundsException;this._encapsStack.sz=t;const i=new n.EncodingVersion;return i._read(this),h.checkSupportedEncoding(i),this._encapsStack.setEncoding(i),i}endEncapsulation(){if(o.assert(null!==this._encapsStack),this._encapsStack.encoding_1_0){if(this._buf.position!==this._encapsStack.start+this._encapsStack.sz){if(this._buf.position+1!==this._encapsStack.start+this._encapsStack.sz)throw new n.EncapsulationException;try{this._buf.get()}catch(e){throw new n.UnmarshalOutOfBoundsException}}}else if(this.skipOptionals(),this._buf.position!==this._encapsStack.start+this._encapsStack.sz)throw new n.EncapsulationException;const e=this._encapsStack;this._encapsStack=e.next,e.next=this._encapsCache,this._encapsCache=e,this._encapsCache.reset()}skipEmptyEncapsulation(){const e=this.readInt();if(e<6)throw new n.EncapsulationException;if(e-4>this._buf.remaining)throw new n.UnmarshalOutOfBoundsException;const t=new n.EncodingVersion;if(t._read(this),h.checkSupportedEncoding(t),t.equals(n.Encoding_1_0)){if(6!=e)throw new n.EncapsulationException}else this._buf.position=this._buf.position+e-6;return t}readEncapsulation(e){o.assert(void 0!==e);const t=this.readInt();if(t<6)throw new n.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new n.UnmarshalOutOfBoundsException;null!==e?(e._read(this),this._buf.position=this._buf.position-6):this._buf.position=this._buf.position-4;try{return this._buf.getArray(t)}catch(e){throw new n.UnmarshalOutOfBoundsException}}getEncoding(){return null!==this._encapsStack?this._encapsStack.encoding:this._encoding}getEncapsulationSize(){return o.assert(null!==this._encapsStack),this._encapsStack.sz-6}skipEncapsulation(){const e=this.readInt();if(e<6)throw new n.UnmarshalOutOfBoundsException;const t=new n.EncodingVersion;t._read(this);try{this._buf.position=this._buf.position+e-6}catch(e){throw new n.UnmarshalOutOfBoundsException}return t}startSlice(){return o.assert(null!==this._encapsStack&&null!==this._encapsStack.decoder),this._encapsStack.decoder.startSlice()}endSlice(){o.assert(null!==this._encapsStack&&null!==this._encapsStack.decoder),this._encapsStack.decoder.endSlice()}skipSlice(){o.assert(null!==this._encapsStack&&null!==this._encapsStack.decoder),this._encapsStack.decoder.skipSlice()}readPendingValues(){null!==this._encapsStack&&null!==this._encapsStack.decoder?this._encapsStack.decoder.readPendingValues():(null!==this._encapsStack&&this._encapsStack.encoding_1_0||null===this._encapsStack&&this._encoding.equals(n.Encoding_1_0))&&this.skipSize()}readSize(){try{const e=this._buf.get();if(255===e){const e=this._buf.getInt();if(e<0)throw new n.UnmarshalOutOfBoundsException;return e}return e}catch(e){throw new n.UnmarshalOutOfBoundsException}}readAndCheckSeqSize(e){const t=this.readSize();if(0===t)return t;if(-1===this._startSeq||this._buf.position>this._startSeq+this._minSeqSize?(this._startSeq=this._buf.position,this._minSeqSize=t*e):this._minSeqSize+=t*e,this._startSeq+this._minSeqSize>this._buf.limit)throw new n.UnmarshalOutOfBoundsException;return t}readBlob(e){if(this._buf.remaining<e)throw new n.UnmarshalOutOfBoundsException;try{return this._buf.getArray(e)}catch(e){throw new n.UnmarshalOutOfBoundsException}}readOptional(e,t){return o.assert(null!==this._encapsStack),null!==this._encapsStack.decoder?this._encapsStack.decoder.readOptional(e,t):this.readOptImpl(e,t)}readOptionalHelper(e,t,i){return this.readOptional(e,t)?i.call(this):void 0}readByte(){try{return this._buf.get()}catch(e){throw new n.UnmarshalOutOfBoundsException}}readByteSeq(){return this._buf.getArray(this.readAndCheckSeqSize(1))}readBool(){try{return 1===this._buf.get()}catch(e){throw new n.UnmarshalOutOfBoundsException}}readShort(){try{return this._buf.getShort()}catch(e){throw new n.UnmarshalOutOfBoundsException}}readInt(){try{return this._buf.getInt()}catch(e){throw new n.UnmarshalOutOfBoundsException}}readLong(){try{return this._buf.getLong()}catch(e){throw new n.UnmarshalOutOfBoundsException}}readFloat(){try{return this._buf.getFloat()}catch(e){throw new n.UnmarshalOutOfBoundsException}}readDouble(){try{return this._buf.getDouble()}catch(e){throw new n.UnmarshalOutOfBoundsException}}readString(){const e=this.readSize();if(0===e)return"";if(this._buf.remaining<e)throw new n.UnmarshalOutOfBoundsException;try{return this._buf.getString(e)}catch(e){throw new n.UnmarshalOutOfBoundsException}}readProxy(e){return this._instance.proxyFactory().streamToProxy(this,e)}readOptionalProxy(e,t){return this.readOptional(e,l.FSize)?(this.skip(4),this.readProxy(t)):void 0}readEnum(e){let t;t=this.getEncoding().equals(n.Encoding_1_0)?e.maxValue<127?this.readByte():e.maxValue<32767?this.readShort():this.readInt():this.readSize();const i=e.valueOf(t);if(void 0===i)throw new n.MarshalException("enumerator value "+t+" is out of range");return i}readOptionalEnum(e,t){return this.readOptional(e,l.Size)?this.readEnum(t):void 0}readValue(e,t){this.initEncaps(),this._encapsStack.decoder.readValue(null===e?null:i=>{null===i||i instanceof t||a.throwUOE(t.ice_staticId(),i),e(i)})}readOptionalValue(e,t,i){this.readOptional(e,l.Class)?this.readValue(t,i):t(void 0)}throwException(){this.initEncaps(),this._encapsStack.decoder.throwException()}readOptImpl(e,t){if(this.isEncoding_1_0())return!1;for(;;){if(this._buf.position>=this._encapsStack.start+this._encapsStack.sz)return!1;const i=this.readByte();if(i===h.OPTIONAL_END_MARKER)return this._buf.position-=1,!1;const r=l.valueOf(7&i);let s=i>>3;if(30===s&&(s=this.readSize()),s>e){const e=s<30?1:s<255?2:6;return this._buf.position-=e,!1}if(!(s<e)){if(r!==t)throw new n.MarshalException("invalid optional data member `"+s+"': unexpected format");return!0}this.skipOptional(r)}}skipOptional(e){switch(e){case l.F1:this.skip(1);break;case l.F2:this.skip(2);break;case l.F4:this.skip(4);break;case l.F8:this.skip(8);break;case l.Size:this.skipSize();break;case l.VSize:this.skip(this.readSize());break;case l.FSize:this.skip(this.readInt());break;case l.Class:this.readValue(null,n.Value);break;default:o.assert(!1)}}skipOptionals(){for(;;){if(this._buf.position>=this._encapsStack.start+this._encapsStack.sz)return;const e=this.readByte(),t=e<0?e+256:e;if(t===h.OPTIONAL_END_MARKER)return;const i=l.valueOf(7&t);t>>3==30&&this.skipSize(),this.skipOptional(i)}}skip(e){if(e>this._buf.remaining)throw new n.UnmarshalOutOfBoundsException;this._buf.position+=e}skipSize(){255===this.readByte()&&this.skip(4)}isEmpty(){return this._buf.empty()}expand(e){this._buf.expand(e)}createInstance(e){let t=null;try{const i=e.length>2?e.substr(2).replace(/::/g,"."):"",n=r.type(i);void 0!==n&&(t=new n)}catch(t){throw new n.NoValueFactoryException("no value factory",e,t)}return t}createUserException(e){let t=null;try{const i=e.length>2?e.substr(2).replace(/::/g,"."):"",n=r.type(i);void 0!==n&&(t=new n)}catch(e){throw new n.MarshalException(e)}return t}resolveCompactId(e){const t=n.CompactIdRegistry.get(e);return void 0===t?"":t}isEncoding_1_0(){return null!==this._encapsStack?this._encapsStack.encoding_1_0:this._encoding.equals(n.Encoding_1_0)}initEncaps(){null===this._encapsStack&&(this._encapsStack=this._encapsCache,null!==this._encapsStack?this._encapsCache=this._encapsCache.next:this._encapsStack=new y,this._encapsStack.setEncoding(this._encoding),this._encapsStack.sz=this._buf.limit),null===this._encapsStack.decoder&&(this._encapsStack.encoding_1_0?this._encapsStack.decoder=new g(this,this._encapsStack,this._sliceValues,this._valueFactoryManager):this._encapsStack.decoder=new m(this,this._encapsStack,this._sliceValues,this._valueFactoryManager,this._compactIdResolver))}traceSkipSlice(e,t){this._traceSlicing&&null!==this._logger&&d.traceSlicing(2===t?"exception":"object",e,"Slicing",this._logger)}get valueFactoryManager(){return this._valueFactoryManager}set valueFactoryManager(e){this._valueFactoryManager=void 0!==e?e:null}get logger(){return this._logger}set logger(e){this._logger=void 0!==e?e:null}get compactIdResolver(){return this._compactIdResolver}set compactIdResolver(e){this._compactIdResolver=void 0!==e?e:null}get sliceValues(){return this._sliceValues}set sliceValues(e){this._sliceValues=e}get traceSlicing(){return this._traceSlicing}set traceSlicing(e){this._traceSlicing=e}get pos(){return this._buf.position}set pos(e){this._buf.position=e}get size(){return this._buf.limit}get instance(){return this._instance}get closure(){return this._type}set closure(e){this._type=e}get buffer(){return this._buf}}class w{constructor(e,t){this._stream=e,this._encaps=t,this._marshaledMap=new Map,this._typeIdMap=null,this._typeIdIndex=0}writeOptional(){return!1}writePendingValues(){}registerTypeId(e){null===this._typeIdMap&&(this._typeIdMap=new Map);const t=this._typeIdMap.get(e);return void 0!==t?t:(this._typeIdMap.set(e,++this._typeIdIndex),-1)}}class x extends w{constructor(e,t){super(e,t),this._sliceType=0,this._writeSlice=0,this._valueIdIndex=0,this._toBeMarshaledMap=new Map}writeValue(e){o.assert(void 0!==e),null!=e?this._stream.writeInt(-this.registerValue(e)):this._stream.writeInt(0)}writeException(e){o.assert(null!=e);const t=e._usesClasses();this._stream.writeBool(t),e._write(this._stream),t&&this.writePendingValues()}startInstance(e){this._sliceType=e}endInstance(){1===this._sliceType&&(this.startSlice(n.Value.ice_staticId(),-1,!0),this._stream.writeSize(0),this.endSlice()),this._sliceType=0}startSlice(e){if(1===this._sliceType){const t=this.registerTypeId(e);t<0?(this._stream.writeBool(!1),this._stream.writeString(e)):(this._stream.writeBool(!0),this._stream.writeSize(t))}else this._stream.writeString(e);this._stream.writeInt(0),this._writeSlice=this._stream.pos}endSlice(){const e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)}writePendingValues(){const e=(e,t)=>{this._stream.writeInt(e);try{t.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}t._iceWrite(this._stream)};for(;this._toBeMarshaledMap.size>0;){this._toBeMarshaledMap.forEach((e,t)=>this._marshaledMap.set(t,e));const t=this._toBeMarshaledMap;this._toBeMarshaledMap=new Map,this._stream.writeSize(t.size),t.forEach(e)}this._stream.writeSize(0)}registerValue(e){o.assert(null!==e);let t=this._toBeMarshaledMap.get(e);return void 0!==t?t:(t=this._marshaledMap.get(e),void 0!==t?t:(this._toBeMarshaledMap.set(e,++this._valueIdIndex),this._valueIdIndex))}}class I extends w{constructor(e,t){super(e,t),this._current=null,this._valueIdIndex=1}writeValue(e){if(o.assert(void 0!==e),null==e)this._stream.writeSize(0);else if(null!==this._current&&this._encaps.format===c.SlicedFormat){null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new Map);const t=this._current.indirectionMap.get(e);if(void 0===t){this._current.indirectionTable.push(e);const t=this._current.indirectionTable.length;this._current.indirectionMap.set(e,t),this._stream.writeSize(t)}else this._stream.writeSize(t)}else this.writeInstance(e)}writePendingValues(){}writeException(e){o.assert(null!=e),e._write(this._stream)}startInstance(e,t){null===this._current?this._current=new I.InstanceData(null):this._current=null===this._current.next?new I.InstanceData(this._current):this._current.next,this._current.sliceType=e,this._current.firstSlice=!0,null!=t&&this.writeSlicedData(t)}endInstance(){this._current=this._current.previous}startSlice(e,t,i){if(o.assert(!(null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length||null!==this._current.indirectionMap&&0!==this._current.indirectionMap.size)),this._current.sliceFlagsPos=this._stream.pos,this._current.sliceFlags=0,this._encaps.format===c.SlicedFormat&&(this._current.sliceFlags|=h.FLAG_HAS_SLICE_SIZE),i&&(this._current.sliceFlags|=h.FLAG_IS_LAST_SLICE),this._stream.writeByte(0),1===this._current.sliceType){if(this._encaps.format===c.SlicedFormat||this._current.firstSlice)if(t>=0)this._current.sliceFlags|=h.FLAG_HAS_TYPE_ID_COMPACT,this._stream.writeSize(t);else{const t=this.registerTypeId(e);t<0?(this._current.sliceFlags|=h.FLAG_HAS_TYPE_ID_STRING,this._stream.writeString(e)):(this._current.sliceFlags|=h.FLAG_HAS_TYPE_ID_INDEX,this._stream.writeSize(t))}}else this._stream.writeString(e);0!==(this._current.sliceFlags&h.FLAG_HAS_SLICE_SIZE)&&this._stream.writeInt(0),this._current.writeSlice=this._stream.pos,this._current.firstSlice=!1}endSlice(){if(0!==(this._current.sliceFlags&h.FLAG_HAS_OPTIONAL_MEMBERS)&&this._stream.writeByte(h.OPTIONAL_END_MARKER),0!==(this._current.sliceFlags&h.FLAG_HAS_SLICE_SIZE)){const e=this._stream.pos-this._current.writeSlice+4;this._stream.rewriteInt(e,this._current.writeSlice-4)}null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length&&(o.assert(this._encaps.format===c.SlicedFormat),this._current.sliceFlags|=h.FLAG_HAS_INDIRECTION_TABLE,this._stream.writeSize(this._current.indirectionTable.length),this._current.indirectionTable.forEach(e=>this.writeInstance(e)),this._current.indirectionTable.length=0,this._current.indirectionMap.clear()),this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)}writeOptional(e,t){return null===this._current?this._stream.writeOptImpl(e,t):!!this._stream.writeOptImpl(e,t)&&(this._current.sliceFlags|=h.FLAG_HAS_OPTIONAL_MEMBERS,!0)}writeSlicedData(e){o.assert(null!=e),this._encaps.format===c.SlicedFormat&&e.slices.forEach(e=>{this.startSlice(e.typeId,e.compactId,e.isLastSlice),this._stream.writeBlob(e.bytes),e.hasOptionalMembers&&(this._current.sliceFlags|=h.FLAG_HAS_OPTIONAL_MEMBERS),null!==e.instances&&e.instances.length>0&&(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new Map),e.instances.forEach(e=>this._current.indirectionTable.push(e))),this.endSlice()})}writeInstance(e){o.assert(null!=e);const t=this._marshaledMap.get(e);if(void 0===t){this._marshaledMap.set(e,++this._valueIdIndex);try{e.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}this._stream.writeSize(1),e._iceWrite(this._stream)}else this._stream.writeSize(t)}}I.InstanceData=class{constructor(e){o.assert(void 0!==e),null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.firstSlice=!1,this.sliceFlags=0,this.writeSlice=0,this.sliceFlagsPos=0,this.indirectionTable=null,this.indirectionMap=null}};class E{constructor(){this.start=0,this.format=c.DefaultFormat,this.encoding=null,this.encoding_1_0=!1,this.encoder=null,this.next=null}reset(){this.encoder=null}setEncoding(e){this.encoding=e,this.encoding_1_0=e.equals(n.Encoding_1_0)}}class v{constructor(e,t){if(this._instance=null,this._encoding=null,null!=e)if(e.constructor==n.Communicator)this._instance=e.instance;else if(e.constructor==n.Instance)this._instance=e;else{if(e.constructor!=n.EncodingVersion)throw new n.InitializationException("unknown argument to OutputStream constructor");this._encoding=e}if(null!=t){if(t.constructor!=n.EncodingVersion)throw new n.InitializationException("unknown argument to OutputStream constructor");this._encoding=t}this._buf=new n.Buffer,this._closure=null,this._encapsStack=null,this._encapsCache=null,null!==this._instance?(null===this._encoding&&(this._encoding=this._instance.defaultsAndOverrides().defaultEncoding),this._format=this._instance.defaultsAndOverrides().defaultFormat):(null===this._encoding&&(this._encoding=h.currentEncoding),this._format=c.CompactFormat)}reset(){this._buf.reset(),this.clear()}clear(){null!==this._encapsStack&&(o.assert(this._encapsStack.next),this._encapsStack.next=this._encapsCache,this._encapsCache=this._encapsStack,this._encapsCache.reset(),this._encapsStack=null)}finished(){return this.prepareWrite().getArray(this.size)}swap(e){o.assert(this._instance===e._instance),[e._buf,this._buf]=[this._buf,e._buf],[e._encoding,this._encoding]=[this._encoding,e._encoding],[e._closure,this._closure]=[this._closure,e._closure],this.resetEncapsulation(),e.resetEncapsulation()}resetEncapsulation(){this._encapsStack=null}resize(e){this._buf.resize(e),this._buf.position=e}prepareWrite(){return this._buf.position=0,this._buf}startValue(e){o.assert(null!==this._encapsStack&&null!==this._encapsStack.encoder),this._encapsStack.encoder.startInstance(1,e)}endValue(){o.assert(null!==this._encapsStack&&null!==this._encapsStack.encoder),this._encapsStack.encoder.endInstance()}startException(e){o.assert(null!==this._encapsStack&&null!==this._encapsStack.encoder),this._encapsStack.encoder.startInstance(2,e)}endException(){o.assert(null!==this._encapsStack&&null!==this._encapsStack.encoder),this._encapsStack.encoder.endInstance()}startEncapsulation(e,t){void 0===e&&(null!==this._encapsStack?(e=this._encapsStack.encoding,t=this._encapsStack.format):(e=this._encoding,t=c.DefaultFormat)),h.checkSupportedEncoding(e);let i=this._encapsCache;null!==i?(i.reset(),this._encapsCache=this._encapsCache.next):i=new E,i.next=this._encapsStack,this._encapsStack=i,this._encapsStack.format=t,this._encapsStack.setEncoding(e),this._encapsStack.start=this._buf.limit,this.writeInt(0),this._encapsStack.encoding._write(this)}endEncapsulation(){o.assert(this._encapsStack);const e=this._encapsStack.start,t=this._buf.limit-e;this._buf.putIntAt(e,t);const i=this._encapsStack;this._encapsStack=i.next,i.next=this._encapsCache,this._encapsCache=i,this._encapsCache.reset()}writeEmptyEncapsulation(e){h.checkSupportedEncoding(e),this.writeInt(6),e._write(this)}writeEncapsulation(e){if(e.length<6)throw new n.EncapsulationException;this.expand(e.length),this._buf.putArray(e)}getEncoding(){return null!==this._encapsStack?this._encapsStack.encoding:this._encoding}startSlice(e,t,i){o.assert(null!==this._encapsStack&&null!==this._encapsStack.encoder),this._encapsStack.encoder.startSlice(e,t,i)}endSlice(){o.assert(null!==this._encapsStack&&null!==this._encapsStack.encoder),this._encapsStack.encoder.endSlice()}writePendingValues(){null!==this._encapsStack&&null!==this._encapsStack.encoder?this._encapsStack.encoder.writePendingValues():(null!==this._encapsStack&&this._encapsStack.encoding_1_0||null===this._encapsStack&&this._encoding.equals(n.Encoding_1_0))&&this.writeSize(0)}writeSize(e){e>254?(this.expand(5),this._buf.put(255),this._buf.putInt(e)):(this.expand(1),this._buf.put(e))}startSize(){const e=this._buf.position;return this.writeInt(0),e}endSize(e){o.assert(e>=0),this.rewriteInt(this._buf.position-e-4,e)}writeBlob(e){null!=e&&(this.expand(e.length),this._buf.putArray(e))}writeOptional(e,t){return o.assert(null!==this._encapsStack),null!==this._encapsStack.encoder?this._encapsStack.encoder.writeOptional(e,t):this.writeOptImpl(e,t)}writeOptionalHelper(e,t,i,n){void 0!==n&&this.writeOptional(e,t)&&i.call(this,n)}writeByte(e){this.expand(1),this._buf.put(e)}rewriteByte(e,t){this._buf.putAt(t,e)}writeByteSeq(e){null==e||0===e.length?this.writeSize(0):(this.writeSize(e.length),this.expand(e.length),this._buf.putArray(e))}writeBool(e){this.expand(1),this._buf.put(e?1:0)}rewriteBool(e,t){this._buf.putAt(t,e?1:0)}writeShort(e){this.expand(2),this._buf.putShort(e)}writeInt(e){this.expand(4),this._buf.putInt(e)}rewriteInt(e,t){this._buf.putIntAt(t,e)}writeLong(e){this.expand(8),this._buf.putLong(e)}writeFloat(e){this.expand(4),this._buf.putFloat(e)}writeDouble(e){this.expand(8),this._buf.putDouble(e)}writeString(e){null==e||0===e.length?this.writeSize(0):this._buf.writeString(this,e)}writeProxy(e){null==e?(new n.Identity)._write(this):e._write(this)}writeOptionalProxy(e,t){if(void 0!==t&&this.writeOptional(e,l.FSize)){const e=this.startSize();this.writeProxy(t),this.endSize(e)}}writeEnum(e){this.isEncoding_1_0()?e.maxValue<127?this.writeByte(e.value):e.maxValue<32767?this.writeShort(e.value):this.writeInt(e.value):this.writeSize(e.value)}writeValue(e){this.initEncaps(),this._encapsStack.encoder.writeValue(e)}writeOptionalValue(e,t){void 0!==t&&this.writeOptional(e,l.Class)&&this.writeValue(t)}writeException(e){this.initEncaps(),this._encapsStack.encoder.writeException(e)}writeUserException(e){this.WriteException(e)}writeOptImpl(e,t){if(this.isEncoding_1_0())return!1;let i=t.value;return e<30?(i|=e<<3,this.writeByte(i)):(i|=240,this.writeByte(i),this.writeSize(e)),!0}isEmpty(){return this._buf.empty()}expand(e){this._buf.expand(e)}isEncoding_1_0(){return this._encapsStack?this._encapsStack.encoding_1_0:this._encoding.equals(n.Encoding_1_0)}initEncaps(){this._encapsStack||(this._encapsStack=this._encapsCache,this._encapsStack?this._encapsCache=this._encapsCache.next:this._encapsStack=new E,this._encapsStack.setEncoding(this._encoding)),this._encapsStack.format===c.DefaultFormat&&(this._encapsStack.format=this._instance.defaultsAndOverrides().defaultFormat),this._encapsStack.encoder||(this._encapsStack.encoding_1_0?this._encapsStack.encoder=new x(this,this._encapsStack):this._encapsStack.encoder=new I(this,this._encapsStack))}get format(){return this._format}set format(e){this._format=e}get pos(){return this._buf.position}set pos(e){this._buf.position=e}get size(){return this._buf.limit}get instance(){return this._instance}get closure(){return this._closure}set closure(e){this._closure=e}get buffer(){return this._buf}}const b=function(e,t,i,n,r,s){const o=class{static write(t,i){return e.call(t,i)}static read(e){return t.call(e)}static writeOptional(t,i,r){t.writeOptionalHelper(i,n,e,r)}static readOptional(e,i){return e.readOptionalHelper(i,n,t)}static get minWireSize(){return i}};return void 0!==r&&void 0!==s&&(o.validate=function(e){return e>=r&&e<=s}),o},C=S.prototype,P=v.prototype,M=4294967295,A=-34028234664e28,k=34028234664e28;n.ByteHelper=b(P.writeByte,C.readByte,1,n.OptionalFormat.F1,0,255),n.ShortHelper=b(P.writeShort,C.readShort,2,n.OptionalFormat.F2,-32768,32767),n.IntHelper=b(P.writeInt,C.readInt,4,n.OptionalFormat.F4,-2147483648,2147483647),n.FloatHelper=b(P.writeFloat,C.readFloat,4,n.OptionalFormat.F4,A,k),n.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=A&&e<=k},n.DoubleHelper=b(P.writeDouble,C.readDouble,8,n.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE),n.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE},n.BoolHelper=b(P.writeBool,C.readBool,1,n.OptionalFormat.F1),n.LongHelper=b(P.writeLong,C.readLong,8,n.OptionalFormat.F8),n.LongHelper.validate=function(e){return e.low>=0&&e.low<=M&&e.high>=0&&e.high<=M},n.StringHelper=b(P.writeString,C.readString,1,n.OptionalFormat.VSize),n.ObjectHelper=class{static write(e,t){e.writeValue(t)}static read(e){let t;return e.readValue(e=>{t=e},n.Value),t}static writeOptional(e,t,i){e.writeOptionalValue(t,n.OptionalFormat.Class,P.writeValue,i)}static readOptional(e,t){let i;return e.readOptionalValue(t,e=>{i=e},n.Value),i}static get minWireSize(){return 1}},n.InputStream=S,n.OutputStream=v,e.exports.Ice=n},901:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(4997),i(5752),i(9157),i(701),i(3332);const r=n.Debug,s=n.InputStream,o=n.OutputStream,a=n.EndpointParseException,c=n.OpaqueEndpointI,l=n.Protocol,h=n.StringUtil;n.EndpointFactoryManager=class{constructor(e){this._instance=e,this._factories=[]}add(e){r.assert(void 0===this._factories.find(t=>e.type()==t.type())),this._factories.push(e)}get(e){return this._factories.find(t=>e==t.type())||null}create(e,t){const i=e.trim();if(0===i.length)throw new a("value has no non-whitespace characters");const n=h.splitString(i," \t\n\r");if(0===n.length)throw new a("value has no non-whitespace characters");let r=n[0];n.splice(0,1),"default"===r&&(r=this._instance.defaultsAndOverrides().defaultProtocol);for(let i=0,s=this._factories.length;i<s;++i)if(this._factories[i].protocol()===r){const r=this._factories[i].create(n,t);if(n.length>0)throw new a("unrecognized argument `"+n[0]+"' in endpoint `"+e+"'");return r}if("opaque"===r){const t=new c;if(t.initWithOptions(n),n.length>0)throw new a("unrecognized argument `"+n[0]+"' in endpoint `"+e+"'");for(let e=0,i=this._factories.length;e<i;++e)if(this._factories[e].type()==t.type()){const i=new o(this._instance,l.currentProtocolEncoding);i.writeShort(t.type()),t.streamWrite(i);const n=new s(this._instance,l.currentProtocolEncoding,i.buffer);n.pos=0,n.readShort(),n.startEncapsulation();const r=this._factories[e].read(n);return n.endEncapsulation(),r}return t}return null}read(e){const t=e.readShort(),i=this.get(t);let n=null;return e.startEncapsulation(),i&&(n=i.read(e)),n||(n=new c(t),n.initWithStream(e)),e.endEncapsulation(),n}destroy(){this._factories.forEach(e=>e.destroy()),this._factories=[]}},e.exports.Ice=n},1030:(e,t,i)=>{const n=i(5828),r=i(9898);e.exports=new class{constructor(e){this.iceManager=null}setIceManager(e){this.iceManager=e}async loadChatMessages(e,t){let i;if(t)i=await this.iceManager.getGroupChatMessages(e);else{const t=e,r=n.getCurrentUserId();i=await this.iceManager.getDirectChatMessages(r,t)}i.sort((e,t)=>("object"==typeof e.timestamp?e.timestamp.toNumber():e.timestamp)-("object"==typeof t.timestamp?t.timestamp.toNumber():t.timestamp)),n.setActiveMessages(i)}async refreshChats(){if(!this.iceManager)throw new Error("IceManager no asignado");const e=n.getCurrentUserId(),[t,i]=await Promise.all([this.iceManager.getUserDirectChats(e),this.iceManager.getUserGroupChats(e)]),r=[...t,...i];return n.setChats(r),console.log(`[MessageReceiver] Chats actualizados: ${r.length} total`),r}async loadAllUsers(){try{const e=(await this.iceManager.getAllUsers()).map(e=>({id:e.id,name:e.name}));return n.setAllUsers(e),console.log(`[MessageReceiver] Usuarios cargados: ${e.length}`),e}catch(e){}}async refreshActiveChat(){const e=n.getActiveChat();if(!e)return console.log("No hay chat activo para actualizar"),null;try{return await this.loadChatMessages(e.id,e.isGroup),n.getActiveMessages()}catch(e){throw console.error("Error al actualizar el chat activo:",e),e}}handleIncomingMessage(e){n.addMessage(e),r.renderMessages(),r.renderChatList()}}},1098:(e,t,i)=>{const n=i(8846).Ice;i(3793),i(4262),i(5896),i(4375),i(1216);let r={};if("undefined"!=typeof process){const a=i(5372),c=n.Debug,l=n.SocketOperation,h=n.Timer,u=0,d=1,p=2,_=3,g=4;let m=null;function s(e,t){return null===e?"<closed>":function(e,t,i,n,r){i=void 0===i?null:i,r=void 0===r?null:r;const s=[];return s.push("local address = "),s.push(e+":"+t),null===i&&null!==r&&(i=r.host,n=r.port),null===i?s.push("\nremote address = <not connected>"):(s.push("\nremote address = "),s.push(i+":"+n)),s.join("")}(e.localAddress,e.localPort,e.remoteAddress,e.remotePort,t)}function o(e,t){if(!t)return new n.ConnectionLostException;if(e<g){if(function(e){return e==y}(t.code))return new n.ConnectionRefusedException(t.code,t);if(function(e){return e==y||e==b||e==x||e==w||e==S||e==v||e==f}(t.code))return new n.ConnectFailedException(t.code,t)}else if(function(e){return e==S||e==I||e==v||e==f||e==E}(t.code))return new n.ConnectionLostException(t.code,t);return new n.SocketException(t.code,t)}m=Buffer.from?Buffer.from:e=>new Buffer(e),r=class{constructor(e){this._logger=e.logger(),this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288)}setCallbacks(e,t,i){this._connectedCallback=e,this._bytesAvailableCallback=t,this._bytesWrittenCallback=i}initialize(e,t){try{if(this._exception)throw this._exception;if(this._state===u)return this._state=d,this._fd=a.createConnection({port:this._addr.port,host:this._addr.host,localAddress:this._sourceAddr}),this._fd.on("connect",()=>this.socketConnected()),this._fd.on("data",e=>this.socketBytesAvailable(e)),this._fd.on("close",e=>h.setImmediate(()=>this.socketClosed(e))),this._fd.on("error",e=>h.setImmediate(()=>this.socketError(e))),l.Connect;if(this._state===d)this._desc=s(this._fd,this._proxy,this._addr),this._state=g;else{if(this._state===p)return this._proxy.endWriteConnectRequest(t),this._state=_,l.Read;this._state===_&&(this._proxy.endReadConnectRequestResponse(e),this._state=g)}}catch(e){throw this._exception||(this._exception=o(this._state,e)),this._exception}return c.assert(this._state===g),l.None}register(){this._registered=!0,this._fd.resume(),this._exception&&this._bytesAvailableCallback()}unregister(){null!==this._fd?(this._registered=!1,this._fd.pause()):c.assert(this._exception)}close(){if(null!==this._fd)try{this._fd.destroy()}catch(e){throw o(this._state,e)}finally{this._fd=null}else c.assert(this._exception)}write(e){if(this._exception)throw this._exception;let t=e.remaining;for(c.assert(t>0),this._maxSendPacketSize>0&&t>this._maxSendPacketSize&&(t=this._maxSendPacketSize);t>0;){const i=e.b.slice(e.position,e.position+t);let n=!0;if(n=this._fd.write(m(i),null,()=>{n||this._bytesWrittenCallback()}),e.position+=t,!n)return!1;t=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining}return!0}read(e,t){if(this._exception)throw this._exception;if(t.value=!1,0===this._readBuffers.length)return!1;let i=this._readBuffers[0].length-this._readPosition;for(c.assert(i>0);e.remaining>0;)if(i>e.remaining&&(i=e.remaining),this._readBuffers[0].copy(m(e.b),e.position,this._readPosition,this._readPosition+i),e.position+=i,this._readPosition+=i,this._readPosition===this._readBuffers[0].length){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;i=this._readBuffers[0].length}return t.value=this._readBuffers.length>0,0===e.remaining}type(){return"tcp"}getInfo(){c.assert(null!==this._fd);const e=new n.TCPConnectionInfo;return e.localAddress=this._fd.localAddress,e.localPort=this._fd.localPort,e.remoteAddress=this._fd.remoteAddress,e.remotePort=this._fd.remotePort,e.rcvSize=-1,e.sndSize=this._maxSendPacketSize,e}checkSendSize(e){}setBufferSize(e,t){this._maxSendPacketSize=t}toString(){return this._desc}socketConnected(){c.assert(null!==this._connectedCallback),this._connectedCallback()}socketBytesAvailable(e){c.assert(null!==this._bytesAvailableCallback),e.length>0&&(this._readBuffers.push(e),this._bytesAvailableCallback())}socketClosed(e){e||this.socketError(null)}socketError(e){this._exception=o(this._state,e),this._state<g?this._connectedCallback():this._registered&&this._bytesAvailableCallback()}static createOutgoing(e,t,i){const n=new r(e);return n._fd=null,n._addr=t,n._sourceAddr=i,n._desc="local address = <not connected>\nremote address = "+t.host+":"+t.port,n._state=u,n._registered=!1,n._exception=null,n}static createIncoming(e,t){const i=new r(e);return i._fd=t,i._addr=null,i._sourceAddr=null,i._desc=s(t),i._state=g,i._registered=!1,i._exception=null,i}};const f="ECONNABORTED",y="ECONNREFUSED",S="ECONNRESET",w="EHOSTUNREACH",x="ENETUNREACH",I="ENOTCONN",E="EPIPE",v="ESHUTDOWN",b="ETIMEDOUT"}else r=class{};n.TcpTransceiver=r,e.exports.Ice=n},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1193:(e,t,i)=>{const n=i(8846).Ice;class r{constructor(e,t){this._name=e,this._value=t}equals(e){return this===e||e instanceof Object.getPrototypeOf(this).constructor&&this._value==e._value}hashCode(){return this._value}toString(){return this._name}get name(){return this._name}get value(){return this._value}}n.EnumBase=r;class s{constructor(e){this._enumType=e}write(e,t){this._enumType._write(e,t)}writeOptional(e,t,i){this._enumType._writeOpt(e,t,i)}read(e){return this._enumType._read(e)}readOptional(e,t){return this._enumType._readOpt(e,t)}}n.EnumHelper=s,n.Slice.defineEnum=function(e){const t=class extends r{},i=[];let o=0,a=null;for(const n in e){const r=e[n][0],s=e[n][1],c=new t(r,s);i[s]=c,a||(a=c),Object.defineProperty(t,r,{enumerable:!0,value:c}),s>o&&(o=s)}return Object.defineProperty(t,"minWireSize",{get:()=>1}),t._write=function(e,t){t?e.writeEnum(t):e.writeEnum(a)},t._read=function(e){return e.readEnum(t)},t._writeOpt=function(e,i,r){void 0!==r&&e.writeOptional(i,n.OptionalFormat.Size)&&t._write(e,r)},t._readOpt=function(e,i){return e.readOptionalEnum(i,t)},t._helper=new s(t),Object.defineProperty(t,"valueOf",{value:function(e){return void 0===e?t:i[e]}}),Object.defineProperty(t,"maxValue",{value:o}),Object.defineProperty(t.prototype,"maxValue",{value:o}),t},e.exports.Ice=n},1216:(e,t,i)=>{const n=i(8846).Ice;i(4997),i(3652);const r=n.CommunicatorDestroyedException;class s{constructor(e){this._logger=e,this._destroyed=!1,this._tokenId=0,this._tokens=new Map}destroy(){this._tokens.forEach((e,t)=>this.cancel(t)),this._destroyed=!0,this._tokens.clear()}schedule(e,t){if(this._destroyed)throw new r;const i=this._tokenId++,n=s.setTimeout(()=>this.handleTimeout(i),t);return this._tokens.set(i,{callback:e,id:n,isInterval:!1}),i}scheduleRepeated(e,t){if(this._destroyed)throw new r;const i=this._tokenId++,n=s.setInterval(()=>this.handleInterval(i),t);return this._tokens.set(i,{callback:e,id:n,isInterval:!0}),i}cancel(e){if(this._destroyed)return!1;const t=this._tokens.get(e);return void 0!==t&&(this._tokens.delete(e),t.isInterval?s.clearInterval(t.id):s.clearTimeout(t.id),!0)}handleTimeout(e){if(this._destroyed)return;const t=this._tokens.get(e);if(void 0!==t){this._tokens.delete(e);try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}handleInterval(e){if(this._destroyed)return;const t=this._tokens.get(e);if(void 0!==t)try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}s.setTimeout=n.Timer.setTimeout,s.clearTimeout=n.Timer.clearTimeout,s.setInterval=n.Timer.setInterval,s.clearInterval=n.Timer.clearInterval,s.setImmediate=n.Timer.setImmediate,n.Timer=s,e.exports.Ice=n},1226:(e,t,i)=>{i(7548),i(7149),i(3643),i(3418),i(5770),i(543),i(2459),i(5896),i(3239),i(5527),i(1779),i(8655),i(4997),i(359),i(9113),i(1454),i(9483),i(1967),i(8846),i(8930),i(1930),i(4652),i(532),i(7168),i(7812),i(8437),i(9157),i(2368),i(8372),i(8146),i(9072),i(1488),i(2713),e.exports.Ice=i(8846).Ice,i(3076).V,i(7416).IceSSL},1373:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice,t.Ice=r},1386:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice.defineDictionary(r,"FacetMap","FacetMapHelper","Ice.StringHelper","Ice.ObjectHelper",!1,void 0,"Ice.Value"),t.Ice=r},1391:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice,t.Ice=r},1402:(e,t,i)=>{const n=i(5828),r=i(5411),s=new class{constructor(e){this.iceManager=null}setIceManager(e){this.iceManager=e}async sendMessage(e){const t=n.getActiveChat();if(!t)throw new Error("No hay un chat activo");if(!e||""===e.trim())throw new Error("El mensaje no puede estar vacÃ­o");const i=n.getCurrentUserId();try{return t.isGroup?await iceManager.sendGroupMessage(i,t.id,e.trim()):await iceManager.sendDirectMessage(i,t.id,e.trim()),console.log(`Mensaje enviado exitosamente a ${t.name}`),!0}catch(e){throw console.error("Error al enviar mensaje:",e),e}}async sendDirectMessage(e,t){if(!t||""===t.trim())throw new Error("El mensaje no puede estar vacÃ­o");const i=n.getCurrentUserId();try{return await iceManager.sendDirectMessage(i,e,t.trim()),console.log(`Mensaje directo enviado a ${e}`),!0}catch(e){throw console.error("Error al enviar mensaje directo:",e),e}}async sendGroupMessage(e,t){if(!t||""===t.trim())throw new Error("El mensaje no puede estar vacÃ­o");const i=n.getCurrentUserId();try{return await iceManager.sendGroupMessage(i,e,t.trim()),console.log(`Mensaje enviado al grupo ${e}`),!0}catch(e){throw console.error("Error al enviar mensaje al grupo:",e),e}}async sendAudio(e){const t=n.getActiveChat();if(!t)throw new Error("No hay un chat activo");const i=n.getCurrentUserId();try{const n=await r.blobToBase64(e),s=await r.getAudioDuration(e);return t.isGroup?await iceManager.sendGroupAudio(i,t.id,n,s):await iceManager.sendDirectAudio(i,t.id,n,s),console.log(`Nota de voz enviada exitosamente (${s}s)`),!0}catch(e){throw console.error("Error al enviar nota de voz:",e),e}}};e.exports=s},1454:(e,t,i)=>{const n=i(8846).Ice;class r{constructor(e){void 0!==e&&e.length>0?this._prefix=e+": ":this._prefix="",this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}}print(e){this.write(e,!1)}trace(e,t){const i=[];i.push("-- "),i.push(this.timestamp()),i.push(" "),i.push(this._prefix),i.push(e),i.push(": "),i.push(t),this.write(i.join(""),!0)}warning(e){const t=[];t.push("-! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("warning: "),t.push(e),this.write(t.join(""),!0)}error(e){const t=[];t.push("!! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("error: "),t.push(e),this.write(t.join(""),!0)}cloneWithPrefix(e){return new r(e)}write(e,t){t&&(e=e.replace(/\n/g,"\n   ")),console.log(e)}timestamp(){const e=new Date;return e.toLocaleString("en-US",this._dateformat)+"."+e.getMilliseconds()}}n.Logger=r,e.exports.Ice=n},1488:(e,t,i)=>{const n=i(8846).Ice;i(5896),i(2698),i(8372),i(5874),n.Value=class{ice_preMarshal(){}ice_postUnmarshal(){}ice_getSlicedData(){return null}_iceWrite(e){e.startValue(null),r(this,e,this._iceMostDerivedType()),e.endValue()}_iceRead(e){e.startValue(),s(this,e,this._iceMostDerivedType()),e.endValue(!1)}static write(e,t){e.writeValue(t)}static writeOptional(e,t,i){e.writeOptionalValue(t,i)}static read(e){const t={value:null};return e.readValue(e=>{t.value=e},this),t}static readOptional(e,t){const i={value:void 0};return e.readOptionalValue(t,e=>{i.value=e},this),i}},n.InterfaceByValue=class extends n.Value{constructor(e){super(),this._id=e}ice_id(){return this._id}_iceWrite(e){e.startValue(null),e.startSlice(this.ice_id(),-1,!0),e.endSlice(),e.endValue()}_iceRead(e){e.startValue(),e.startSlice(),e.endSlice(),e.endValue(!1)}};const r=function(e,t,i){void 0!==i&&i!==n.Value&&(t.startSlice(i.ice_staticId(),Object.prototype.hasOwnProperty.call(i,"_iceCompactId")?i._iceCompactId:-1,Object.getPrototypeOf(i)===n.Value),i.prototype.hasOwnProperty("_iceWriteMemberImpl")&&i.prototype._iceWriteMemberImpl.call(e,t),t.endSlice(),r(e,t,Object.getPrototypeOf(i)))},s=function(e,t,i){void 0!==i&&i!==n.Value&&(t.startSlice(),i.prototype.hasOwnProperty("_iceReadMemberImpl")&&i.prototype._iceReadMemberImpl.call(e,t),t.endSlice(),s(e,t,Object.getPrototypeOf(i)))};function o(e){e.startValue(this._iceSlicedData),r(this,e,this._iceMostDerivedType()),e.endValue()}function a(e){e.startValue(),s(this,e,this._iceMostDerivedType()),this._iceSlicedData=e.endValue(!0)}function c(){return this._iceSlicedData}const l=n.Slice;l.defineValue=function(e,t,i,r=0){e.prototype.ice_id=function(){return t},e.prototype._iceMostDerivedType=function(){return e},e.ice_staticId=function(){return t},i&&(e.prototype.ice_getSlicedData=c,e.prototype._iceWrite=o,e.prototype._iceRead=a),r>0&&n.CompactIdRegistry.set(r,t)},l.defineValue(n.Value,"::Ice::Object"),e.exports.Ice=n},1517:(e,t,i)=>{const n=i(8846).Ice;i(3210),i(8789),i(4726),i(4262),i(2459),i(5896),i(3239),i(4997),i(7168);const r=n.AsyncResultBase,s=n.ConnectionI,o=n.Debug,a=n.FactoryACMMonitor,c=n.HashMap;n.OutgoingConnectionFactory=class{constructor(e,t){this._communicator=e,this._instance=t,this._destroyed=!1,this._monitor=new a(this._instance,this._instance.clientACM()),this._connectionsByEndpoint=new l,this._pending=new c(c.compareEquals),this._pendingConnectCount=0,this._waitPromise=null}destroy(){this._destroyed||(this._connectionsByEndpoint.forEach(e=>e.destroy(s.CommunicatorDestroyed)),this._destroyed=!0,this._communicator=null,this.checkFinished())}waitUntilFinished(){return this._waitPromise=new n.Promise,this.checkFinished(),this._waitPromise}create(e,t,i){o.assert(e.length>0);const r=this.applyOverrides(e);try{const e=this.findConnectionByEndpoint(r);if(null!==e)return n.Promise.resolve(e)}catch(e){return n.Promise.reject(e)}return new h(this,r,t,i).start()}setRouterInfo(e){return n.Promise.try(()=>{if(this._destroyed)throw new n.CommunicatorDestroyedException;return e.getClientEndpoints()}).then(t=>{const i=e.getAdapter(),n=this._instance.defaultsAndOverrides();t.forEach(e=>{n.overrideTimeout&&(e=e.changeTimeout(n.overrideTimeoutValue)),e=e.changeCompress(!1),this._connectionsByEndpoint.forEach(t=>{t.endpoint().equals(e)&&t.setAdapter(i)})})})}removeAdapter(e){this._destroyed||this._connectionsByEndpoint.forEach(t=>{t.getAdapter()===e&&t.setAdapter(null)})}flushAsyncBatchRequests(){const e=new r(this._communicator,"flushBatchRequests",null,null,null);return this._destroyed?(e.resolve(),e):(n.Promise.all(this._connectionsByEndpoint.map(e=>{if(e.isActiveOrHolding())return e.flushBatchRequests().catch(e=>{if(!(e instanceof n.LocalException))throw e})})).then(e.resolve,e.reject),e)}applyOverrides(e){const t=this._instance.defaultsAndOverrides();return e.map(e=>t.overrideTimeout?e.changeTimeout(t.overrideTimeoutValue):e)}findConnectionByEndpoint(e){if(this._destroyed)throw new n.CommunicatorDestroyedException;o.assert(e.length>0);for(let t=0;t<e.length;++t){const i=e[t];if(this._pending.has(i))continue;const n=this._connectionsByEndpoint.get(i);if(void 0!==n)for(let e=0;e<n.length;++e)if(n[e].isActiveOrHolding())return n[e]}return null}incPendingConnectCount(){if(this._destroyed)throw new n.CommunicatorDestroyedException;++this._pendingConnectCount}decPendingConnectCount(){--this._pendingConnectCount,o.assert(this._pendingConnectCount>=0),this._destroyed&&0===this._pendingConnectCount&&this.checkFinished()}getConnection(e,t){if(this._destroyed)throw new n.CommunicatorDestroyedException;const i=this._monitor.swapReapedConnections();for(null!==i&&i.forEach(e=>{this._connectionsByEndpoint.removeConnection(e.endpoint(),e),this._connectionsByEndpoint.removeConnection(e.endpoint().changeCompress(!0),e)});;){if(this._destroyed)throw new n.CommunicatorDestroyedException;const i=this.findConnectionByEndpoint(e);if(null!==i)return i;if(this.addToPending(t,e))return null;break}return t.nextEndpoint(),null}createConnection(e,t){o.assert(this._pending.has(t)&&null!==e);let i=null;try{if(this._destroyed)throw new n.CommunicatorDestroyedException;i=new s(this._communicator,this._instance,this._monitor,e,t.changeCompress(!1),!1,null)}catch(t){if(t instanceof n.LocalException)try{e.close()}catch(e){}throw t}return this._connectionsByEndpoint.set(i.endpoint(),i),this._connectionsByEndpoint.set(i.endpoint().changeCompress(!0),i),i}finishGetConnection(e,t,i,n){const r=[];null!==n&&r.push(n);const s=[];e.forEach(e=>{const i=this._pending.get(e);void 0!==i&&(this._pending.delete(e),i.forEach(e=>{e.hasEndpoint(t)?-1===r.indexOf(e)&&r.push(e):-1===s.indexOf(e)&&s.push(e)}))}),r.forEach(e=>{e.removeFromPending();const t=s.indexOf(e);-1!==t&&s.splice(t,1)}),s.forEach(e=>e.removeFromPending()),s.forEach(e=>e.getConnection()),r.forEach(e=>e.setConnection(i)),this.checkFinished()}finishGetConnectionEx(e,t,i){const n=[];null!==i&&n.push(i);const r=[];e.forEach(t=>{const i=this._pending.get(t);void 0!==i&&(this._pending.delete(t),i.forEach(t=>{t.removeEndpoints(e)?-1===n.indexOf(t)&&n.push(t):-1===r.indexOf(t)&&r.push(t)}))}),r.forEach(e=>{o.assert(-1===n.indexOf(e)),e.removeFromPending()}),this.checkFinished(),r.forEach(e=>e.getConnection()),n.forEach(e=>e.setException(t))}addToPending(e,t){let i=!1;return null!==e&&t.forEach(t=>{const n=this._pending.get(t);void 0!==n&&(i=!0,-1===n.indexOf(e)&&n.push(e))}),!!i||(t.forEach(e=>{this._pending.has(e)||this._pending.set(e,[])}),!1)}removeFromPending(e,t){t.forEach(t=>{const i=this._pending.get(t);if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}})}handleConnectionException(e,t){const i=this._instance.traceLevels();if(i.network>=2){const r=[];r.push("connection to endpoint failed"),e instanceof n.CommunicatorDestroyedException?r.push("\n"):t?r.push(", trying next endpoint\n"):r.push(" and no more endpoints to try\n"),r.push(e.toString()),this._instance.initializationData().logger.trace(i.networkCat,r.join(""))}}handleException(e,t){const i=this._instance.traceLevels();if(i.network>=2){const r=[];r.push("couldn't resolve endpoint host"),e instanceof n.CommunicatorDestroyedException?r.push("\n"):t?r.push(", trying next endpoint\n"):r.push(" and no more endpoints to try\n"),r.push(e.toString()),this._instance.initializationData().logger.trace(i.networkCat,r.join(""))}}checkFinished(){!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0||n.Promise.all(this._connectionsByEndpoint.map(e=>e.waitUntilFinished().catch(e=>o.assert(!1)))).then(()=>{const e=this._monitor.swapReapedConnections();if(null!==e){const t=[];this._connectionsByEndpoint.forEach(e=>{-1===t.indexOf(e)&&t.push(e)}),o.assert(e.length===t.length),this._connectionsByEndpoint.clear()}else o.assert(0===this._connectionsByEndpoint.size);o.assert(null!==this._waitPromise),this._waitPromise.resolve(),this._monitor.destroy()})}},e.exports.Ice=n;class l extends c{constructor(e){super(e||c.compareEquals)}set(e,t){let i=this.get(e);void 0===i&&(i=[],super.set(e,i)),o.assert(t instanceof s),i.push(t)}removeConnection(e,t){const i=this.get(e);o.assert(null!==i);const n=i.indexOf(t);o.assert(-1!==n),i.splice(n,1),0===i.length&&this.delete(e)}map(e){const t=[];return this.forEach(i=>t.push(e(i))),t}forEach(e){for(const t of this.values())t.forEach(e)}}class h{constructor(e,t,i,r){this._factory=e,this._endpoints=t,this._hasMore=i,this._selType=r,this._promise=new n.Promise,this._index=0,this._current=null}connectionStartCompleted(e){e.activate(),this._factory.finishGetConnection(this._endpoints,this._current,e,this)}connectionStartFailed(e,t){o.assert(null!==this._current),this.connectionStartFailedImpl(t)&&this.nextEndpoint()}setConnection(e){this._promise.resolve(e),this._factory.decPendingConnectCount()}setException(e){this._promise.reject(e),this._factory.decPendingConnectCount()}hasEndpoint(e){return-1!==this.findEndpoint(e)}findEndpoint(e){return this._endpoints.findIndex(t=>e.equals(t))}removeEndpoints(e){return e.forEach(e=>{const t=this.findEndpoint(e);-1!==t&&this._endpoints.splice(t,1)}),this._index=0,0===this._endpoints.length}removeFromPending(){this._factory.removeFromPending(this,this._endpoints)}start(){try{this._factory.incPendingConnectCount()}catch(e){return void this._promise.reject(e)}return this.getConnection(),this._promise}getConnection(){try{const e=this._factory.getConnection(this._endpoints,this);if(null===e)return;this._promise.resolve(e),this._factory.decPendingConnectCount()}catch(e){this._promise.reject(e),this._factory.decPendingConnectCount()}}nextEndpoint(){const e=e=>{e.start().then(()=>{this.connectionStartCompleted(e)},t=>{this.connectionStartFailed(e,t)})};for(;;){const t=this._factory._instance.traceLevels();try{if(o.assert(this._index<this._endpoints.length),this._current=this._endpoints[this._index++],t.network>=2){const e=[];e.push("trying to establish "),e.push(this._current.protocol()),e.push(" connection to "),e.push(this._current.toConnectorString()),this._factory._instance.initializationData().logger.trace(t.networkCat,e.join(""))}e(this._factory.createConnection(this._current.connect(),this._current))}catch(e){if(t.network>=2){const i=[];i.push("failed to establish "),i.push(this._current.protocol()),i.push(" connection to "),i.push(this._current.toString()),i.push("\n"),i.push(e.toString()),this._factory._instance.initializationData().logger.trace(t.networkCat,i.join(""))}if(this.connectionStartFailedImpl(e))continue}break}}connectionStartFailedImpl(e){if(e instanceof n.LocalException)if(this._factory.handleConnectionException(e,this._hasMore||this._index<this._endpoints.length),e instanceof n.CommunicatorDestroyedException)this._factory.finishGetConnectionEx(this._endpoints,e,this);else{if(this._index<this._endpoints.length)return!0;this._factory.finishGetConnectionEx(this._endpoints,e,this)}else this._factory.finishGetConnectionEx(this._endpoints,e,this);return!1}}},1601:e=>{"use strict";e.exports=function(e){return e[1]}},1618:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice,t.Ice=r},1779:(e,t,i)=>{const n=i(8846).Ice;i(5527),i(4997),i(3332);const r=n.Identity,s=n.IdentityParseException,o=n.StringUtil;n.stringToIdentity=function(e){const t=new r;let i=-1,n=0;for(;-1!==(n=e.indexOf("/",n));){let t=0;for(;n-t>0&&"\\"==e.charAt(n-t-1);)t++;if(t%2==0){if(-1!=i)throw new s(`unescaped backslash in identity \`${e}'`);i=n}n++}if(-1==i){t.category="";try{t.name=o.unescapeString(e,0,e.length,"/")}catch(t){throw new s(`invalid identity name \`${e}': ${t.toString()}`)}}else{try{t.category=o.unescapeString(e,0,i,"/")}catch(t){throw new s(`invalid category in identity \`${e}': ${t.toString()}`)}if(i+1<e.length)try{t.name=o.unescapeString(e,i+1,e.length,"/")}catch(t){throw new s(`invalid name in identity \`${e}': ${t.toString()}`)}else t.name=""}return t},n.identityToString=function(e,t=n.ToStringMode.Unicode){return null===e.category||0===e.category.length?o.escapeString(e.name,"/",t):o.escapeString(e.category,"/",t)+"/"+o.escapeString(e.name,"/",t)},n.proxyIdentityCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;{const i=e.ice_getIdentity(),n=t.ice_getIdentity(),r=i.name.localeCompare(n.name);return 0!==r?r:i.category.localeCompare(n.category)}},n.proxyIdentityAndFacetCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;{const i=e.ice_getIdentity(),n=t.ice_getIdentity();let r=i.name.localeCompare(n.name);if(0!==r)return r;if(r=i.category.localeCompare(n.category),0!==r)return r;const s=e.ice_getFacet(),o=t.ice_getFacet();return null===s&&null===o?0:null===s?-1:null===o?1:s.localeCompare(o)}},e.exports.Ice=n},1781:(e,t,i)=>{const n=i(3332).Ice,r=n.StringUtil;n.HashUtil=class{static addBoolean(e,t){return(e<<5)+e^(t?0:1)}static addString(e,t){return null!=t&&(e=(e<<5)+e^r.hashCode(t)),e}static addNumber(e,t){return(e<<5)+e^t}static addHashable(e,t){return null!=t&&(e=(e<<5)+e^t.hashCode()),e}static addArray(e,t,i){if(null!=t)for(let n=0;n<t.length;++n)e=i(e,t[n]);return e}},e.exports.Ice=n},1824:(e,t,i)=>{const n=i(8846).Ice;i(7548),i(8789),i(4262),i(5527),i(4997),i(7168),i(3542),i(2368),i(2573),i(3332),i(1216),i(9294);const r=n.ArrayUtil,s=n.AsyncResultBase,o=n.Debug,a=n.Identity,c=n.PropertyNames,l=n.ServantManager,h=n.StringUtil,u=n.Timer,d=["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"];n.ObjectAdapterI=class{constructor(e,t,i,r,s,a,c){if(this._instance=e,this._communicator=t,this._objectAdapterFactory=i,this._servantManager=new l(e,r),this._name=r,this._publishedEndpoints=[],this._routerInfo=null,this._state=0,this._noConfig=a,this._statePromises=[],this._noConfig)return this._reference=this._instance.referenceFactory().createFromString("dummy -t",""),this._messageSizeMax=this._instance.messageSizeMax(),void c.resolve(this);const h=this._instance.initializationData().properties,u=[],d=this.filterProperties(u);if(0!==u.length&&h.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){const e=["found unknown properties for object adapter `"+r+"':"];u.forEach(t=>e.push("\n    "+t)),this._instance.initializationData().logger.warning(e.join(""))}if(null===s&&d)throw new n.InitializationException(`object adapter \`${this._name}' requires configuration`);const p=h.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+p,"")}catch(e){throw e instanceof n.ProxyParseException?new n.InitializationException(`invalid proxy options \`${p}' for object adapter \`${r}'`):e}{const e=this._instance.messageSizeMax()/1024,t=h.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",e);this._messageSizeMax=t<1||t>2147483647/1024?2147483647:1024*t}try{let e;if(null===s&&(s=n.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))),null!==s){if(this._routerInfo=this._instance.routerManager().find(s),o.assert(null!==this._routerInfo),null!==this._routerInfo.getAdapter())throw new n.AlreadyRegisteredException("object adapter with router",n.identityToString(s.ice_getIdentity(),this._instance.toStringMode()));this._routerInfo.setAdapter(this),e=this._instance.outgoingConnectionFactory().setRouterInfo(this._routerInfo)}else{if(h.getProperty(this._name+".Endpoints").length>0)throw new n.FeatureNotSupportedException("object adapter endpoints not supported");e=n.Promise.resolve()}e.then(()=>this.computePublishedEndpoints()).then(e=>{this._publishedEndpoints=e,c.resolve(this)},e=>{this.destroy(),c.reject(e)})}catch(e){throw this.destroy(),e}}getName(){return this._noConfig?"":this._name}getCommunicator(){return this._communicator}activate(){const e=new s(this._communicator,"activate",null,null,this);return this.setState(3),e.resolve(),e}hold(){this.checkForDeactivation(),this.setState(1)}waitForHold(){const e=new s(this._communicator,"waitForHold",null,null,this);try{this.checkForDeactivation(),this.waitState(1,e)}catch(t){e.reject(t)}return e}deactivate(){const e=new s(this._communicator,"deactivate",null,null,this);return this._state<5&&(this.setState(5),this._instance.outgoingConnectionFactory().removeAdapter(this)),e.resolve(),e}waitForDeactivate(){const e=new s(this._communicator,"waitForDeactivate",null,null,this);return this.waitState(5,e),e}isDeactivated(){return this._state>=5}destroy(){return this.deactivate().then(()=>{this._state<6&&(this.setState(6),this._servantManager.destroy(),this._objectAdapterFactory.removeObjectAdapter(this),this._publishedEndpoints=[]);const e=new s(this._communicator,"destroy",null,null,this);return e.resolve(),e})}add(e,t){return this.addFacet(e,t,"")}addFacet(e,t,i){this.checkForDeactivation(),this.checkIdentity(t),this.checkServant(e);const n=t.clone();return this._servantManager.addServant(e,n,i),this.newProxy(n,i)}addWithUUID(e){return this.addFacetWithUUID(e,"")}addFacetWithUUID(e,t){return this.addFacet(e,new a(n.generateUUID(),""),t)}addDefaultServant(e,t){this.checkServant(e),this.checkForDeactivation(),this._servantManager.addDefaultServant(e,t)}remove(e){return this.removeFacet(e,"")}removeFacet(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeServant(e,t)}removeAllFacets(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeAllFacets(e)}removeDefaultServant(e){return this.checkForDeactivation(),this._servantManager.removeDefaultServant(e)}find(e){return this.findFacet(e,"")}findFacet(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findServant(e,t)}findAllFacets(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findAllFacets(e)}findByProxy(e){this.checkForDeactivation();const t=e._getReference();return this.findFacet(t.getIdentity(),t.getFacet())}findDefaultServant(e){return this.checkForDeactivation(),this._servantManager.findDefaultServant(e)}addServantLocator(e,t){this.checkForDeactivation(),this._servantManager.addServantLocator(e,t)}removeServantLocator(e){return this.checkForDeactivation(),this._servantManager.removeServantLocator(e)}findServantLocator(e){return this.checkForDeactivation(),this._servantManager.findServantLocator(e)}createProxy(e){return this.checkForDeactivation(),this.checkIdentity(e),this.newProxy(e,"")}createDirectProxy(e){return this.createProxy(e)}createIndirectProxy(e){throw new n.FeatureNotSupportedException("createIndirectProxy not supported")}setLocator(e){throw new n.FeatureNotSupportedException("setLocator not supported")}getEndpoints(){return[]}refreshPublishedEndpoints(){return this.checkForDeactivation(),this.computePublishedEndpoints().then(e=>{this._publishedEndpoints=e})}getPublishedEndpoints(){return r.clone(this._publishedEndpoints)}setPublishedEndpoints(e){if(this.checkForDeactivation(),null!==this._routerInfo)throw new Error("can't set published endpoints on object adapter associated with a router");this._publishedEndpoints=r.clone(e)}getServantManager(){return this._servantManager}setAdapterOnConnection(e){this.checkForDeactivation(),e.setAdapterAndServantManager(this,this._servantManager)}messageSizeMax(){return this._messageSizeMax}newProxy(e,t){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().create(e,t,this._reference,this._publishedEndpoints))}checkForDeactivation(){if(this._state>=5){const e=new n.ObjectAdapterDeactivatedException;throw e.name=this.getName(),e}}checkIdentity(e){if(void 0===e.name||null===e.name||0===e.name.length)throw new n.IllegalIdentityException(e);void 0!==e.category&&null!==e.category||(e.category="")}checkServant(e){if(null==e)throw new n.IllegalServantException("cannot add null servant to Object Adapter")}computePublishedEndpoints(){let e;if(null!==this._routerInfo)e=this._routerInfo.getServerEndpoints().then(e=>{const t=[];return e.forEach(e=>{-1===t.findIndex(t=>e.equals(t))&&t.push(e)}),t});else{const t=[],i=this._instance.initializationData().properties.getProperty(this._name+".PublishedEndpoints"),r=" \t\n\r";let s,o=0;for(;o<i.length;){if(s=h.findFirstNotOf(i,r,o),-1===s){if(""!=i)throw new n.EndpointParseException("invalid empty object adapter endpoint");break}for(o=s;;){if(o=i.indexOf(":",o),-1==o){o=i.length;break}{let e=!1,t=s;for(;t=i.indexOf('"',t),!(-1==t||o<t||(t=i.indexOf('"',++t),-1==t));){if(o<t){e=!0;break}++t}if(!e)break;++o}}const e=i.substring(s,o),a=this._instance.endpointFactoryManager().create(e,!1);if(null===a)throw new n.EndpointParseException("invalid object adapter endpoint `"+i+"'");t.push(a)}e=n.Promise.resolve(t)}return e.then(e=>{if(this._instance.traceLevels().network>=1&&e.length>0){const t=[];t.push("published endpoints for object adapter `"),t.push(this._name),t.push("':\n");let i=!0;e.forEach(e=>{i||t.push(":"),t.push(e.toString()),i=!1}),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,t.toString())}return e})}filterProperties(e){let t=!0;const i=this._name+".";for(let e=0;e<c.clPropNames.length;++e)if(0===i.indexOf(c.clPropNames[e]+".")){t=!1;break}let n=!0;const r=this._instance.initializationData().properties.getPropertiesForPrefix(i);for(const s of r.keys()){let r=!1;for(let e=0;e<d.length;++e)if(s===i+d[e]){n=!1,r=!0;break}!r&&t&&e.push(s)}return n}setState(e){if(this._state===e)return;this._state=e;let t=[];(e<5?[e]:[1,5]).forEach(e=>{this._statePromises[e]&&(t=t.concat(this._statePromises[e]),delete this._statePromises[e])}),t.length>0&&u.setImmediate(()=>t.forEach(e=>e.resolve()))}waitState(e,t){this._state<5&&(1===e&&1!==this._state||5===e)?this._statePromises[e]?this._statePromises[e].push(t):this._statePromises[e]=[t]:t.resolve()}},e.exports.Ice=n},1930:(e,t,i)=>{const n=i(8846).Ice;i(7548),i(6708),i(3418),i(9576),i(4262),i(5896),i(2698),i(4997),i(8930),i(7879),i(6815);const r=n.ArrayUtil,s=n.AsyncResultBase,o=n.Debug,a=n.OutgoingAsync,c=n.ProxyFlushBatch,l=n.ProxyGetConnection,h=n.ReferenceMode,u=n.OperationMode;class d{constructor(){this._reference=null,this._requestHandler=null}hashCode(e){return this._reference.hashCode()}ice_getCommunicator(){return this._reference.getCommunicator()}toString(){return this._reference.toString()}ice_getIdentity(){return this._reference.getIdentity().clone()}ice_identity(e){if(null==e||0===e.name.length)throw new n.IllegalIdentityException;if(e.equals(this._reference.getIdentity()))return this;{const t=new d;return t._setup(this._reference.changeIdentity(e)),t}}ice_getContext(){return new Map(this._reference.getContext())}ice_context(e){return this._newInstance(this._reference.changeContext(e))}ice_getFacet(){return this._reference.getFacet()}ice_facet(e){if(null==e&&(e=""),e===this._reference.getFacet())return this;{const t=new d;return t._setup(this._reference.changeFacet(e)),t}}ice_getAdapterId(){return this._reference.getAdapterId()}ice_adapterId(e){return null==e&&(e=""),e===this._reference.getAdapterId()?this:this._newInstance(this._reference.changeAdapterId(e))}ice_getEndpoints(){return r.clone(this._reference.getEndpoints())}ice_endpoints(e){return null==e&&(e=[]),r.equals(e,this._reference.getEndpoints())?this:this._newInstance(this._reference.changeEndpoints(e))}ice_getLocatorCacheTimeout(){return this._reference.getLocatorCacheTimeout()}ice_locatorCacheTimeout(e){if(e<-1)throw new RangeError("invalid value passed to ice_locatorCacheTimeout: "+e);return e===this._reference.getLocatorCacheTimeout()?this:this._newInstance(this._reference.changeLocatorCacheTimeout(e))}ice_getInvocationTimeout(){return this._reference.getInvocationTimeout()}ice_invocationTimeout(e){if(e<1&&-1!==e)throw new RangeError("invalid value passed to ice_invocationTimeout: "+e);return e===this._reference.getInvocationTimeout()?this:this._newInstance(this._reference.changeInvocationTimeout(e))}ice_isConnectionCached(){return this._reference.getCacheConnection()}ice_connectionCached(e){return e===this._reference.getCacheConnection()?this:this._newInstance(this._reference.changeCacheConnection(e))}ice_getEndpointSelection(){return this._reference.getEndpointSelection()}ice_endpointSelection(e){return e===this._reference.getEndpointSelection()?this:this._newInstance(this._reference.changeEndpointSelection(e))}ice_isSecure(){return this._reference.getSecure()}ice_secure(e){return e===this._reference.getSecure()?this:this._newInstance(this._reference.changeSecure(e))}ice_getEncodingVersion(){return this._reference.getEncoding().clone()}ice_encodingVersion(e){return e.equals(this._reference.getEncoding())?this:this._newInstance(this._reference.changeEncoding(e))}ice_isPreferSecure(){return this._reference.getPreferSecure()}ice_preferSecure(e){return e===this._reference.getPreferSecure()?this:this._newInstance(this._reference.changePreferSecure(e))}ice_getRouter(){const e=this._reference.getRouterInfo();return null!==e?e.getRouter():null}ice_router(e){const t=this._reference.changeRouter(e);return t.equals(this._reference)?this:this._newInstance(t)}ice_getLocator(){const e=this._reference.getLocatorInfo();return null!==e?e.getLocator():null}ice_locator(e){const t=this._reference.changeLocator(e);return t.equals(this._reference)?this:this._newInstance(t)}ice_isTwoway(){return this._reference.getMode()===h.ModeTwoway}ice_twoway(){return this._reference.getMode()===h.ModeTwoway?this:this._newInstance(this._reference.changeMode(h.ModeTwoway))}ice_isOneway(){return this._reference.getMode()===h.ModeOneway}ice_oneway(){return this._reference.getMode()===h.ModeOneway?this:this._newInstance(this._reference.changeMode(h.ModeOneway))}ice_isBatchOneway(){return this._reference.getMode()===h.ModeBatchOneway}ice_batchOneway(){return this._reference.getMode()===h.ModeBatchOneway?this:this._newInstance(this._reference.changeMode(h.ModeBatchOneway))}ice_isDatagram(){return this._reference.getMode()===h.ModeDatagram}ice_datagram(){return this._reference.getMode()===h.ModeDatagram?this:this._newInstance(this._reference.changeMode(h.ModeDatagram))}ice_isBatchDatagram(){return this._reference.getMode()===h.ModeBatchDatagram}ice_batchDatagram(){return this._reference.getMode()===h.ModeBatchDatagram?this:this._newInstance(this._reference.changeMode(h.ModeBatchDatagram))}ice_timeout(e){if(e<1&&-1!==e)throw new RangeError("invalid value passed to ice_timeout: "+e);const t=this._reference.changeTimeout(e);return t.equals(this._reference)?this:this._newInstance(t)}ice_getTimeout(){return this._reference.getTimeout()}ice_fixed(e){if(null===e)throw new RangeError("invalid null connection passed to ice_fixed");if(!(e instanceof n.ConnectionI))throw new RangeError("invalid connection passed to ice_fixed");const t=this._reference.changeConnection(e);return t.equals(this._reference)?this:this._newInstance(t)}ice_isFixed(){return this._reference instanceof n.FixedReference}ice_getConnectionId(){return this._reference.getConnectionId()}ice_connectionId(e){const t=this._reference.changeConnectionId(e);return t.equals(this._reference)?this:this._newInstance(t)}ice_getConnection(){const e=new l(this,"ice_getConnection");try{e.invoke()}catch(t){e.abort(t)}return e}ice_getCachedConnection(){return this._requestHandler?this._requestHandler.getConnection():null}ice_flushBatchRequests(){const e=new c(this,"ice_flushBatchRequests");try{e.invoke()}catch(t){e.abort(t)}return e}equals(e){return this===e||e instanceof d&&this._reference.equals(e._reference)}_write(e){this._reference.getIdentity()._write(e),this._reference.streamWrite(e)}_getReference(){return this._reference}_copyFrom(e){o.assert(null===this._reference),o.assert(null===this._requestHandler),this._reference=e._reference,this._requestHandler=e._requestHandler}_handleException(e,t,i,r,s,o){if(this._updateRequestHandler(t,null),!(e instanceof n.LocalException&&(!r||i==u.Nonmutating||i==u.Idempotent||e instanceof n.CloseConnectionException||e instanceof n.ObjectNotExistException)))throw e;try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,s,o)}catch(t){throw t instanceof n.CommunicatorDestroyedException?e:t}}_checkAsyncTwowayOnly(e){if(!this.ice_isTwoway())throw new n.TwowayOnlyException(e)}_getRequestHandler(){return this._reference.getCacheConnection()&&this._requestHandler?this._requestHandler:this._reference.getRequestHandler(this)}_getBatchRequestQueue(){return this._batchRequestQueue||(this._batchRequestQueue=this._reference.getBatchRequestQueue()),this._batchRequestQueue}_setRequestHandler(e){return this._reference.getCacheConnection()?(this._requestHandler||(this._requestHandler=e),this._requestHandler):e}_updateRequestHandler(e,t){this._reference.getCacheConnection()&&null!==e&&this._requestHandler&&this._requestHandler!==t&&(this._requestHandler=this._requestHandler.update(e,t))}_setup(e){o.assert(null===this._reference),this._reference=e}_newInstance(e){const t=new this.constructor;return t._setup(e),t}ice_instanceof(e){return!!e&&(this instanceof e||this.constructor._instanceof(e))}static _invoke(e,t,i,n,r,s,o,c,l){(null!==o||c.length>0)&&e._checkAsyncTwowayOnly(t);const h=new a(e,t,e=>{this._completed(e,o,c)});try{h.prepare(t,i,r),null===s?h.writeEmptyParams():(s(h.startWriteParams(n),l),h.endWriteParams()),h.invoke()}catch(e){h.abort(e)}return h}static _completed(e,t,i){if(this._check(e,i))try{null===t?(e.readEmptyParams(),e.resolve()):e.resolve(t(e))}catch(t){this.dispatchLocalException(e,t)}}static _check(e,t){try{e.throwUserException()}catch(i){if(i instanceof n.UserException){if(null!==t)for(let n=0;n<t.length;++n)if(i instanceof t[n])return e.reject(i),!1;return e.reject(new n.UnknownUserException(i.ice_id())),!1}return e.reject(i),!1}return!0}static dispatchLocalException(e,t){e.reject(t)}static checkedCast(e,t,i){let r=null;return null==e?(r=new s(null,"checkedCast",null,null,null),r.resolve(null)):(void 0!==t&&(e=e.ice_facet(t)),r=new s(e.ice_getCommunicator(),"checkedCast",null,e,null),e.ice_isA(this.ice_staticId(),i).then(t=>{if(t){const t=new this;t._copyFrom(e),r.resolve(t)}else r.resolve(null)}).catch(e=>{e instanceof n.FacetNotExistException?r.resolve(null):r.reject(e)})),r}static uncheckedCast(e,t){let i=null;return null!=e&&(i=new this,void 0!==t&&(e=e.ice_facet(t)),i._copyFrom(e)),i}static get minWireSize(){return 2}static write(e,t){e.writeProxy(t)}static read(e){return e.readProxy(this)}static writeOptional(e,t,i){e.writeOptionalProxy(t,i)}static readOptional(e,t){return e.readOptionalProxy(t,this)}static _instanceof(e){if(e===this)return!0;for(const t in this._implements)if(this._implements[t]._instanceof(e))return!0;return!1}static ice_staticId(){return this._id}static get _implements(){return[]}}n.ObjectPrx=d,e.exports.Ice=n},1967:(e,t,i)=>{const n=i(8846).Ice;n.MapUtil=class{static equals(e,t){if(e===t)return!0;if(e.size!=t.size)return!1;for(const[i,n]of e)if(void 0===n){if(!t.has(i))return!1;if(t.get(i)!==n)return!1}else if(t.get(i)!==n)return!1;return!0}},e.exports.Ice=n},2279:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(5527),i(4997),i(1930),i(8740),i(3332);const r=n.Debug,s=n.Identity,o=n.ObjectPrx,a=n.StringUtil;n.ProxyFactory=class{constructor(e){this._instance=e;const t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(let e=0;e<t.length;e++){let i;try{i=a.toInt(t[e])}catch(e){i=0}if(0===e&&-1===i)break;this._retryIntervals[e]=i>0?i:0}}else this._retryIntervals=[0]}stringToProxy(e){return this.referenceToProxy(this._instance.referenceFactory().createFromString(e,null))}proxyToString(e){return null===e?"":e._getReference().toString()}propertyToProxy(e){const t=this._instance.initializationData().properties.getProperty(e),i=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(i)}proxyToProperty(e,t){return null===e?new Map:e._getReference().toProperty(t)}streamToProxy(e,t){const i=new s;return i._read(e),this.referenceToProxy(this._instance.referenceFactory().createFromStream(i,e),t)}referenceToProxy(e,t){if(null!==e){const i=t?new t:new o;return i._setup(e),i}return null}checkRetryAfterException(e,t,i,s){const o=this._instance.traceLevels(),a=this._instance.initializationData().logger;if(t.getMode()===n.Reference.ModeBatchOneway||t.getMode()===n.Reference.ModeBatchDatagram)throw e;if(t instanceof n.FixedReference)throw e;if(e instanceof n.ObjectNotExistException){if(null!==t.getRouterInfo()&&"ice_add_proxy"===e.operation)return t.getRouterInfo().clearCache(t),o.retry>=1&&a.trace(o.retryCat,"retrying operation call to add proxy to router\n"+e.toString()),null!==i&&(i.value=0),s;if(!t.isIndirect())throw e;if(t.isWellKnown()){const e=t.getLocatorInfo();null!==e&&e.clearCache(t)}}else if(e instanceof n.RequestFailedException)throw e;if(e instanceof n.MarshalException)throw e;if(e instanceof n.CommunicatorDestroyedException||e instanceof n.ObjectAdapterDeactivatedException||e instanceof n.ConnectionManuallyClosedException)throw e;if(e instanceof n.InvocationTimeoutException||e instanceof n.InvocationCanceledException)throw e;let c;if(++s,r.assert(s>0),s===this._retryIntervals.length+1&&e instanceof n.CloseConnectionException)c=0;else{if(s>this._retryIntervals.length)throw o.retry>=1&&a.trace(o.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+e.toString()),e;c=this._retryIntervals[s-1]}if(o.retry>=1){let t="retrying operation call";c>0&&(t+=" in "+c+"ms"),t+=" because of exception\n"+e.toString(),a.trace(o.retryCat,t)}return r.assert(null!==i),i.value=c,s}},e.exports.Ice=n},2355:(e,t,i)=>{const n=i(8846).Ice;n.TraceLevels=function(e){const t="Network",i="Protocol",n="Retry",r="Locator",s="Slicing",o="Ice.Trace.",a=e.getPropertyAsInt(o+t),c=e.getPropertyAsInt(o+i),l=e.getPropertyAsInt(o+n),h=e.getPropertyAsInt(o+r),u=e.getPropertyAsInt(o+s);return e.getPropertyAsInt(o+"ThreadPool"),class{static get network(){return a}static get networkCat(){return t}static get protocol(){return c}static get protocolCat(){return i}static get retry(){return l}static get retryCat(){return n}static get location(){return h}static get locationCat(){return r}static get slicing(){return u}static get slicingCat(){return s}}},e.exports.Ice=n},2368:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(7788),i(9483),i(3239),i(1781),i(7548),i(8372),i(3418);const r=n.module("Ice"),s=r.Slice;r.Router=class extends r.Object{},r.RouterPrx=class extends r.ObjectPrx{},s.defineOperations(r.Router,r.RouterPrx,["::Ice::Object","::Ice::Router"],1,{getClientProxy:[,2,1,,[9],,[[1,,1]],,,],getServerProxy:[,2,1,,[9],,,,,],addProxies:[,2,2,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]}),r.RouterFinder=class extends r.Object{},r.RouterFinderPrx=class extends r.ObjectPrx{},s.defineOperations(r.RouterFinder,r.RouterFinderPrx,["::Ice::Object","::Ice::RouterFinder"],1,{getRouter:[,,,,["Ice.RouterPrx"],,,,,]}),t.Ice=r},2425:(e,t,i)=>{e.exports.Ice=i(1226).Ice,i(1226),i(1226),i(6062),i(3538),i(9208)},2459:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(1193),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice"),s=r.Slice;r.EndpointSelectionType=s.defineEnum([["Random",0],["Ordered",1]]),t.Ice=r},2466:(e,t,i)=>{const n=i(8846).Ice;n.CompactIdRegistry=new Map,e.exports.Ice=n},2525:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry,r=i(3905).Glacier2;i(8930),i(1488),i(1930),i(7788),i(5896),i(9483),i(3239),i(1781),i(7548),i(8372);const s=n.module("Ice"),o=s.Slice;r.PermissionDeniedException=class extends s.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return s.UserException}static get _id(){return"::Glacier2::PermissionDeniedException"}_mostDerivedType(){return r.PermissionDeniedException}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},o.PreservedUserException(r.PermissionDeniedException),r.PermissionsVerifier=class extends s.Object{},r.PermissionsVerifierPrx=class extends s.ObjectPrx{},o.defineOperations(r.PermissionsVerifier,r.PermissionsVerifierPrx,["::Glacier2::PermissionsVerifier","::Ice::Object"],0,{checkPermissions:[,2,1,2,[1],[[7],[7]],[[7]],[r.PermissionDeniedException],,]}),r.SSLPermissionsVerifier=class extends s.Object{},r.SSLPermissionsVerifierPrx=class extends s.ObjectPrx{},o.defineOperations(r.SSLPermissionsVerifier,r.SSLPermissionsVerifierPrx,["::Glacier2::SSLPermissionsVerifier","::Ice::Object"],0,{authorize:[,2,1,2,[1],[[r.SSLInfo]],[[7]],[r.PermissionDeniedException],,]}),t.Glacier2=r},2573:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(3239),i(1779),i(4997),i(3332);const r=n.Debug,s=n.HashMap,o=n.StringUtil;n.ServantManager=class{constructor(e,t){this._instance=e,this._adapterName=t,this._servantMapMap=new s(s.compareEquals),this._defaultServantMap=new Map,this._locatorMap=new Map}addServant(e,t,i){r.assert(null!==this._instance),null===i&&(i="");let s=this._servantMapMap.get(t);if(void 0===s)s=new Map,this._servantMapMap.set(t,s);else if(s.has(i)){const e=new n.AlreadyRegisteredException;throw e.id=n.identityToString(t,this._instance.toStringMode()),e.kindOfObject="servant",i.length>0&&(e.id+=" -f "+o.escapeString(i,"",this._instance.toStringMode())),e}s.set(i,e)}addDefaultServant(e,t){if(r.assert(null!==this._instance),this._defaultServantMap.has(t)){const e=new n.AlreadyRegisteredException;throw e.kindOfObject="default servant",e.id=t,e}this._defaultServantMap.set(t,e)}removeServant(e,t){r.assert(null!==this._instance),null===t&&(t="");const i=this._servantMapMap.get(e);if(void 0===i||!i.has(t)){const i=new n.NotRegisteredException;throw i.id=n.identityToString(e,this._instance.toStringMode()),i.kindOfObject="servant",t.length>0&&(i.id+=" -f "+o.escapeString(t,"",this._instance.toStringMode())),i}const s=i.get(t);return i.delete(t),0===i.size&&this._servantMapMap.delete(e),s}removeDefaultServant(e){r.assert(null!==this._instance);const t=this._defaultServantMap.get(e);if(void 0===t){const t=new n.NotRegisteredException;throw t.kindOfObject="default servant",t.id=e,t}return this._defaultServantMap.delete(e),t}removeAllFacets(e){r.assert(null!==this._instance);const t=this._servantMapMap.get(e);if(void 0===t){const t=new n.NotRegisteredException;throw t.id=n.identityToString(e,this._instance.toStringMode()),t.kindOfObject="servant",t}return this._servantMapMap.delete(e),t}findServant(e,t){null===t&&(t="");const i=this._servantMapMap.get(e);let n=null;return void 0===i?(n=this._defaultServantMap.get(e.category),void 0===n&&(n=this._defaultServantMap.get(""))):n=i.get(t),void 0===n?null:n}findDefaultServant(e){r.assert(null!==this._instance);const t=this._defaultServantMap.get(e);return void 0===t?null:t}findAllFacets(e){r.assert(null!==this._instance);const t=this._servantMapMap.get(e);return void 0!==t?new Map(t):new Map}hasServant(e){const t=this._servantMapMap.get(e);return void 0!==t&&(r.assert(t.size>0),!0)}addServantLocator(e,t){if(r.assert(null!==this._instance),this._locatorMap.has(t)){const e=new n.AlreadyRegisteredException;throw e.id=o.escapeString(t,"",this._instance.toStringMode()),e.kindOfObject="servant locator",e}this._locatorMap.set(t,e)}removeServantLocator(e){r.assert(null!==this._instance);const t=this._locatorMap.get(e);if(void 0===t){const t=new n.NotRegisteredException;throw t.id=o.escapeString(e,"",this._instance.toStringMode()),t.kindOfObject="servant locator",t}return this._locatorMap.delete(e),t}findServantLocator(e){const t=this._locatorMap.get(e);return void 0===t?null:t}destroy(){r.assert(null!==this._instance);const e=this._instance.initializationData().logger;this._servantMapMap.clear(),this._defaultServantMap.clear();const t=new Map(this._locatorMap);this._locatorMap.clear(),this._instance=null;for(const[i,n]of t)try{n.deactivate(i)}catch(t){e.error("exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+i+"'\n"+t.toString())}}},e.exports.Ice=n},2644:(e,t,i)=>{const n=i(8846).Ice;i(9576),i(4997);const r=n.Context,s=n.InitializationException;class o{constructor(){this._context=new r}getContext(){return new r(this._context)}setContext(e){null!==e&&e.size>0?this._context=new r(e):this._context.clear()}containsKey(e){return null===e&&(e=""),this._context.has(e)}get(e){null===e&&(e="");let t=this._context.get(e);return null===t&&(t=""),t}put(e,t){null===e&&(e=""),null===t&&(t="");let i=this._context.get(e);return null===i&&(i=""),this._context.set(e,t),i}remove(e){null===e&&(e="");let t=this._context.get(e);return this._context.delete(e),null===t&&(t=""),t}write(e,t){if(0===e.size)n.ContextHelper.write(t,this._context);else{let i=null;if(0===this._context.size)i=e;else{i=new r(this._context);for(const[t,n]of e)i.set(t,n)}n.ContextHelper.write(t,i)}}static create(e){if(0===e.length||"None"===e)return null;if("Shared"===e)return new o;throw new s("'"+e+"' is not a valid value for Ice.ImplicitContext")}}n.ImplicitContextI=o,e.exports.Ice=n},2676:(e,t,i)=>{const n=i(8846).Ice;i(7548),i(1781),i(8372);const r=n.ArrayUtil,s=r.eq;function o(e){if(this===e)return!0;if(null==e)return!1;if(this.prototype!==e.prototype)return!1;for(const t in this){const i=this[t],n=e[t];if("function"!=typeof i&&!s(i,n))return!1}return!0}function a(){const e=new this.constructor;for(const t in this){const i=this[t];if(null==i)e[t]=i;else{if("function"==typeof i)continue;"function"==typeof i.clone?e[t]=i.clone():e[t]=i instanceof Array?r.clone(i):i}}return e}function c(e,t){if("function"==typeof t.hashCode)return n.HashUtil.addHashable(e,t);if(t instanceof Array)return n.HashUtil.addArray(e,t,c);{const i=typeof t;if(t instanceof String||"string"==i)return n.HashUtil.addString(e,t);if(t instanceof Number||"number"==i)return n.HashUtil.addNumber(e,t);if(t instanceof Boolean||"boolean"==i)return n.HashUtil.addBoolean(e,t)}}function l(){let e=5381;for(const t in this){const i=this[t];null!=i&&"function"!=typeof i&&(e=c(e,i))}return e}n.Slice.defineStruct=function(e,t,i){return e.prototype.clone=a,e.prototype.equals=o,t&&(e.prototype.hashCode=l),e.prototype._write&&e.prototype._read&&(e.write=function(t,i){i||(e.prototype._nullMarshalValue||(e.prototype._nullMarshalValue=new this),i=e.prototype._nullMarshalValue),i._write(t)},e.read=function(e,t){return t&&t instanceof this||(t=new this),t._read(e),t},i?n.StreamHelpers.FSizeOptHelper.call(e):n.StreamHelpers.VSizeOptHelper.call(e)),e},e.exports.Ice=n},2698:(e,t,i)=>{const n=i(1193).Ice;n.FormatType=n.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]]),e.exports.Ice=n},2713:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(2676),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice"),s=r.Slice;r.ProtocolVersion=class{constructor(e=0,t=0){this.major=e,this.minor=t}_write(e){e.writeByte(this.major),e.writeByte(this.minor)}_read(e){this.major=e.readByte(),this.minor=e.readByte()}static get minWireSize(){return 2}},s.defineStruct(r.ProtocolVersion,!0,!1),r.EncodingVersion=class{constructor(e=0,t=0){this.major=e,this.minor=t}_write(e){e.writeByte(this.major),e.writeByte(this.minor)}_read(e){this.major=e.readByte(),this.minor=e.readByte()}static get minWireSize(){return 2}},s.defineStruct(r.EncodingVersion,!0,!1),t.Ice=r},2737:(e,t,i)=>{const n=i(6048).A,r=n.TcpEndpointI;class s{constructor(e){this._instance=e}type(){return this._instance.type()}protocol(){return this._instance.protocol()}create(e,t){const i=new r(this._instance);return i.initWithOptions(e,t),i}read(e){const t=new r(this._instance);return t.initWithStream(e),t}destroy(){this._instance=null}clone(e){return new s(e)}}n.TcpEndpointFactory=s,e.exports.Ice=n},3016:(e,t,i)=>{const n=i(8846).Ice;i(9576),i(4262),i(5527),i(9157),i(3332);const r=n.Debug,s=n.Identity,o=n.OperationMode,a=n.Protocol,c=n.StringUtil,l=new Map;function h(e,t){let i=n.ToStringMode.Unicode;null!==t.instance&&(i=t.instance.toStringMode());const r=new s;r._read(t),e.push("\nidentity = "+n.identityToString(r,i));const o=n.StringSeqHelper.read(t);e.push("\nfacet = "),o.length>0&&e.push(c.escapeString(o[0],"",i));const a=t.readString();e.push("\noperation = "+a)}function u(e,t){h(e,t);const i=t.readByte();switch(e.push("\nmode = "+i+" "),o.valueOf(i)){case o.Normal:e.push("(normal)");break;case o.Nonmutating:e.push("(nonmutating)");break;case o.Idempotent:e.push("(idempotent)");break;default:e.push("(unknown)")}let r=t.readSize();for(e.push("\ncontext = ");r-- >0;){const i=t.readString(),n=t.readString();e.push(i+"/"+n),r>0&&e.push(", ")}const s=t.skipEncapsulation();s.equals(n.Encoding_1_0)||(e.push("\nencoding = "),e.push(n.encodingVersionToString(s)))}function d(e,t){const i=function(e,t){t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte();const i=t.readByte();e.push("\nmessage type = "+i+" ("+p(i)+")");const n=t.readByte();switch(e.push("\ncompression status = "+n+" "),n){case 0:e.push("(not compressed; do not compress response, if any)");break;case 1:e.push("(not compressed; compress response, if any)");break;case 2:e.push("(compressed; compress response, if any)");break;default:e.push("(unknown)")}const r=t.readInt();return e.push("\nmessage size = "+r),i}(e,t);switch(i){case a.closeConnectionMsg:case a.validateConnectionMsg:break;case a.requestMsg:!function(e,t){const i=t.readInt();e.push("\nrequest id = "+i),0===i&&e.push(" (oneway)"),u(e,t)}(e,t);break;case a.requestBatchMsg:!function(e,t){const i=t.readInt();e.push("\nnumber of requests = "+i);for(let n=0;n<i;++n)e.push("\nrequest #"+n+":"),u(e,t)}(e,t);break;case a.replyMsg:!function(e,t){const i=t.readInt();e.push("\nrequest id = "+i);const s=t.readByte();switch(e.push("\nreply status = "+s+" "),s){case a.replyOK:e.push("(ok)");break;case a.replyUserException:e.push("(user exception)");break;case a.replyObjectNotExist:case a.replyFacetNotExist:case a.replyOperationNotExist:switch(s){case a.replyObjectNotExist:e.push("(object not exist)");break;case a.replyFacetNotExist:e.push("(facet not exist)");break;case a.replyOperationNotExist:e.push("(operation not exist)");break;default:r.assert(!1)}h(e,t);break;case a.replyUnknownException:case a.replyUnknownLocalException:case a.replyUnknownUserException:{switch(s){case a.replyUnknownException:e.push("(unknown exception)");break;case a.replyUnknownLocalException:e.push("(unknown local exception)");break;case a.replyUnknownUserException:e.push("(unknown user exception)");break;default:r.assert(!1)}const i=t.readString();e.push("\nunknown = "+i);break}default:e.push("(unknown)")}if(s===a.replyOK||s===a.replyUserException){const i=t.skipEncapsulation();i.equals(n.Encoding_1_0)||(e.push("\nencoding = "),e.push(n.encodingVersionToString(i)))}}(e,t)}return i}function p(e){switch(e){case a.requestMsg:return"request";case a.requestBatchMsg:return"batch request";case a.replyMsg:return"reply";case a.closeConnectionMsg:return"close connection";case a.validateConnectionMsg:return"validate connection";default:return"unknown"}}class _{static traceSlicing(e,t,i,n){l.has(t)||(n.trace(i,`unknown ${e} type \`${t}'`),l.set(t,1))}static traceSend(e,t,i){if(i.protocol>=1){const r=e.pos,s=new n.InputStream(e.instance,e.getEncoding(),e.buffer);s.pos=0;const o=[],a=d(o,s);t.trace(i.protocolCat,"sending "+p(a)+" "+o.join("")),e.pos=r}}static traceRecv(e,t,i){if(i.protocol>=1){const n=e.pos;e.pos=0;const r=[],s=d(r,e);t.trace(i.protocolCat,"received "+p(s)+" "+r.join("")),e.pos=n}}static traceOut(e,t,i,r){if(r.protocol>=1){const s=t.pos,o=new n.InputStream(t.instance,t.getEncoding(),t.buffer);o.pos=0;const a=[];a.push(e),d(a,o),i.trace(r.protocolCat,a.join("")),t.pos=s}}static traceIn(e,t,i,n){if(n.protocol>=1){const r=t.pos;t.pos=0;const s=[];s.push(e),d(s,t),i.trace(n.protocolCat,s.join("")),t.pos=r}}static dumpStream(e){const t=e.pos;e.pos=0;const i=e.readBlob(e.size());_.dumpOctets(i),e.pos=t}static dumpOctets(e){const t=[];for(let i=0;i<e.length;i+=8){for(let n=i;n-i<8;n++)if(n<e.length){let i,r=e[n];r<0&&(r+=256),i=r<10?"  "+r:r<100?" "+r:String(r),t.push(i+" ")}else t.push("    ");t.push('"');for(let n=i;n<e.length&&n-i<8;n++)e[n]>=32&&e[n]<127?t.push(String.fromCharCode(e[n])):t.push(".");t.push('"\n')}console.log(t.join(""))}}n.TraceUtil=_,e.exports.Ice=n},3076:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(7788),i(2676),i(5896),i(9483),i(3239),i(1781),i(7548),i(8372),i(3418);const r=n.module("Ice"),s=r.Slice;let o=n.module("IceMX");s.defineDictionary(o,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.Metrics=class extends r.Value{constructor(e="",t=new r.Long(0,0),i=0,n=new r.Long(0,0),s=0){super(),this.id=e,this.total=t,this.current=i,this.totalLifetime=n,this.failures=s}_iceWriteMemberImpl(e){e.writeString(this.id),e.writeLong(this.total),e.writeInt(this.current),e.writeLong(this.totalLifetime),e.writeInt(this.failures)}_iceReadMemberImpl(e){this.id=e.readString(),this.total=e.readLong(),this.current=e.readInt(),this.totalLifetime=e.readLong(),this.failures=e.readInt()}},s.defineValue(o.Metrics,"::IceMX::Metrics",!1),o.MetricsFailures=class{constructor(e="",t=null){this.id=e,this.failures=t}_write(e){e.writeString(this.id),o.StringIntDictHelper.write(e,this.failures)}_read(e){this.id=e.readString(),this.failures=o.StringIntDictHelper.read(e)}static get minWireSize(){return 2}},s.defineStruct(o.MetricsFailures,!1,!0),s.defineSequence(o,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",!1),s.defineSequence(o,"MetricsMapHelper","Ice.ObjectHelper",!1,"IceMX.Metrics"),s.defineDictionary(o,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",!1,void 0,void 0,r.ArrayUtil.equals),o.UnknownMetricsView=class extends r.UserException{constructor(e=""){super(e)}static get _parent(){return r.UserException}static get _id(){return"::IceMX::UnknownMetricsView"}_mostDerivedType(){return o.UnknownMetricsView}},o.MetricsAdmin=class extends r.Object{},o.MetricsAdminPrx=class extends r.ObjectPrx{},s.defineOperations(o.MetricsAdmin,o.MetricsAdminPrx,["::Ice::Object","::IceMX::MetricsAdmin"],1,{getMetricsViewNames:[,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,2,,[[7]],,[o.UnknownMetricsView],,],disableMetricsView:[,,,2,,[[7]],,[o.UnknownMetricsView],,],getMetricsView:[,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[o.UnknownMetricsView],,!0],getMapMetricsFailures:[,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[o.UnknownMetricsView],,],getMetricsFailures:[,,,2,[o.MetricsFailures],[[7],[7],[7]],,[o.UnknownMetricsView],,]}),o.ThreadMetrics=class extends o.Metrics{constructor(e,t,i,n,r,s=0,o=0,a=0){super(e,t,i,n,r),this.inUseForIO=s,this.inUseForUser=o,this.inUseForOther=a}_iceWriteMemberImpl(e){e.writeInt(this.inUseForIO),e.writeInt(this.inUseForUser),e.writeInt(this.inUseForOther)}_iceReadMemberImpl(e){this.inUseForIO=e.readInt(),this.inUseForUser=e.readInt(),this.inUseForOther=e.readInt()}},s.defineValue(o.ThreadMetrics,"::IceMX::ThreadMetrics",!1),o.DispatchMetrics=class extends o.Metrics{constructor(e,t,i,n,s,o=0,a=new r.Long(0,0),c=new r.Long(0,0)){super(e,t,i,n,s),this.userException=o,this.size=a,this.replySize=c}_iceWriteMemberImpl(e){e.writeInt(this.userException),e.writeLong(this.size),e.writeLong(this.replySize)}_iceReadMemberImpl(e){this.userException=e.readInt(),this.size=e.readLong(),this.replySize=e.readLong()}},s.defineValue(o.DispatchMetrics,"::IceMX::DispatchMetrics",!1),o.ChildInvocationMetrics=class extends o.Metrics{constructor(e,t,i,n,s,o=new r.Long(0,0),a=new r.Long(0,0)){super(e,t,i,n,s),this.size=o,this.replySize=a}_iceWriteMemberImpl(e){e.writeLong(this.size),e.writeLong(this.replySize)}_iceReadMemberImpl(e){this.size=e.readLong(),this.replySize=e.readLong()}},s.defineValue(o.ChildInvocationMetrics,"::IceMX::ChildInvocationMetrics",!1),o.CollocatedMetrics=class extends o.ChildInvocationMetrics{constructor(e,t,i,n,r,s,o){super(e,t,i,n,r,s,o)}},s.defineValue(o.CollocatedMetrics,"::IceMX::CollocatedMetrics",!1),o.RemoteMetrics=class extends o.ChildInvocationMetrics{constructor(e,t,i,n,r,s,o){super(e,t,i,n,r,s,o)}},s.defineValue(o.RemoteMetrics,"::IceMX::RemoteMetrics",!1),o.InvocationMetrics=class extends o.Metrics{constructor(e,t,i,n,r,s=0,o=0,a=null,c=null){super(e,t,i,n,r),this.retry=s,this.userException=o,this.remotes=a,this.collocated=c}_iceWriteMemberImpl(e){e.writeInt(this.retry),e.writeInt(this.userException),o.MetricsMapHelper.write(e,this.remotes),o.MetricsMapHelper.write(e,this.collocated)}_iceReadMemberImpl(e){this.retry=e.readInt(),this.userException=e.readInt(),this.remotes=o.MetricsMapHelper.read(e),this.collocated=o.MetricsMapHelper.read(e)}},s.defineValue(o.InvocationMetrics,"::IceMX::InvocationMetrics",!1),o.ConnectionMetrics=class extends o.Metrics{constructor(e,t,i,n,s,o=new r.Long(0,0),a=new r.Long(0,0)){super(e,t,i,n,s),this.receivedBytes=o,this.sentBytes=a}_iceWriteMemberImpl(e){e.writeLong(this.receivedBytes),e.writeLong(this.sentBytes)}_iceReadMemberImpl(e){this.receivedBytes=e.readLong(),this.sentBytes=e.readLong()}},s.defineValue(o.ConnectionMetrics,"::IceMX::ConnectionMetrics",!1),t.V=o},3210:(e,t,i)=>{const n=i(8846).Ice;i(3793),i(4262);const r=n.Debug;class s{constructor(e,t,i,r){if(void 0===e)return this.timeout=6e4,this.heartbeat=n.ACMHeartbeat.HeartbeatOnDispatch,void(this.close=n.ACMClose.CloseOnInvocationAndIdle);let s;s="Ice.ACM.Client"!=i&&"Ice.ACM.Server"!=i||0!==e.getProperty(i+".Timeout").length?i+".Timeout":i,this.timeout=1e3*e.getPropertyAsIntWithDefault(s,r.timeout/1e3),this.timeout<0&&(t.warning("invalid value for property `"+s+"', default value will be used instead"),this.timeout=r.timeout);const o=e.getPropertyAsIntWithDefault(i+".Heartbeat",r.heartbeat.value);o>=0&&o<=n.ACMHeartbeat.maxValue?this.heartbeat=n.ACMHeartbeat.valueOf(o):(t.warning("invalid value for property `"+i+".Heartbeat', default value will be used instead"),this.heartbeat=r.heartbeat);const a=e.getPropertyAsIntWithDefault(i+".Close",r.close.value);a>=0&&a<=n.ACMClose.maxValue?this.close=n.ACMClose.valueOf(a):(t.warning("invalid value for property `"+i+".Close', default value will be used instead"),this.close=r.close)}}class o{constructor(e,t,i){this._parent=e,this._timer=t,this._config=i,this._connection=null}add(e){r.assert(null===this._connection),this._connection=e,this._config.timeout>0&&(this._timerToken=this._timer.scheduleRepeated(()=>this.runTimerTask(),this._config.timeout/2))}remove(e){r.assert(this._connection===e),this._connection=null,this._config.timeout>0&&this._timer.cancel(this._timerToken)}reap(e){this._parent.reap(e)}acm(e,t,i){return this._parent.acm(e,t,i)}getACM(){return new n.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)}runTimerTask(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}}n.FactoryACMMonitor=class{constructor(e,t){this._instance=e,this._config=t,this._reapedConnections=[],this._connections=[]}destroy(){null!==this._instance&&(this._instance=null)}add(e){0!==this._config.timeout&&(this._connections.push(e),1==this._connections.length&&(this._timerToken=this._instance.timer().scheduleRepeated(()=>this.runTimerTask(),this._config.timeout/2)))}remove(e){if(0===this._config.timeout)return;const t=this._connections.indexOf(e);r.assert(t>=0),this._connections.splice(t,1),0===this._connections.length&&this._instance.timer().cancel(this._timerToken)}reap(e){this._reapedConnections.push(e)}acm(e,t,i){r.assert(null!==this._instance);const n=new s;return n.timeout=this._config.timeout,n.close=this._config.close,n.heartbeat=this._config.heartbeat,void 0!==e&&(n.timeout=1e3*e),void 0!==t&&(n.close=t),void 0!==i&&(n.heartbeat=i),new o(this,this._instance.timer(),n)}getACM(){return new n.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)}swapReapedConnections(){if(0===this._reapedConnections.length)return null;const e=this._reapedConnections;return this._reapedConnections=[],e}runTimerTask(){if(null===this._instance)return void(this._connections=null);const e=Date.now();this._connections.forEach(t=>{try{t.monitor(e,this._config)}catch(e){this.handleException(e)}})}handleException(e){null!==this._instance&&this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}},n.ACMConfig=s,e.exports.Ice=n},3239:(e,t,i)=>{const n=i(8846).Ice;i(3332),i(9294);const r=n._ModuleRegistry,s=n.StringUtil;function o(e,t,i,n,r){for(let s=e._table[r];null!==s;s=s._nextInBucket)if(s._hash===n&&e.keysEqual(t,s._key))return void(s._value=i);e.add(t,i,n,r)}function a(e,t){return e===t}class c{constructor(e,t){let i,n,r;if("function"==typeof e?(n=e,r=t):e instanceof c&&(i=e,n=i.keyComparator,r=i.valueComparator),this._size=0,this._head=null,this._initialCapacity=32,this._loadFactor=.75,this._table=[],this._keyComparator="function"==typeof n?n:a,this._valueComparator="function"==typeof r?r:a,i instanceof c&&i._size>0){this._threshold=i._threshold,this._table.length=i._table.length;for(let e=0;e<i._table.length;e++)this._table[e]=null;this.merge(i)}else{this._threshold=this._initialCapacity*this._loadFactor;for(let e=0;e<this._initialCapacity;e++)this._table[e]=null}}set(e,t){const i=this.computeHash(e),n=this.hashIndex(i.hash,this._table.length);return o(this,i.key,t,i.hash,n)}get(e){const t=this.computeHash(e),i=this.findEntry(t.key,t.hash);return void 0!==i?i._value:void 0}has(e){const t=this.computeHash(e);return void 0!==this.findEntry(t.key,t.hash)}delete(e){const t=this.computeHash(e),i=this.hashIndex(t.hash,this._table.length);let n=null;for(let e=this._table[i];null!==e;e=e._nextInBucket){if(e._hash===t.hash&&this.keysEqual(t.key,e._key))return this._size--,null!==n?n._nextInBucket=e._nextInBucket:this._table[i]=e._nextInBucket,null!==e._prev&&(e._prev._next=e._next),null!==e._next&&(e._next._prev=e._prev),this._head===e&&(this._head=e._next),e._value;n=e}}clear(){for(let e=0;e<this._table.length;++e)this._table[e]=null;this._head=null,this._size=0}forEach(e,t){t=void 0===t?e:t;for(let i=this._head;null!==i;i=i._next)e.call(t,i._value,i._key)}*entries(){for(let e=this._head;null!==e;e=e._next)yield[e._key,e._value]}*keys(){for(let e=this._head;null!==e;e=e._next)yield e._key}*values(){for(let e=this._head;null!==e;e=e._next)yield e._value}equals(e,t){if(null===e||!(e instanceof c)||this._size!==e._size)return!1;let i;i=t||((e,t)=>this._valueComparator.call(this._valueComparator,e,t));for(let t=this._head;null!==t;t=t._next){const n=e.findEntry(t._key,t._hash);if(void 0===n||!i(t._value,n._value))return!1}return!0}merge(e){for(let t=e._head;null!==t;t=t._next)o(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))}add(e,t,i,n){const r=Object.create(null,{key:{enumerable:!0,get:function(){return this._key}},value:{enumerable:!0,get:function(){return this._value}},next:{enumerable:!0,get:function(){return this._next}},_key:{enumerable:!1,writable:!0,value:e},_value:{enumerable:!1,writable:!0,value:t},_prev:{enumerable:!1,writable:!0,value:null},_next:{enumerable:!1,writable:!0,value:null},_nextInBucket:{enumerable:!1,writable:!0,value:null},_hash:{enumerable:!1,writable:!0,value:i}});r._nextInBucket=this._table[n],this._table[n]=r,r._next=this._head,null!==this._head&&(this._head._prev=r),this._head=r,this._size++,this._size>=this._threshold&&this.resize(2*this._table.length)}resize(e){const t=new Array(e).fill(null);for(let i=this._head;null!==i;i=i._next){const n=this.hashIndex(i._hash,e);i._nextInBucket=t[n],t[n]=i}this._table=t,this._threshold=e*this._loadFactor}findEntry(e,t){const i=this.hashIndex(t,this._table.length);for(let n=this._table[i];null!==n;n=n._nextInBucket)if(n._hash===t&&this.keysEqual(e,n._key))return n}hashIndex(e,t){return e&t-1}computeHash(e){if(0===e)return{key:0,hash:0};if(null===e){if(null===c._null){const e=n.generateUUID();c._null={key:e,hash:s.hashCode(e)}}return c._null}if(void 0===e)throw new RangeError("cannot compute hash for undefined value");if("function"==typeof e.hashCode)return{key:e,hash:e.hashCode()};const t=typeof e;if("string"===t||e instanceof String)return{key:e,hash:s.hashCode(e)};if("number"===t||e instanceof Number){if(isNaN(e)){if(null===c._nan){const e=n.generateUUID();c._nan={key:e,hash:s.hashCode(e)}}return c._nan}return{key:e,hash:e.toFixed(0)}}if("boolean"===t||e instanceof Boolean)return{key:e,hash:e?1:0};throw new RangeError("cannot compute hash for value of type "+t)}keysEqual(e,t){return this._keyComparator.call(this._keyComparator,e,t)}get size(){return this._size}}c.prototype[Symbol.iterator]=c.prototype.entries,n.HashMap=c,c.compareEquals=function(e,t){return e===t||null!=e&&null!=t&&e.equals(t)},c.compareIdentity=a,c._null=null,c._nan=null,n.Slice.defineDictionary=function(e,t,i,s,o,a,l,h){e[t]=void 0===l?Map:function(e){return new c(e||l)};let u=null;Object.defineProperty(e,i,{get:function(){return null===u&&(u=n.StreamHelpers.generateDictHelper(r.type(s),r.type(o),a,r.type(h),e[t])),u}})},e.exports.Ice=n},3321:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(9483),i(3239),i(1781),i(7548),i(8372),i(3793);const r=n.module("Ice");r.Slice;let s=n.module("IceSSL");s.ConnectionInfo=class extends r.ConnectionInfo{constructor(e,t,i,n,r="",s=null,o=!1){super(e,t,i,n),this.cipher=r,this.certs=s,this.verified=o}},t.IceSSL=s},3332:(e,t,i)=>{const n=i(4262).Ice,r=n.Debug;function s(e,t,i,s){switch(e){case 92:t.push("\\\\");break;case 39:t.push("\\'");break;case 34:t.push('\\"');break;case 7:s==n.ToStringMode.Compat?t.push("\\007"):t.push("\\a");break;case 8:t.push("\\b");break;case 12:t.push("\\f");break;case 10:t.push("\\n");break;case 13:t.push("\\r");break;case 9:t.push("\\t");break;case 11:s==n.ToStringMode.Compat?t.push("\\013"):t.push("\\v");break;default:{const o=String.fromCharCode(e);if(null!==i&&-1!==i.indexOf(o))t.push("\\"),t.push(o);else if(e<32||e>126)if(s===n.ToStringMode.Compat){r.assert(e<256),t.push("\\");const i=e.toString(8);for(let e=i.length;e<3;e++)t.push("0");t.push(i)}else if(e<32||127==e||s===n.ToStringMode.ASCII){t.push("\\u");const i=e.toString(16);for(let e=i.length;e<4;e++)t.push("0");t.push(i)}else t.push(o);else t.push(o);break}}}function o(e,t){const i=e.charCodeAt(t);if(i<32||127===i){let n;throw n=t>0?"character after `"+e.substring(0,t)+"'":"first character",n+=" has invalid ordinal value"+i,new RangeError(n)}return e.charAt(t)}function a(e,t,i,n,s){if(r.assert(t>=0),r.assert(t<i),r.assert(i<=e.length),"\\"!=e.charAt(t))s.push(o(e,t++));else if(t+1===i)++t,s.push("\\");else{let a=e.charAt(++t);switch(a){case"\\":case"'":case'"':case"?":++t,s.push(a);break;case"a":++t,s.append("");break;case"b":++t,s.push("\b");break;case"f":++t,s.push("\f");break;case"n":++t,s.push("\n");break;case"r":++t,s.push("\r");break;case"t":++t,s.push("\t");break;case"v":++t,s.push("\v");break;case"u":case"U":{let n=0;const r="u"===a;let o=r?4:8;for(++t;o>0&&t<i;){let i=e.charCodeAt(t++);if(i>=48&&i<=57)i-=48;else if(i>=97&&i<=102)i+=-87;else{if(!(i>=65&&i<=70))break;i+=-55}n=16*n+i,--o}if(o>0)throw new RangeError("Invalid universal character name: too few hex digits");if(n>=55296&&n<=57343)throw new RangeError("A universal character name cannot designate a surrogate");r||n<=65535?s.push(String.fromCharCode(n)):s.push(String.fromCodePoint(n));break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"x":{const n=[];let o=!0;for(;o;){let s=0;if("x"===a){let n=2;for(++t;n>0&&t<i;){let i=e.charCodeAt(t++);if(i>=48&&i<=57)i-=48;else if(i>=97&&i<=102)i+=-87;else{if(!(i>=65&&i<=70))break;i+=-55}s=16*s+i,--n}if(2===n)throw new RangeError("Invalid \\x escape sequence: no hex digit")}else{for(let n=0;n<3&&t<i;++n){const i=e.charCodeAt(t++)-"0".charCodeAt(0);if(i<0||i>7){--t,r.assert(0!==n);break}s=8*s+i}if(s>255)throw new RangeError("octal value \\"+s.toString(8)+" ("+s+") is out of range")}if(n.push(String.fromCharCode(s)),o=!1,t+1<i&&"\\"===e.charAt(t)){a=e.charAt(t+1);const i=e.charCodeAt(t+1);("x"===a||i>=48&&i<=57)&&(t++,o=!0)}}s.push(decodeURIComponent(escape(n.join(""))));break}default:null!==n&&0!==n.length&&-1!==n.indexOf(a)||s.push("\\"),s.push(o(e,t++))}}return t}n.StringUtil=class{static findFirstOf(e,t,i){for(let n=i=void 0===i?0:i;n<e.length;n++){const i=e.charAt(n);if(-1!=t.indexOf(i))return n}return-1}static findFirstNotOf(e,t,i){for(let n=i=void 0===i?0:i;n<e.length;n++){const i=e.charAt(n);if(-1==t.indexOf(i))return n}return-1}static escapeString(e,t,i){if(null!==(t=void 0===t?null:t))for(let e=0;e<t.length;++e)if(t.charCodeAt(e)<32||t.charCodeAt(e)>126)throw new RangeError("special characters must be in ASCII range 32-126");const o=[];if(i===n.ToStringMode.Compat){const n=unescape(encodeURIComponent(e));for(let e=0;e<n.length;++e)s(n.charCodeAt(e),o,t,i)}else for(let a=0;a<e.length;++a){const c=e.charCodeAt(a);if(i===n.ToStringMode.Unicode||c<55296||c>57343)s(c,o,t,i);else{if(r.assert(i===n.ToStringMode.ASCII&&c>=55296&&c<=57343),a+1===e.length)throw new RangeError("High surrogate without low surrogate");{const t=e.codePointAt(a);r.assert(t>65535),a++,o.push("\\U");const i=t.toString(16);for(let e=i.length;e<8;e++)o.push("0");o.push(i)}}}return o.join("")}static unescapeString(e,t,i,n){if(t=void 0===t?0:t,i=void 0===i?e.length:i,n=void 0===n?null:n,r.assert(t>=0&&t<=i&&i<=e.length),null!==n)for(let e=0;e<n.length;++e)if(n.charCodeAt(e)<32||n.charCodeAt(e)>126)throw new RangeError("special characters must be in ASCII range 32-126");let s=e.indexOf("\\",t);if(-1==s||s>=i){for(s=t;s<i;)o(e,s++);return e.substring(t,i)}{const r=[];for(;t<i;)t=a(e,t,i,n,r);return r.join("")}}static splitString(e,t){const i=[];let n="",r=0,s=null;for(;r<e.length;)if(null!==s||'"'!==e.charAt(r)&&"'"!==e.charAt(r)){if(null===s&&"\\"===e.charAt(r)&&r+1<e.length&&('"'===e.charAt(r+1)||"'"===e.charAt(r+1)))++r;else if(null!==s&&"\\"===e.charAt(r)&&r+1<e.length&&e.charAt(r+1)===s)++r;else{if(null!==s&&e.charAt(r)===s){++r,s=null;continue}if(-1!==t.indexOf(e.charAt(r))&&null===s){++r,n.length>0&&(i.push(n),n="");continue}}r<e.length&&(n+=e.charAt(r++))}else s=e.charAt(r++);return n.length>0&&i.push(n),null!==s?null:i}static checkQuote(e,t){t=void 0===t?0:t;const i=e.charAt(t);if('"'==i||"'"==i){let n;for(t++;t<e.length&&-1!=(n=e.indexOf(i,t));){if("\\"!=e.charAt(n-1))return n;t=n+1}return-1}return 0}static hashCode(e){let t=0;for(let i=0;i<e.length;i++)t=31*t+e.charCodeAt(i);return t}static toInt(e){const t=parseInt(e,10);if(isNaN(t))throw new RangeError("conversion of `"+e+"' to int failed");return t}},e.exports.Ice=n},3418:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice"),s=r.Slice;s.defineSequence(r,"BoolSeqHelper","Ice.BoolHelper",!0),s.defineSequence(r,"ByteSeqHelper","Ice.ByteHelper",!0),s.defineSequence(r,"ShortSeqHelper","Ice.ShortHelper",!0),s.defineSequence(r,"IntSeqHelper","Ice.IntHelper",!0),s.defineSequence(r,"LongSeqHelper","Ice.LongHelper",!0),s.defineSequence(r,"FloatSeqHelper","Ice.FloatHelper",!0),s.defineSequence(r,"DoubleSeqHelper","Ice.DoubleHelper",!0),s.defineSequence(r,"StringSeqHelper","Ice.StringHelper",!1),s.defineSequence(r,"ObjectSeqHelper","Ice.ObjectHelper",!1,"Ice.Value"),s.defineSequence(r,"ObjectProxySeqHelper","Ice.ObjectPrx",!1),t.Ice=r},3538:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(7622),i(8880),i(7868),i(9204),i(9678),i(7613),i(374),n.module("IceGrid")},3542:(e,t,i)=>{const n=i(5908).A,r={},s=n.Property;r.IceProps=[new s("/^Ice.AcceptClassCycles/",!1,null),new s("/^Ice.ACM.Client/",!0,null),new s("/^Ice.ACM.Server/",!0,null),new s("/^Ice.ACM.Timeout/",!1,null),new s("/^Ice.ACM.Heartbeat/",!1,null),new s("/^Ice.ACM.Close/",!1,null),new s("/^Ice.ACM/",!1,null),new s("/^Ice.ACM.Client.Timeout/",!1,null),new s("/^Ice.ACM.Client.Heartbeat/",!1,null),new s("/^Ice.ACM.Client.Close/",!1,null),new s("/^Ice.ACM.Client/",!1,null),new s("/^Ice.ACM.Server.Timeout/",!1,null),new s("/^Ice.ACM.Server.Heartbeat/",!1,null),new s("/^Ice.ACM.Server.Close/",!1,null),new s("/^Ice.ACM.Server/",!1,null),new s("/^Ice.Admin.ACM.Timeout/",!1,null),new s("/^Ice.Admin.ACM.Heartbeat/",!1,null),new s("/^Ice.Admin.ACM.Close/",!1,null),new s("/^Ice.Admin.ACM/",!1,null),new s("/^Ice.Admin.AdapterId/",!1,null),new s("/^Ice.Admin.Endpoints/",!1,null),new s("/^Ice.Admin.Locator.EndpointSelection/",!1,null),new s("/^Ice.Admin.Locator.ConnectionCached/",!1,null),new s("/^Ice.Admin.Locator.PreferSecure/",!1,null),new s("/^Ice.Admin.Locator.LocatorCacheTimeout/",!1,null),new s("/^Ice.Admin.Locator.InvocationTimeout/",!1,null),new s("/^Ice.Admin.Locator.Locator/",!1,null),new s("/^Ice.Admin.Locator.Router/",!1,null),new s("/^Ice.Admin.Locator.CollocationOptimized/",!1,null),new s("/^Ice.Admin.Locator.Context../",!1,null),new s("/^Ice.Admin.Locator/",!1,null),new s("/^Ice.Admin.PublishedEndpoints/",!1,null),new s("/^Ice.Admin.ReplicaGroupId/",!1,null),new s("/^Ice.Admin.Router.EndpointSelection/",!1,null),new s("/^Ice.Admin.Router.ConnectionCached/",!1,null),new s("/^Ice.Admin.Router.PreferSecure/",!1,null),new s("/^Ice.Admin.Router.LocatorCacheTimeout/",!1,null),new s("/^Ice.Admin.Router.InvocationTimeout/",!1,null),new s("/^Ice.Admin.Router.Locator/",!1,null),new s("/^Ice.Admin.Router.Router/",!1,null),new s("/^Ice.Admin.Router.CollocationOptimized/",!1,null),new s("/^Ice.Admin.Router.Context../",!1,null),new s("/^Ice.Admin.Router/",!1,null),new s("/^Ice.Admin.ProxyOptions/",!1,null),new s("/^Ice.Admin.ThreadPool.Size/",!1,null),new s("/^Ice.Admin.ThreadPool.SizeMax/",!1,null),new s("/^Ice.Admin.ThreadPool.SizeWarn/",!1,null),new s("/^Ice.Admin.ThreadPool.StackSize/",!1,null),new s("/^Ice.Admin.ThreadPool.Serialize/",!1,null),new s("/^Ice.Admin.ThreadPool.ThreadIdleTime/",!1,null),new s("/^Ice.Admin.ThreadPool.ThreadPriority/",!1,null),new s("/^Ice.Admin.MessageSizeMax/",!1,null),new s("/^Ice.Admin.DelayCreation/",!1,null),new s("/^Ice.Admin.Enabled/",!1,null),new s("/^Ice.Admin.Facets/",!1,null),new s("/^Ice.Admin.InstanceName/",!1,null),new s("/^Ice.Admin.Logger.KeepLogs/",!1,null),new s("/^Ice.Admin.Logger.KeepTraces/",!1,null),new s("/^Ice.Admin.Logger.Properties/",!1,null),new s("/^Ice.Admin.ServerId/",!1,null),new s("/^Ice.BackgroundLocatorCacheUpdates/",!1,null),new s("/^Ice.BatchAutoFlush/",!0,null),new s("/^Ice.BatchAutoFlushSize/",!1,null),new s("/^Ice.ChangeUser/",!1,null),new s("/^Ice.ClassGraphDepthMax/",!1,null),new s("/^Ice.ClientAccessPolicyProtocol/",!1,null),new s("/^Ice.Compression.Level/",!1,null),new s("/^Ice.CollectObjects/",!1,null),new s("/^Ice.Config/",!1,null),new s("/^Ice.ConsoleListener/",!1,null),new s("/^Ice.Default.CollocationOptimized/",!1,null),new s("/^Ice.Default.EncodingVersion/",!1,null),new s("/^Ice.Default.EndpointSelection/",!1,null),new s("/^Ice.Default.Host/",!1,null),new s("/^Ice.Default.Locator.EndpointSelection/",!1,null),new s("/^Ice.Default.Locator.ConnectionCached/",!1,null),new s("/^Ice.Default.Locator.PreferSecure/",!1,null),new s("/^Ice.Default.Locator.LocatorCacheTimeout/",!1,null),new s("/^Ice.Default.Locator.InvocationTimeout/",!1,null),new s("/^Ice.Default.Locator.Locator/",!1,null),new s("/^Ice.Default.Locator.Router/",!1,null),new s("/^Ice.Default.Locator.CollocationOptimized/",!1,null),new s("/^Ice.Default.Locator.Context../",!1,null),new s("/^Ice.Default.Locator/",!1,null),new s("/^Ice.Default.LocatorCacheTimeout/",!1,null),new s("/^Ice.Default.InvocationTimeout/",!1,null),new s("/^Ice.Default.Package/",!1,null),new s("/^Ice.Default.PreferSecure/",!1,null),new s("/^Ice.Default.Protocol/",!1,null),new s("/^Ice.Default.Router.EndpointSelection/",!1,null),new s("/^Ice.Default.Router.ConnectionCached/",!1,null),new s("/^Ice.Default.Router.PreferSecure/",!1,null),new s("/^Ice.Default.Router.LocatorCacheTimeout/",!1,null),new s("/^Ice.Default.Router.InvocationTimeout/",!1,null),new s("/^Ice.Default.Router.Locator/",!1,null),new s("/^Ice.Default.Router.Router/",!1,null),new s("/^Ice.Default.Router.CollocationOptimized/",!1,null),new s("/^Ice.Default.Router.Context../",!1,null),new s("/^Ice.Default.Router/",!1,null),new s("/^Ice.Default.SlicedFormat/",!1,null),new s("/^Ice.Default.SourceAddress/",!1,null),new s("/^Ice.Default.Timeout/",!1,null),new s("/^Ice.EventLog.Source/",!1,null),new s("/^Ice.FactoryAssemblies/",!1,null),new s("/^Ice.HTTPProxyHost/",!1,null),new s("/^Ice.HTTPProxyPort/",!1,null),new s("/^Ice.ImplicitContext/",!1,null),new s("/^Ice.InitPlugins/",!1,null),new s("/^Ice.IPv4/",!1,null),new s("/^Ice.IPv6/",!1,null),new s("/^Ice.LogFile/",!1,null),new s("/^Ice.LogFile.SizeMax/",!1,null),new s("/^Ice.LogStdErr.Convert/",!1,null),new s("/^Ice.MessageSizeMax/",!1,null),new s("/^Ice.Nohup/",!1,null),new s("/^Ice.NullHandleAbort/",!1,null),new s("/^Ice.Override.CloseTimeout/",!1,null),new s("/^Ice.Override.Compress/",!1,null),new s("/^Ice.Override.ConnectTimeout/",!1,null),new s("/^Ice.Override.Timeout/",!1,null),new s("/^Ice.Override.Secure/",!1,null),new s("/^Ice.Package../",!1,null),new s("/^Ice.Plugin../",!1,null),new s("/^Ice.PluginLoadOrder/",!1,null),new s("/^Ice.PreferIPv6Address/",!1,null),new s("/^Ice.PreloadAssemblies/",!1,null),new s("/^Ice.PrintAdapterReady/",!1,null),new s("/^Ice.PrintProcessId/",!1,null),new s("/^Ice.PrintStackTraces/",!1,null),new s("/^Ice.ProgramName/",!1,null),new s("/^Ice.RetryIntervals/",!1,null),new s("/^Ice.ServerIdleTime/",!1,null),new s("/^Ice.SOCKSProxyHost/",!1,null),new s("/^Ice.SOCKSProxyPort/",!1,null),new s("/^Ice.StdErr/",!1,null),new s("/^Ice.StdOut/",!1,null),new s("/^Ice.SyslogFacility/",!1,null),new s("/^Ice.ThreadPool.Client.Size/",!1,null),new s("/^Ice.ThreadPool.Client.SizeMax/",!1,null),new s("/^Ice.ThreadPool.Client.SizeWarn/",!1,null),new s("/^Ice.ThreadPool.Client.StackSize/",!1,null),new s("/^Ice.ThreadPool.Client.Serialize/",!1,null),new s("/^Ice.ThreadPool.Client.ThreadIdleTime/",!1,null),new s("/^Ice.ThreadPool.Client.ThreadPriority/",!1,null),new s("/^Ice.ThreadPool.Server.Size/",!1,null),new s("/^Ice.ThreadPool.Server.SizeMax/",!1,null),new s("/^Ice.ThreadPool.Server.SizeWarn/",!1,null),new s("/^Ice.ThreadPool.Server.StackSize/",!1,null),new s("/^Ice.ThreadPool.Server.Serialize/",!1,null),new s("/^Ice.ThreadPool.Server.ThreadIdleTime/",!1,null),new s("/^Ice.ThreadPool.Server.ThreadPriority/",!1,null),new s("/^Ice.ThreadPriority/",!1,null),new s("/^Ice.ToStringMode/",!1,null),new s("/^Ice.Trace.Admin.Properties/",!1,null),new s("/^Ice.Trace.Admin.Logger/",!1,null),new s("/^Ice.Trace.Locator/",!1,null),new s("/^Ice.Trace.Network/",!1,null),new s("/^Ice.Trace.Protocol/",!1,null),new s("/^Ice.Trace.Retry/",!1,null),new s("/^Ice.Trace.Slicing/",!1,null),new s("/^Ice.Trace.ThreadPool/",!1,null),new s("/^Ice.UDP.RcvSize/",!1,null),new s("/^Ice.UDP.SndSize/",!1,null),new s("/^Ice.TCP.Backlog/",!1,null),new s("/^Ice.TCP.RcvSize/",!1,null),new s("/^Ice.TCP.SndSize/",!1,null),new s("/^Ice.UseApplicationClassLoader/",!1,null),new s("/^Ice.UseOSLog/",!1,null),new s("/^Ice.UseSyslog/",!1,null),new s("/^Ice.UseSystemdJournal/",!1,null),new s("/^Ice.Warn.AMICallback/",!1,null),new s("/^Ice.Warn.Connections/",!1,null),new s("/^Ice.Warn.Datagrams/",!1,null),new s("/^Ice.Warn.Dispatch/",!1,null),new s("/^Ice.Warn.Endpoints/",!1,null),new s("/^Ice.Warn.UnknownProperties/",!1,null),new s("/^Ice.Warn.UnusedProperties/",!1,null),new s("/^Ice.CacheMessageBuffers/",!1,null),new s("/^Ice.ThreadInterruptSafe/",!1,null)],r.validProps=[r.IceProps],r.clPropNames=["Ice"],n.PropertyNames=r,e.exports.Ice=n},3574:()=>{},3637:(e,t,i)=>{const n=i(8846).Ice;n.Address=class{constructor(e,t){this.host=e,this.port=t}},e.exports.Ice=n},3643:(e,t,i)=>{const n=i(9483).Ice,r=n.Long,s="BufferOverflowException",o="BufferUnderflowException",a="IndexOutOfBoundsException";n.Buffer=class{constructor(e){void 0!==e?(this.b=e,this.v=new DataView(this.b),this._limit=this.b.byteLength):(this.b=null,this.v=null,this._limit=0),this._position=0,this._shrinkCounter=0}empty(){return 0===this._limit}resize(e){0===e?this.clear():e>this.capacity&&this.reserve(e),this._limit=e}clear(){this.b=null,this.v=null,this._position=0,this._limit=0}expand(e){const t=0===this.capacity?e:this._position+e;t>this._limit&&this.resize(t)}reset(){this._limit>0&&2*this._limit<this.capacity?++this._shrinkCounter>2&&(this.reserve(this._limit),this._shrinkCounter=0):this._shrinkCounter=0,this._limit=this.capacity(),this._position=0}reserve(e){if(e>this.capacity){const t=Math.max(1024,Math.max(e,2*this.capacity));if(this.b){const e=new Uint8Array(t);e.set(new Uint8Array(this.b)),this.b=e.buffer}else this.b=new ArrayBuffer(t);this.v=new DataView(this.b)}else e<this.capacity&&(this.b=this.b.slice(0,e),this.v=new DataView(this.b))}put(e){if(this._position===this._limit)throw new RangeError(s);this.v.setUint8(this._position,e),this._position++}putAt(e,t){if(e>=this._limit)throw new RangeError(a);this.v.setUint8(e,t)}putArray(e){if(!(e instanceof Uint8Array))throw new TypeError("argument is not a Uint8Array");if(e.byteLength>0){if(this._position+e.length>this._limit)throw new RangeError(s);new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position),this._position+=e.byteLength}}putShort(e){if(this._position+2>this._limit)throw new RangeError(s);this.v.setInt16(this._position,e,!0),this._position+=2}putInt(e){if(this._position+4>this._limit)throw new RangeError(s);this.v.setInt32(this._position,e,!0),this._position+=4}putIntAt(e,t){if(e+4>this._limit||e<0)throw new RangeError(a);this.v.setInt32(e,t,!0)}putFloat(e){if(this._position+4>this._limit)throw new RangeError(s);this.v.setFloat32(this._position,e,!0),this._position+=4}putDouble(e){if(this._position+8>this._limit)throw new RangeError(s);this.v.setFloat64(this._position,e,!0),this._position+=8}putLong(e){if(this._position+8>this._limit)throw new RangeError(s);this.v.setInt32(this._position,e.low,!0),this._position+=4,this.v.setInt32(this._position,e.high,!0),this._position+=4}writeString(e,t){const i=unescape(encodeURIComponent(t));e.writeSize(i.length),e.expand(i.length),this.putString(i,i.length)}putString(e,t){if(this._position+t>this._limit)throw new RangeError(s);for(let i=0;i<t;++i)this.v.setUint8(this._position,e.charCodeAt(i)),this._position++}get(){if(this._position>=this._limit)throw new RangeError(o);const e=this.v.getUint8(this._position);return this._position++,e}getAt(e){if(e<0||e>=this._limit)throw new RangeError(a);return this.v.getUint8(e)}getArray(e){if(this._position+e>this._limit)throw new RangeError(o);const t=this.b.slice(this._position,this._position+e);return this._position+=e,new Uint8Array(t)}getArrayAt(e,t){if(e+t>this._limit)throw new RangeError(o);return new Uint8Array(this.b.slice(e,e+t===void 0?this.b.byteLength-e:t))}getShort(){if(this._limit-this._position<2)throw new RangeError(o);const e=this.v.getInt16(this._position,!0);return this._position+=2,e}getInt(){if(this._limit-this._position<4)throw new RangeError(o);const e=this.v.getInt32(this._position,!0);return this._position+=4,e}getFloat(){if(this._limit-this._position<4)throw new RangeError(o);const e=this.v.getFloat32(this._position,!0);return this._position+=4,e}getDouble(){if(this._limit-this._position<8)throw new RangeError(o);const e=this.v.getFloat64(this._position,!0);return this._position+=8,e}getLong(){if(this._limit-this._position<8)throw new RangeError(o);const e=this.v.getUint32(this._position,!0);this._position+=4;const t=this.v.getUint32(this._position,!0);return this._position+=4,new r(t,e)}getString(e){if(this._position+e>this._limit)throw new RangeError(o);const t=new DataView(this.b,this._position,e);let i="";for(let n=0;n<e;++n)i+=String.fromCharCode(t.getUint8(n));return this._position+=e,decodeURIComponent(escape(i))}get position(){return this._position}set position(e){e>=0&&e<=this._limit&&(this._position=e)}get limit(){return this._limit}set limit(e){e<=this.capacity&&(this._limit=e,this._position>e&&(this._position=e))}get capacity(){return null===this.b?0:this.b.byteLength}get remaining(){return this._limit-this._position}},e.exports.Ice=n},3652:(e,t,i)=>{const n=i(8846).Ice;let r={};if("undefined"!=typeof process)r=class{},r.setTimeout=setTimeout,r.clearTimeout=clearTimeout,r.setInterval=setInterval,r.clearInterval=clearInterval,r.setImmediate=setImmediate,n.Timer=r;else{function s(){return-1!==navigator.userAgent.indexOf("MSIE")||navigator.userAgent.match(/Trident.*rv:11\./)}const a=Number.MAX_SAFE_INTEGER||9007199254740991;let c=0;const l=function(){return c==a&&(c=0),c++},h=new Map;function o(){const e=class{static setTimeout(e,t){return setTimeout(e,t)}static clearTimeout(e){return clearTimeout(e)}static setInterval(e,t){return setInterval(e,t)}static clearInterval(e){return clearInterval(e)}};if(/Edge/.test(navigator.userAgent)||s())e.setImmediate=function(e){setImmediate(e)};else{const t=new MessageChannel;t.port1.onmessage=e=>{const t=e.data,i=h.get(t);void 0!==i&&(i.call(),h.delete(t))},e.setImmediate=function(e){const i=l();h.set(i,e),t.port2.postMessage(i)}}return e}const u=0,d=1,p=2,_=3,g=4;let m;class f{static setTimeout(e,t){const i=l();return h.set(i,e),m.postMessage({type:u,id:i,ms:t}),i}static clearTimeout(e){h.delete(e),m.postMessage({type:_,id:e})}static setInterval(e,t){const i=l();return h.set(i,e),m.postMessage({type:d,id:i,ms:t}),i}static clearInterval(e){h.delete(e),m.postMessage({type:g,id:e})}static setImmediate(e){const t=l();return h.set(t,e),m.postMessage({type:p,id:t}),t}static onmessage(e){const t=h.get(e.data.id);void 0!==t&&(t.call(),e.data.type!==d&&h.delete(e.data.id))}}const y=function(){return"("+function(){const e={};self.onmessage=t=>{0==t.data.type?e[t.data.id]=setTimeout(()=>self.postMessage(t.data),t.data.ms):1==t.data.type?e[t.data.id]=setInterval(()=>self.postMessage(t.data),t.data.ms):2==t.data.type?self.postMessage(t.data):3==t.data.type?(clearTimeout(e[t.data.id]),delete e[t.data.id]):4==t.data.type&&(clearInterval(e[t.data.id]),delete e[t.data.id])}}.toString()+"());"};if(s())n.Timer=o();else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope)n.Timer=o();else if(void 0===m){const S=URL.createObjectURL(new Blob([y()],{type:"text/javascript"}));m=new Worker(S),m.onmessage=f.onmessage,n.Timer=f}}e.exports.Ice=n},3726:(e,t,i)=>{const n=i(8846).Ice;i(3637),i(4269),i(1781),i(4997),i(3332);const r=n.Address,s=n.EndpointParseException,o=n.HashUtil,a=n.StringUtil;class c extends n.EndpointI{constructor(e,t,i,n,r){super(),this._instance=e,this._host=void 0===t?null:t,this._port=void 0===i?0:i,this._sourceAddr=void 0===n?null:n,this._connectionId=void 0===r?"":r}streamWrite(e){e.startEncapsulation(),this.streamWriteImpl(e),e.endEncapsulation()}getInfo(){const e=new n.IPEndpointInfo;return this.fillEndpointInfo(e),e}type(){return this._instance.type()}protocol(){return this._instance.protocol()}secure(){return this._instance.secure()}connectionId(){return this._connectionId}changeConnectionId(e){return e===this._connectionId?this:this.createEndpoint(this._host,this._port,e)}hashCode(){return void 0===this._hashCode&&(this._hashCode=this.hashInit(5381)),this._hashCode}options(){let e="";if(null!==this._host&&this._host.length>0){e+=" -h ";const t=-1!=this._host.indexOf(":");t&&(e+='"'),e+=this._host,t&&(e+='"')}if(e+=" -p "+this._port,null!==this._sourceAddr&&this._sourceAddr.length>0){e+=" --sourceAddress ";const t=-1!=this._sourceAddr.indexOf(":");t&&(e+='"'),e+=this._sourceAddr,t&&(e+='"')}return e}compareTo(e){return this===e?0:null===e?1:e instanceof c?this._port<e._port?-1:e._port<this._port?1:this._host!=e._host?this._host<e._host?-1:1:this._sourceAddr!=e._sourceAddr?this._sourceAddr<e._sourceAddr?-1:1:this._connectionId!=e._connectionId?this._connectionId<e._connectionId?-1:1:0:this.type()<e.type()?-1:1}getAddress(){return new r(this._host,this._port)}toConnectorString(){return this._host+":"+this._port}streamWriteImpl(e){e.writeString(this._host),e.writeInt(this._port)}hashInit(e){return e=o.addNumber(e,this.type()),e=o.addString(e,this._host),e=o.addNumber(e,this._port),e=o.addString(e,this._sourceAddr),o.addString(e,this._connectionId)}fillEndpointInfo(e){e.type=()=>this.type(),e.datagram=()=>this.datagram(),e.secure=()=>this.secure(),e.host=this._host,e.port=this._port,e.sourceAddress=this._sourceAddr}initWithOptions(e,t){if(super.initWithOptions(e),null===this._host||0===this._host.length)this._host=this._instance.defaultHost();else if("*"==this._host){if(!t)throw new s("`-h *' not valid for proxy endpoint `"+this+"'");this._host=""}if(null===this._host&&(this._host=""),null===this._sourceAddr)t||(this._sourceAddr=this._instance.defaultSourceAddress());else if(t)throw new s("`--sourceAddress not valid for object adapter endpoint `"+this+"'")}initWithStream(e){this._host=e.readString(),this._port=e.readInt()}checkOption(e,t,i){if("-h"===e){if(null===t)throw new s("no argument provided for -h option in endpoint "+i);this._host=t}else if("-p"===e){if(null===t)throw new s("no argument provided for -p option in endpoint "+i);try{this._port=a.toInt(t)}catch(e){throw new s("invalid port value `"+t+"' in endpoint "+i)}if(this._port<0||this._port>65535)throw new s("port value `"+t+"' out of range in endpoint "+i)}else{if("--sourceAddress"!==e)return!1;if(null===t)throw new s("no argument provided for --sourceAddress option in endpoint "+i);this._sourceAddr=t}return!0}}n.IPEndpointI=c,e.exports.Ice=n},3793:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(2676),i(1193),i(9483),i(3239),i(1781),i(7548),i(8372),i(1373),i(5527),i(8220);const r=n.module("Ice"),s=r.Slice;r.CompressBatch=s.defineEnum([["Yes",0],["No",1],["BasedOnProxy",2]]),r.ConnectionInfo=class{constructor(e=null,t=!1,i="",n=""){this.underlying=e,this.incoming=t,this.adapterName=i,this.connectionId=n}},r.ACMClose=s.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]),r.ACMHeartbeat=s.defineEnum([["HeartbeatOff",0],["HeartbeatOnDispatch",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]),r.ACM=class{constructor(e=0,t=r.ACMClose.CloseOff,i=r.ACMHeartbeat.HeartbeatOff){this.timeout=e,this.close=t,this.heartbeat=i}},s.defineStruct(r.ACM,!0,!0),r.ConnectionClose=s.defineEnum([["Forcefully",0],["Gracefully",1],["GracefullyWithWait",2]]),r.IPConnectionInfo=class extends r.ConnectionInfo{constructor(e,t,i,n,r="",s=-1,o="",a=-1){super(e,t,i,n),this.localAddress=r,this.localPort=s,this.remoteAddress=o,this.remotePort=a}},r.TCPConnectionInfo=class extends r.IPConnectionInfo{constructor(e,t,i,n,r,s,o,a,c=0,l=0){super(e,t,i,n,r,s,o,a),this.rcvSize=c,this.sndSize=l}},r.UDPConnectionInfo=class extends r.IPConnectionInfo{constructor(e,t,i,n,r,s,o,a,c="",l=-1,h=0,u=0){super(e,t,i,n,r,s,o,a),this.mcastAddress=c,this.mcastPort=l,this.rcvSize=h,this.sndSize=u}},s.defineDictionary(r,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),r.WSConnectionInfo=class extends r.ConnectionInfo{constructor(e,t,i,n,r=null){super(e,t,i,n),this.headers=r}},t.Ice=r},3844:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(5896),i(3239),i(4997),i(7168);const r=n.Debug,s=n.HashMap;class o{constructor(e){this._router=e,r.assert(null!==this._router),this._clientEndpoints=null,this._adapter=null,this._identities=new s(s.compareEquals),this._evictedIdentities=[],this._hasRoutingTable=!1}destroy(){this._clientEndpoints=[],this._adapter=null,this._identities.clear()}equals(e){return this===e||e instanceof o&&this._router.equals(e._router)}hashCode(){return this._router.hashCode()}getRouter(){return this._router}getClientEndpoints(){const e=new n.Promise;return null!==this._clientEndpoints?e.resolve(this._clientEndpoints):this._router.getClientProxy().then(t=>this.setClientEndpoints(t[0],void 0===t[1]||t[1],e)).catch(e.reject),e}getServerEndpoints(){return this._router.getServerProxy().then(e=>{if(null===e)throw new n.NoEndpointException;return(e=e.ice_router(null))._getReference().getEndpoints()})}addProxy(e){return r.assert(null!==e),this._hasRoutingTable?this._identities.has(e.ice_getIdentity())?n.Promise.resolve():this._router.addProxies([e]).then(t=>{this.addAndEvictProxies(e,t)}):n.Promise.resolve()}setAdapter(e){this._adapter=e}getAdapter(){return this._adapter}clearCache(e){this._identities.delete(e.getIdentity())}setClientEndpoints(e,t,i){null===this._clientEndpoints?(this._hasRoutingTable=t,null===e?(this._clientEndpoints=this._router._getReference().getEndpoints(),i.resolve(this._clientEndpoints)):(e=e.ice_router(null),this._router.ice_getConnection().then(t=>{this._clientEndpoints=e.ice_timeout(t.timeout())._getReference().getEndpoints(),i.resolve(this._clientEndpoints)}).catch(i.reject))):i.resolve(this._clientEndpoints)}addAndEvictProxies(e,t){const i=this._evictedIdentities.findIndex(t=>t.equals(e.ice_getIdentity()));i>=0?this._evictedIdentities.splice(i,1):this._identities.set(e.ice_getIdentity(),1),t.forEach(e=>{this._identities.delete(e.ice_getIdentity())})}}n.RouterInfo=o,e.exports.Ice=n},3852:(e,t,i)=>{const n=i(8846).Ice;i(5079),i(7422),i(4262),i(5896),i(6815),i(4650);const r=n.AsyncStatus,s=n.ConnectionRequestHandler,o=n.Debug,a=n.RetryException,c=n.ReferenceMode,l=n.LocalException;n.ConnectRequestHandler=class{constructor(e,t){this._reference=e,this._response=e.getMode()===c.ModeTwoway,this._proxy=t,this._proxies=[],this._initialized=!1,this._connection=null,this._exception=null,this._requests=[]}connect(e){return this.initialized()||this._proxies.push(e),this._requestHandler?this._requestHandler:this}update(e,t){return e===this?t:this}sendAsyncRequest(e){return this._initialized||e.cancelable(this),this.initialized()?e.invokeRemote(this._connection,this._response):(this._requests.push(e),r.Queued)}asyncRequestCanceled(e,t){if(null===this._exception){if(!this.initialized()){for(let i=0;i<this._requests.length;i++)if(this._requests[i]===e)return e.completedEx(t),void this._requests.splice(i,1);o.assert(!1)}this._connection.asyncRequestCanceled(e,t)}}getReference(){return this._reference}getConnection(){if(null!==this._exception)throw this._exception;return this._connection}setConnection(e){o.assert(null===this._exception&&null===this._connection),this._connection=e;const t=this._reference.getRouterInfo();null===t?this.flushRequests():t.addProxy(this._proxy).then(()=>this.flushRequests(),e=>this.setException(e))}setException(e){o.assert(!this._initialized&&null===this._exception),this._exception=e,this._proxies.length=0,this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(e){}this._requests.forEach(e=>{null!==e&&e.completedEx(this._exception)}),this._requests.length=0}initialized(){if(this._initialized)return o.assert(null!==this._connection),!0;if(null!==this._exception){if(null!==this._connection)return!0;throw this._exception}return this._initialized}flushRequests(){o.assert(null!==this._connection&&!this._initialized);let e=null;this._requests.forEach(t=>{try{t.invokeRemote(this._connection,this._response)}catch(i){i instanceof a?(e=i.inner,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),t.retryException(i.inner)):(o.assert(i instanceof l),e=i,t.out.completedEx(i))}}),this._requests.length=0,this._reference.getCacheConnection()&&null===e&&(this._requestHandler=new s(this._reference,this._connection),this._proxies.forEach(e=>e._updateRequestHandler(this,this._requestHandler))),o.assert(!this._initialized),this._exception=e,this._initialized=null===this._exception,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),this._proxies.length=0,this._proxy=null}},e.exports.Ice=n},3905:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(2676),i(9483),i(3239),i(1781),i(7548),i(8372),i(3418);const r=n.module("Ice"),s=r.Slice;let o=n.module("Glacier2");o.SSLInfo=class{constructor(e="",t=0,i="",n=0,r="",s=null){this.remoteHost=e,this.remotePort=t,this.localHost=i,this.localPort=n,this.cipher=r,this.certs=s}_write(e){e.writeString(this.remoteHost),e.writeInt(this.remotePort),e.writeString(this.localHost),e.writeInt(this.localPort),e.writeString(this.cipher),r.StringSeqHelper.write(e,this.certs)}_read(e){this.remoteHost=e.readString(),this.remotePort=e.readInt(),this.localHost=e.readString(),this.localPort=e.readInt(),this.cipher=e.readString(),this.certs=r.StringSeqHelper.read(e)}static get minWireSize(){return 12}},s.defineStruct(o.SSLInfo,!0,!0),t.Glacier2=o},3950:(e,t,i)=>{e=i.nmd(e),function(e,t,n){const r=i(2425).Ice,s=r._ModuleRegistry,o=r.Slice;let a=s.module("compunet");a.User=class{constructor(e="",t=""){this.id=e,this.name=t}_write(e){e.writeString(this.id),e.writeString(this.name)}_read(e){this.id=e.readString(),this.name=e.readString()}static get minWireSize(){return 2}},o.defineStruct(a.User,!0,!0),a.Message=class{constructor(e="",t="",i="",n="",s=new r.Long(0,0),o="",a=!1,c=!1,l="",h=0){this.id=e,this.senderId=t,this.senderName=i,this.content=n,this.timestamp=s,this.chatId=o,this.isGroupMessage=a,this.isAudio=c,this.audioData=l,this.audioDuration=h}_write(e){e.writeString(this.id),e.writeString(this.senderId),e.writeString(this.senderName),e.writeString(this.content),e.writeLong(this.timestamp),e.writeString(this.chatId),e.writeBool(this.isGroupMessage),e.writeBool(this.isAudio),e.writeString(this.audioData),e.writeInt(this.audioDuration)}_read(e){this.id=e.readString(),this.senderId=e.readString(),this.senderName=e.readString(),this.content=e.readString(),this.timestamp=e.readLong(),this.chatId=e.readString(),this.isGroupMessage=e.readBool(),this.isAudio=e.readBool(),this.audioData=e.readString(),this.audioDuration=e.readInt()}static get minWireSize(){return 20}},o.defineStruct(a.Message,!0,!0),a.ChatSummary=class{constructor(e="",t="",i="",n=new r.Long(0,0),s=!1){this.chatId=e,this.chatName=t,this.lastMessageContent=i,this.lastMessageTimestamp=n,this.isGroup=s}_write(e){e.writeString(this.chatId),e.writeString(this.chatName),e.writeString(this.lastMessageContent),e.writeLong(this.lastMessageTimestamp),e.writeBool(this.isGroup)}_read(e){this.chatId=e.readString(),this.chatName=e.readString(),this.lastMessageContent=e.readString(),this.lastMessageTimestamp=e.readLong(),this.isGroup=e.readBool()}static get minWireSize(){return 12}},o.defineStruct(a.ChatSummary,!0,!0),o.defineSequence(a,"StringSeqHelper","Ice.StringHelper",!1),o.defineSequence(a,"MessageSeqHelper","compunet.Message",!1),o.defineSequence(a,"ChatSummarySeqHelper","compunet.ChatSummary",!1),o.defineSequence(a,"UserSeqHelper","compunet.User",!1),a.ClientCallback=class extends r.Object{},a.ClientCallbackPrx=class extends r.ObjectPrx{},o.defineOperations(a.ClientCallback,a.ClientCallbackPrx,["::Ice::Object","::compunet::ClientCallback"],1,{onNewMessage:[,,,,,[[a.Message]],,,,],onNewGroup:[,,,,,[[a.ChatSummary]],,,,]}),a.ChatService=class extends r.Object{},a.ChatServicePrx=class extends r.ObjectPrx{},o.defineOperations(a.ChatService,a.ChatServicePrx,["::Ice::Object","::compunet::ChatService"],1,{registerUser:[,,,,,[[7],[7]],,,,],getUser:[,,,,[a.User],[[7]],,,,],getAllUsers:[,,,,["compunet.UserSeqHelper"],,,,,],sendDirectMessage:[,,,,,[[7],[7],[7]],,,,],sendDirectAudio:[,,,,,[[7],[7],[7],[3]],,,,],getDirectChatMessages:[,,,,["compunet.MessageSeqHelper"],[[7],[7]],,,,],getUserDirectChats:[,,,,["compunet.ChatSummarySeqHelper"],[[7]],,,,],registerCallback:[,,,,,[["compunet.ClientCallbackPrx"],[7]],,,,],unregisterCallback:[,,,,,[[7]],,,,]}),a.GroupService=class extends r.Object{},a.GroupServicePrx=class extends r.ObjectPrx{},o.defineOperations(a.GroupService,a.GroupServicePrx,["::Ice::Object","::compunet::GroupService"],1,{createGroup:[,,,,[7],[[7],[7],["compunet.StringSeqHelper"]],,,,],addMembersToGroup:[,,,,,[[7],["compunet.StringSeqHelper"]],,,,],getGroupMembers:[,,,,["compunet.StringSeqHelper"],[[7]],,,,],sendGroupMessage:[,,,,,[[7],[7],[7]],,,,],sendGroupAudio:[,,,,,[[7],[7],[7],[3]],,,,],getGroupChatMessages:[,,,,["compunet.MessageSeqHelper"],[[7]],,,,],getUserGroupChats:[,,,,["compunet.ChatSummarySeqHelper"],[[7]],,,,]}),n.compunet=a}(0,0,t)},3991:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice,t.Ice=r},4190:(e,t,i)=>{const n=i(3643).Ice,r="A".charCodeAt(0),s="a".charCodeAt(0),o="0".charCodeAt(0);function a(e){return e<26?String.fromCharCode(r+e):e<52?String.fromCharCode(s+(e-26)):e<62?String.fromCharCode(o+(e-52)):62==e?"+":"/"}function c(e){return e>="A"&&e<="Z"?e.charCodeAt(0)-r:e>="a"&&e<="z"?e.charCodeAt(0)-s+26:e>="0"&&e<="9"?e.charCodeAt(0)-o+52:"+"==e?62:63}class l{static encode(e){if(null===e||0===e.length)return"";const t=[];let i,n,r,s,o,c,l;for(let h=0;h<e.length;h+=3)i=255&e[h],n=0,r=0,h+1<e.length&&(n=255&e[h+1]),h+2<e.length&&(r=255&e[h+2]),s=i>>2&255,o=255&((3&i)<<4|n>>4),c=255&((15&n)<<2|r>>6),l=63&r,t.push(a(s)),t.push(a(o)),h+1<e.length?t.push(a(c)):t.push("="),h+2<e.length?t.push(a(l)):t.push("=");const h=t.join(""),u=[];let d=0;for(;h.length-d>76;)u.push(h.substring(d,d+76)),u.push("\r\n"),d+=76;return u.push(h.substring(d)),u.join("")}static decode(e){const t=[];for(let i=0;i<e.length;i++){const n=e.charAt(i);l.isBase64(n)&&t.push(n)}if(0===t.length)return null;const i=3*t.length/4+1,r=new n.Buffer;let s,o,a,h,u,d,p,_;r.resize(i);for(let e=0;e<t.length;e+=4)u="A",d="A",p="A",_="A",u=t[e],e+1<t.length&&(d=t[e+1]),e+2<t.length&&(p=t[e+2]),e+3<t.length&&(_=t[e+3]),s=255&c(u),o=255&c(d),a=255&c(p),h=255&c(_),r.put(s<<2|o>>4),"="!=p&&r.put((15&o)<<4|a>>2),"="!=_&&r.put((3&a)<<6|h);return r.remaining>0?r.getArrayAt(0,r.position):r.getArrayAt(0)}static isBase64(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"||"+"==e||"/"==e||"="==e}}n.Base64=l,e.exports.Ice=n},4262:(e,t,i)=>{const n=i(8846).Ice;i(5896);let r={};if("undefined"!=typeof process){const e=i(3574);r=class{static assert(t,i){t||(e.writeSync(process.stderr.fd,void 0===i?"assertion failed":i),e.writeSync(process.stderr.fd,(new Error).stack),process.exit(1))}}}else{class e extends Error{constructor(e){super(),n.Exception.captureStackTrace(this),this.message=e}}n.AssertionFailedException=e,r=class{static assert(e,t){if(!e)throw console.log(void 0===t?"assertion failed":t),console.log((new Error).stack),new n.AssertionFailedException(void 0===t?"assertion failed":t)}}}n.Debug=r,e.exports.Ice=n},4269:(e,t,i)=>{const n=i(8220).Ice;class r{toString(){return this.protocol()+this.options()}initWithOptions(e){const t=[];let i="`"+this.protocol();for(let t=0;t<e.length;++t)-1!==e[t].search(/[ \t\n\r]+/)?i+=' "'+e[t]+'"':i+=" "+e[t];i+="'";for(let n=0;n<e.length;){const r=e[n++];if(r.length<2||"-"!=r.charAt(0)){t.push(r);continue}let s=null;n<e.length&&"-"!=e[n].charAt(0)&&(s=e[n++]),this.checkOption(r,s,i)||(t.push(r),null!==s&&t.push(s))}e.length=0;for(let i=0;i<t.length;i++)e.push(t[i])}equals(e){return e instanceof r&&0===this.compareTo(e)}checkOption(){return!1}}n.EndpointI=r,e.exports.Ice=n},4277:(e,t,i)=>{const n=i(8846).Ice;i(3239),i(2368),i(3844);const r=n.HashMap,s=n.RouterInfo,o=n.RouterPrx;n.RouterManager=class{constructor(){this._table=new r(r.compareEquals)}destroy(){for(const e of this._table.values())e.destroy();this._table.clear()}find(e){if(null===e)return null;const t=o.uncheckedCast(e.ice_router(null));let i=this._table.get(t);return void 0===i&&(i=new s(t),this._table.set(t,i)),i}erase(e){let t=null;if(null!==e){const i=o.uncheckedCast(e.ice_router(null));t=this._table.get(i),this._table.delete(i)}return t}},e.exports.Ice=n},4375:(e,t,i)=>{const n=i(8846).Ice;n.SocketOperation={None:0,Read:1,Write:2,Connect:2},e.exports.Ice=n},4381:(e,t,i)=>{const n=i(8846).Ice;i(2459),i(2698),i(4997),i(9157);const r=n.FormatType,s=n.EndpointSelectionType,o=n.Protocol;n.DefaultsAndOverrides=class{constructor(e,t){this.defaultProtocol=e.getPropertyWithDefault("Ice.Default.Protocol",null!==n.TcpTransceiver?"tcp":"ws");let i=e.getProperty("Ice.Default.Host");if(this.defaultHost=i.length>0?i:null,i=e.getProperty("Ice.Default.SourceAddress"),this.defaultSourceAddress=i.length>0?i:null,i=e.getProperty("Ice.Override.Timeout"),i.length>0?(this.overrideTimeout=!0,this.overrideTimeoutValue=e.getPropertyAsInt("Ice.Override.Timeout"),this.overrideTimeoutValue<1&&-1!==this.overrideTimeoutValue&&(this.overrideTimeoutValue=-1,t.warning("invalid value for Ice.Override.Timeout `"+e.getProperty("Ice.Override.Timeout")+"': defaulting to -1"))):(this.overrideTimeout=!1,this.overrideTimeoutValue=-1),i=e.getProperty("Ice.Override.ConnectTimeout"),i.length>0?(this.overrideConnectTimeout=!0,this.overrideConnectTimeoutValue=e.getPropertyAsInt("Ice.Override.ConnectTimeout"),this.overrideConnectTimeoutValue<1&&-1!==this.overrideConnectTimeoutValue&&(this.overrideConnectTimeoutValue=-1,t.warning("invalid value for Ice.Override.ConnectTimeout `"+e.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1"))):(this.overrideConnectTimeout=!1,this.overrideConnectTimeoutValue=-1),i=e.getProperty("Ice.Override.CloseTimeout"),i.length>0?(this.overrideCloseTimeout=!0,this.overrideCloseTimeoutValue=e.getPropertyAsInt("Ice.Override.CloseTimeout"),this.overrideCloseTimeoutValue<1&&-1!==this.overrideCloseTimeoutValue&&(this.overrideCloseTimeoutValue=-1,t.warning("invalid value for Ice.Override.CloseTimeout `"+e.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1"))):(this.overrideCloseTimeout=!1,this.overrideCloseTimeoutValue=-1),this.overrideSecure=!1,i=e.getPropertyWithDefault("Ice.Default.EndpointSelection","Random"),"Random"===i)this.defaultEndpointSelection=s.Random;else{if("Ordered"!==i){const e=new n.EndpointSelectionTypeParseException;throw e.str="illegal value `"+i+"'; expected `Random' or `Ordered'",e}this.defaultEndpointSelection=s.Ordered}this.defaultTimeout=e.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4),this.defaultTimeout<1&&-1!==this.defaultTimeout&&(this.defaultTimeout=6e4,t.warning("invalid value for Ice.Default.Timeout `"+e.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")),this.defaultLocatorCacheTimeout=e.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1),this.defaultLocatorCacheTimeout<-1&&(this.defaultLocatorCacheTimeout=-1,t.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+e.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")),this.defaultInvocationTimeout=e.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1),this.defaultInvocationTimeout<1&&-1!==this.defaultInvocationTimeout&&(this.defaultInvocationTimeout=-1,t.warning("invalid value for Ice.Default.InvocationTimeout `"+e.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")),this.defaultPreferSecure=e.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0,i=e.getPropertyWithDefault("Ice.Default.EncodingVersion",n.encodingVersionToString(o.currentEncoding)),this.defaultEncoding=n.stringToEncodingVersion(i),o.checkSupportedEncoding(this.defaultEncoding);const a=e.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=a?r.SlicedFormat:r.CompactFormat}},e.exports.Ice=n},4650:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(4997);class r extends Error{constructor(e){super(),e instanceof n.LocalException?this._ex=e:(n.Debug.assert(e instanceof r),this._ex=e._ex)}get inner(){return this._ex}}n.RetryException=r,e.exports.Ice=n},4652:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(7788),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice"),s=r.Slice;r.Process=class extends r.Object{},r.ProcessPrx=class extends r.ObjectPrx{},s.defineOperations(r.Process,r.ProcessPrx,["::Ice::Object","::Ice::Process"],1,{shutdown:[,,,,,,,,,],writeMessage:[,,,,,[[7],[3]],,,,]}),t.Ice=r},4726:(e,t,i)=>{const n=i(8846).Ice;i(5079),i(701),i(7879),i(4262),i(6352),i(3239),i(7081),i(4650),i(7168),i(9157),i(4375),i(1216),i(3016),i(2713),i(5896),i(4997),i(7149);const r=n.AsyncStatus,s=n.AsyncResultBase,o=n.InputStream,a=n.OutputStream,c=n.BatchRequestQueue,l=n.ConnectionFlushBatch,h=n.HeartbeatAsync,u=n.Debug,d=n.ExUtil,p=n.HashMap,_=n.IncomingAsync,g=n.RetryException,m=n.Protocol,f=n.SocketOperation,y=n.Timer,S=n.TraceUtil,w=n.ProtocolVersion,x=n.EncodingVersion,I=n.ACM,E=n.ACMClose,v=n.ACMHeartbeat,b=n.ConnectionClose;class C{constructor(e){this.stream=new o(e,m.currentProtocolEncoding),this.invokeNum=0,this.requestId=0,this.servantManager=null,this.adapter=null,this.outAsync=null,this.heartbeatCallback=null}}class P{constructor(e,t,i,n,r,s,l){this._communicator=e,this._instance=t,this._monitor=i,this._transceiver=n,this._desc=n.toString(),this._type=n.type(),this._endpoint=r,this._incoming=s,this._adapter=l;const h=t.initializationData();this._logger=h.logger,this._traceLevels=t.traceLevels(),this._timer=t.timer(),this._writeTimeoutId=0,this._writeTimeoutScheduled=!1,this._readTimeoutId=0,this._readTimeoutScheduled=!1,this._hasMoreData={value:!1},this._warn=h.properties.getPropertyAsInt("Ice.Warn.Connections")>0,this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0,this._acmLastActivity=null!==this._monitor&&this._monitor.getACM().timeout>0?Date.now():-1,this._nextRequestId=1,this._messageSizeMax=l?l.messageSizeMax():t.messageSizeMax(),this._batchRequestQueue=new c(t,r.datagram()),this._sendStreams=[],this._readStream=new o(t,m.currentProtocolEncoding),this._readHeader=!1,this._writeStream=new a(t,m.currentProtocolEncoding),this._readStreamPos=-1,this._writeStreamPos=-1,this._dispatchCount=0,this._state=0,this._shutdownInitiated=!1,this._initialized=!1,this._validated=!1,this._readProtocol=new w,this._readProtocolEncoding=new x,this._asyncRequests=new p,this._exception=null,this._startPromise=null,this._closePromises=[],this._finishedPromises=[],null!==this._adapter?this._servantManager=this._adapter.getServantManager():this._servantManager=null,this._closeCallback=null,this._heartbeatCallback=null}start(){u.assert(null===this._startPromise);try{if(this._state>=5)return u.assert(null!==this._exception),n.Promise.reject(this._exception);this._startPromise=new n.Promise,this._transceiver.setCallbacks(()=>this.message(f.Write),()=>this.message(f.Read),()=>this.message(f.Write)),this.initialize()}catch(e){const t=this._startPromise;return this.exception(e),t}return this._startPromise}activate(){this._state<=1||(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.setState(2))}hold(){this._state<=1||this.setState(3)}destroy(e){switch(e){case P.ObjectAdapterDeactivated:this.setState(4,new n.ObjectAdapterDeactivatedException);break;case P.CommunicatorDestroyed:this.setState(4,new n.CommunicatorDestroyedException);break;default:u.assert(!1)}}close(e){const t=new s(this._communicator,"close",this,null,null);return e==b.Forcefully?(this.setState(5,new n.ConnectionManuallyClosedException(!1)),t.resolve()):e==b.Gracefully?(this.setState(4,new n.ConnectionManuallyClosedException(!0)),t.resolve()):(u.assert(e==b.GracefullyWithWait),this._closePromises.push(t),this.checkClose()),t}checkClose(){0===this._asyncRequests.size&&this._closePromises.length>0&&y.setImmediate(()=>{this.setState(4,new n.ConnectionManuallyClosedException(!0)),this._closePromises.forEach(e=>e.resolve()),this._closePromises=[]})}isActiveOrHolding(){return this._state>1&&this._state<4}isFinished(){return 6===this._state&&0===this._dispatchCount&&(u.assert(6===this._state),!0)}throwException(){if(null!==this._exception)throw u.assert(this._state>=4),this._exception}waitUntilFinished(){const e=new n.Promise;return this._finishedPromises.push(e),this.checkState(),e}monitor(e,t){2===this._state&&((t.heartbeat==n.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=n.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4)&&(t.heartbeat!=n.ACMHeartbeat.HeartbeatOnDispatch||this._dispatchCount>0)&&this.sendHeartbeatNow(),this._readStream.size>m.headerSize||!this._writeStream.isEmpty()||t.close!=n.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout&&(t.close==n.ACMClose.CloseOnIdleForceful||t.close!=n.ACMClose.CloseOnIdle&&this._asyncRequests.size>0?this.setState(5,new n.ConnectionTimeoutException):t.close!=n.ACMClose.CloseOnInvocation&&0===this._dispatchCount&&this._batchRequestQueue.isEmpty()&&0===this._asyncRequests.size&&this.setState(4,new n.ConnectionTimeoutException)))}sendAsyncRequest(e,t,i){let r=0;const s=e.getOs();if(null!==this._exception)throw new g(this._exception);let o;u.assert(this._state>1),u.assert(this._state<4),this._transceiver.checkSendSize(s),e.cancelable(this),t?(r=this._nextRequestId++,r<=0&&(this._nextRequestId=1,r=this._nextRequestId++),s.pos=m.headerSize,s.writeInt(r)):i>0&&(s.pos=m.headerSize,s.writeInt(i));try{o=this.sendMessage(M.create(e,e.getOs(),r))}catch(e){throw e instanceof n.LocalException?(this.setState(5,e),u.assert(null!==this._exception),this._exception):e}return t&&this._asyncRequests.set(r,e),o}getBatchRequestQueue(){return this._batchRequestQueue}flushBatchRequests(){const e=new l(this,this._communicator,"flushBatchRequests");return e.invoke(),e}setCloseCallback(e){this._state>=5?null!==e&&y.setImmediate(()=>{try{e(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}}):this._closeCallback=e}setHeartbeatCallback(e){this._state>=5||(this._heartbeatCallback=e)}heartbeat(){const e=new h(this,this._communicator);return e.invoke(),e}setACM(e,t,i){if(void 0!==e&&e<0)throw new RangeError("invalid negative ACM timeout value");null===this._monitor||this._state>=5||(2==this._state&&this._monitor.remove(this),this._monitor=this._monitor.acm(e,t,i),2==this._state&&this._monitor.add(this),this._monitor.getACM().timeout<=0?this._acmLastActivity=-1:2==this._state&&-1==this._acmLastActivity&&(this._acmLastActivity=Date.now()))}getACM(){return null!==this._monitor?this._monitor.getACM():new I(0,E.CloseOff,v.HeartbeatOff)}asyncRequestCanceled(e,t){for(let i=0;i<this._sendStreams.length;i++){const n=this._sendStreams[i];if(n.outAsync===e)return n.requestId>0&&this._asyncRequests.delete(n.requestId),n.canceled(),0!==i&&this._sendStreams.splice(i,1),e.completedEx(t),void this.checkClose()}if(e instanceof n.OutgoingAsync)for(const[i,n]of this._asyncRequests)if(n===e)return this._asyncRequests.delete(i),e.completedEx(t),void this.checkClose()}sendResponse(e){u.assert(this._state>1);try{if(0===--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw u.assert(null!==this._exception),this._exception;this.sendMessage(M.createForStream(e,!0)),4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof n.LocalException))throw e;this.setState(5,e)}}sendNoResponse(){u.assert(this._state>1);try{if(0===--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw u.assert(null!==this._exception),this._exception;4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof n.LocalException))throw e;this.setState(5,e)}}endpoint(){return this._endpoint}setAdapter(e){if(null!==e){if(e.checkForDeactivation(),this._state<=1||this._state>=4)return;this._adapter=e,this._servantManager=e.getServantManager()}else{if(this._state<=1||this._state>=4)return;this._adapter=null,this._servantManager=null}}getAdapter(){return this._adapter}getEndpoint(){return this._endpoint}createProxy(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))}message(e){if(this._state>=5)return;this.unscheduleTimeout(e),this._hasMoreData.value=0!==(e&f.Read);let t=null;try{if(0!==(e&f.Write)&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer))return u.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(f.Write);u.assert(0===this._writeStream.buffer.remaining)}if(0!==(e&f.Read)&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer))return;u.assert(0===this._readStream.buffer.remaining),this._readHeader=!1,this._validated=!0;const e=this._readStream.pos;if(e<m.headerSize)throw new n.IllegalMessageSizeException;this._readStream.pos=0;const t=this._readStream.readByte(),i=this._readStream.readByte(),r=this._readStream.readByte(),s=this._readStream.readByte();if(t!==m.magic[0]||i!==m.magic[1]||r!==m.magic[2]||s!==m.magic[3])throw new n.BadMagicException("",new Uint8Array([t,i,r,s]));this._readProtocol._read(this._readStream),m.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding._read(this._readStream),m.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte(),this._readStream.readByte();const o=this._readStream.readInt();if(o<m.headerSize)throw new n.IllegalMessageSizeException;o>this._messageSizeMax&&d.throwMemoryLimitException(o,this._messageSizeMax),o>this._readStream.size&&this._readStream.resize(o),this._readStream.pos=e}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram())throw new n.DatagramLimitException;if(!this.read(this._readStream.buffer))return u.assert(!this._readStream.isEmpty()),void this.scheduleTimeout(f.Read);u.assert(0===this._readStream.buffer.remaining)}}if(this._state<=1){if(0===this._state&&!this.initialize())return;if(this._state<=1&&!this.validate())return;this._transceiver.unregister(),this.setState(3),null!==this._startPromise&&++this._dispatchCount}else u.assert(this._state<=4),0!==(e&f.Read)&&(t=this.parseMessage()),0!==(e&f.Write)&&this.sendNextMessage()}catch(e){if(e instanceof n.DatagramLimitException)return this._warnUdp&&this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded"),this._readStream.resize(m.headerSize),this._readStream.pos=0,void(this._readHeader=!0);if(e instanceof n.SocketException)return void this.setState(5,e);if(e instanceof n.LocalException)return void(this._endpoint.datagram()?(this._warn&&this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc),this._readStream.resize(m.headerSize),this._readStream.pos=0,this._readHeader=!0):this.setState(5,e));throw e}this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.dispatch(t),this._hasMoreData.value&&y.setImmediate(()=>this.message(f.Read))}dispatch(e){let t=0;if(null!==this._startPromise&&(this._startPromise.resolve(),this._startPromise=null,++t),null!==e&&(null!==e.outAsync&&(e.outAsync.completed(e.stream),++t),e.invokeNum>0&&this.invokeAll(e.stream,e.invokeNum,e.requestId,e.servantManager,e.adapter),e.heartbeatCallback)){try{e.heartbeatCallback(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}e.heartbeatCallback=null,++t}if(t>0&&(this._dispatchCount-=t,0===this._dispatchCount)){if(4===this._state)try{this.initiateShutdown()}catch(e){if(!(e instanceof n.LocalException))throw e;this.setState(5,e)}else 6===this._state&&this.reap();this.checkState()}}finish(){u.assert(5===this._state),this.unscheduleTimeout(f.Read|f.Write|f.Connect);const e=this._instance.traceLevels();if(this._initialized){if(e.network>=1){const t=[];t.push("closed "),t.push(this._endpoint.protocol()),t.push(" connection\n"),t.push(this.toString()),this._exception instanceof n.CloseConnectionException||this._exception instanceof n.ConnectionManuallyClosedException||this._exception instanceof n.ConnectionTimeoutException||this._exception instanceof n.CommunicatorDestroyedException||this._exception instanceof n.ObjectAdapterDeactivatedException||(t.push("\n"),t.push(this._exception.toString())),this._instance.initializationData().logger.trace(e.networkCat,t.join(""))}}else if(e.network>=2){const t=[];t.push("failed to establish "),t.push(this._endpoint.protocol()),t.push(" connection\n"),t.push(this.toString()),t.push("\n"),t.push(this._exception.toString()),this._instance.initializationData().logger.trace(e.networkCat,t.join(""))}if(null!==this._startPromise&&(this._startPromise.reject(this._exception),this._startPromise=null),this._sendStreams.length>0){this._writeStream.isEmpty()||this._writeStream.swap(this._sendStreams[0].stream);for(let e=0;e<this._sendStreams.length;++e){const t=this._sendStreams[e];t.requestId>0&&this._asyncRequests.delete(t.requestId),t.completed(this._exception)}this._sendStreams=[]}for(const e of this._asyncRequests.values())e.completedEx(this._exception);if(this._asyncRequests.clear(),this.checkClose(),this._readStream.clear(),this._readStream.buffer.clear(),this._writeStream.clear(),this._writeStream.buffer.clear(),null!==this._closeCallback){try{this._closeCallback(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}this._closeCallback=null}this._heartbeatCallback=null,0===this._dispatchCount&&this.reap(),this.setState(6)}toString(){return this._desc}timedOut(e){this._state<=1?this.setState(5,new n.ConnectTimeoutException):this._state<4?this.setState(5,new n.TimeoutException):4===this._state&&this.setState(5,new n.CloseTimeoutException)}type(){return this._type}timeout(){return this._endpoint.timeout()}getInfo(){if(this._state>=5)throw this._exception;const e=this._transceiver.getInfo();for(let t=e;null!==t;t=t.underlying)t.adapterName=null!==this._adapter?this._adapter.getName():"",t.incoming=this._incoming;return e}setBufferSize(e,t){if(this._state>=5)throw this._exception;this._transceiver.setBufferSize(e,t)}exception(e){this.setState(5,e)}invokeException(e,t){this.setState(5,e),t>0&&(u.assert(this._dispatchCount>0),this._dispatchCount-=t,u.assert(this._dispatchCount>=0),0===this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()))}setState(e,t){if(void 0!==t){if(u.assert(t instanceof n.LocalException),u.assert(e>=4),this._state===e)return;null===this._exception&&(this._exception=t,this._warn&&this._validated&&(this._exception instanceof n.CloseConnectionException||this._exception instanceof n.ConnectionManuallyClosedException||this._exception instanceof n.ConnectionTimeoutException||this._exception instanceof n.CommunicatorDestroyedException||this._exception instanceof n.ObjectAdapterDeactivatedException||this._exception instanceof n.ConnectionLostException&&4===this._state||this.warning("connection exception",this._exception)))}if(this._endpoint.datagram()&&4===e&&(e=5),this._state<=1&&4===e&&(e=5),this._state!==e){try{switch(e){case 0:default:u.assert(!1);break;case 1:if(0!==this._state)return void u.assert(5===this._state);this._endpoint.datagram()||this._incoming||this._transceiver.register();break;case 2:if(3!==this._state&&1!==this._state)return;this._transceiver.register();break;case 3:if(2!==this._state&&1!==this._state)return;2===this._state&&this._transceiver.unregister();break;case 4:if(this._state>=5)return;3===this._state&&this._transceiver.register();break;case 5:if(6===this._state)return;this._batchRequestQueue.destroy(this._exception),this._transceiver.unregister();break;case 6:u.assert(5===this._state),this._transceiver.close(),this._communicator=null}}catch(t){if(!(t instanceof n.LocalException))throw t;this._instance.initializationData().logger.error(`unexpected connection exception:\n${this._desc}\n${t.toString()}`)}if(null!==this._monitor&&(2===e?(this._monitor.add(this),this._acmLastActivity>0&&(this._acmLastActivity=Date.now())):2===this._state&&this._monitor.remove(this)),this._state=e,4===this._state&&0===this._dispatchCount)try{this.initiateShutdown()}catch(t){if(!(t instanceof n.LocalException))throw t;this.setState(5,t)}else 5===this._state&&this.finish();this.checkState()}}initiateShutdown(){if(u.assert(4===this._state&&0===this._dispatchCount),!this._shutdownInitiated&&(this._shutdownInitiated=!0,!this._endpoint.datagram())){const e=new a(this._instance,m.currentProtocolEncoding);e.writeBlob(m.magic),m.currentProtocol._write(e),m.currentProtocolEncoding._write(e),e.writeByte(m.closeConnectionMsg),e.writeByte(0),e.writeInt(m.headerSize),(this.sendMessage(M.createForStream(e,!1))&r.Sent)>0&&this.scheduleTimeout(f.Read)}}sendHeartbeatNow(){if(u.assert(2===this._state),!this._endpoint.datagram()){const e=new a(this._instance,m.currentProtocolEncoding);e.writeBlob(m.magic),m.currentProtocol._write(e),m.currentProtocolEncoding._write(e),e.writeByte(m.validateConnectionMsg),e.writeByte(0),e.writeInt(m.headerSize);try{this.sendMessage(M.createForStream(e,!1))}catch(e){this.setState(5,e),u.assert(null!==this._exception)}}}initialize(){const e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);return e!=f.None?(this.scheduleTimeout(e),!1):(this._desc=this._transceiver.toString(),this._initialized=!0,this.setState(1),!0)}validate(){if(!this._endpoint.datagram())if(null!==this._adapter){if(0===this._writeStream.size&&(this._writeStream.writeBlob(m.magic),m.currentProtocol._write(this._writeStream),m.currentProtocolEncoding._write(this._writeStream),this._writeStream.writeByte(m.validateConnectionMsg),this._writeStream.writeByte(0),this._writeStream.writeInt(m.headerSize),S.traceSend(this._writeStream,this._logger,this._traceLevels),this._writeStream.prepareWrite()),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return this.scheduleTimeout(f.Write),!1}else{if(0===this._readStream.size&&(this._readStream.resize(m.headerSize),this._readStream.pos=0),this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer))return this.scheduleTimeout(f.Read),!1;this._validated=!0,u.assert(this._readStream.pos===m.headerSize),this._readStream.pos=0;const e=this._readStream.readBlob(4);if(e[0]!==m.magic[0]||e[1]!==m.magic[1]||e[2]!==m.magic[2]||e[3]!==m.magic[3])throw new n.BadMagicException("",e);if(this._readProtocol._read(this._readStream),m.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding._read(this._readStream),m.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte()!==m.validateConnectionMsg)throw new n.ConnectionNotValidatedException;if(this._readStream.readByte(),this._readStream.readInt()!==m.headerSize)throw new n.IllegalMessageSizeException;S.traceRecv(this._readStream,this._logger,this._traceLevels)}this._writeStream.resize(0),this._writeStream.pos=0,this._readStream.resize(m.headerSize),this._readHeader=!0,this._readStream.pos=0;const e=this._instance.traceLevels();if(e.network>=1){const t=[];this._endpoint.datagram()?(t.push("starting to send "),t.push(this._endpoint.protocol()),t.push(" messages\n"),t.push(this._transceiver.toDetailedString())):(t.push("established "),t.push(this._endpoint.protocol()),t.push(" connection\n"),t.push(this.toString())),this._instance.initializationData().logger.trace(e.networkCat,t.join(""))}return!0}sendNextMessage(){if(0!==this._sendStreams.length){u.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{for(;;){let e=this._sendStreams.shift();if(this._writeStream.swap(e.stream),e.sent(),0===this._sendStreams.length)break;if(this._state>=5)return;e=this._sendStreams[0],u.assert(!e.prepared);const t=e.stream;if(t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,S.traceSend(t,this._logger,this._traceLevels),this._writeStream.swap(e.stream),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return u.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(f.Write)}}catch(e){if(e instanceof n.LocalException)return void this.setState(5,e);throw e}u.assert(this._writeStream.isEmpty()),4===this._state&&this._shutdownInitiated&&this.scheduleTimeout(f.Read)}}sendMessage(e){if(this._sendStreams.length>0)return e.doAdopt(),this._sendStreams.push(e),r.Queued;u.assert(this._state<5),u.assert(!e.prepared);const t=e.stream;return t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,S.traceSend(t,this._logger,this._traceLevels),this.write(t.buffer)?(e.sent(),this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),r.Sent):(e.doAdopt(),this._writeStream.swap(e.stream),this._sendStreams.push(e),this.scheduleTimeout(f.Write),r.Queued)}parseMessage(){u.assert(this._state>1&&this._state<5);let e=new C(this._instance);this._readStream.swap(e.stream),this._readStream.resize(m.headerSize),this._readStream.pos=0,this._readHeader=!0,u.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;const t=e.stream.readByte();if(2===e.stream.readByte())throw new n.FeatureNotSupportedException("Cannot uncompress compressed message");switch(e.stream.pos=m.headerSize,t){case m.closeConnectionMsg:S.traceRecv(e.stream,this._logger,this._traceLevels),this._endpoint.datagram()?this._warn&&this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc):this.setState(5,new n.CloseConnectionException);break;case m.requestMsg:4===this._state?S.traceIn("received request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels):(S.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.invokeNum=1,e.servantManager=this._servantManager,e.adapter=this._adapter,++this._dispatchCount);break;case m.requestBatchMsg:if(4===this._state)S.traceIn("received batch request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels);else{if(S.traceRecv(e.stream,this._logger,this._traceLevels),e.invokeNum=e.stream.readInt(),e.invokeNum<0)throw e.invokeNum=0,new n.UnmarshalOutOfBoundsException;e.servantManager=this._servantManager,e.adapter=this._adapter,this._dispatchCount+=e.invokeNum}break;case m.replyMsg:S.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.outAsync=this._asyncRequests.get(e.requestId),e.outAsync?(this._asyncRequests.delete(e.requestId),++this._dispatchCount):e=null,this.checkClose();break;case m.validateConnectionMsg:S.traceRecv(e.stream,this._logger,this._traceLevels),null!==this._heartbeatCallback&&(e.heartbeatCallback=this._heartbeatCallback,++this._dispatchCount);break;default:throw S.traceIn("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels),new n.UnknownMessageException}}catch(e){if(!(e instanceof n.LocalException))throw e;this._endpoint.datagram()?this._warn&&this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc):this.setState(5,e)}return e}invokeAll(e,t,i,r,s){try{for(;t>0;)new _(this._instance,this,s,!this._endpoint.datagram()&&0!==i,i).invoke(r,e),--t;e.clear()}catch(e){e instanceof n.LocalException?this.invokeException(e,t):(this._logger.error("unexpected exception:\n"+e.toString()),this.invokeException(new n.UnknownException(e),t))}}scheduleTimeout(e){let t;if(this._state<2){const e=this._instance.defaultsAndOverrides();t=e.overrideConnectTimeout?e.overrideConnectTimeoutValue:this._endpoint.timeout()}else if(this._state<4)this._readHeader&&(e&=~f.Read),t=this._endpoint.timeout();else{const e=this._instance.defaultsAndOverrides();t=e.overrideCloseTimeout?e.overrideCloseTimeoutValue:this._endpoint.timeout()}t<0||(0!==(e&f.Read)&&(this._readTimeoutScheduled&&this._timer.cancel(this._readTimeoutId),this._readTimeoutId=this._timer.schedule(()=>this.timedOut(),t),this._readTimeoutScheduled=!0),0!==(e&(f.Write|f.Connect))&&(this._writeTimeoutScheduled&&this._timer.cancel(this._writeTimeoutId),this._writeTimeoutId=this._timer.schedule(()=>this.timedOut(),t),this._writeTimeoutScheduled=!0))}unscheduleTimeout(e){0!==(e&f.Read)&&this._readTimeoutScheduled&&(this._timer.cancel(this._readTimeoutId),this._readTimeoutScheduled=!1),0!==(e&(f.Write|f.Connect))&&this._writeTimeoutScheduled&&(this._timer.cancel(this._writeTimeoutId),this._writeTimeoutScheduled=!1)}warning(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())}checkState(){this._state<3||this._dispatchCount>0||6===this._state&&this._finishedPromises.length>0&&(this._adapter=null,this._finishedPromises.forEach(e=>e.resolve()),this._finishedPromises=[])}reap(){null!==this._monitor&&this._monitor.reap(this)}read(e){const t=e.position,i=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){const i=[];i.push("received "),this._endpoint.datagram()?i.push(e.limit):(i.push(e.position-t),i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return i}write(e){const t=e.position,i=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){const i=[];i.push("sent "),i.push(e.position-t),this._endpoint.datagram()||(i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return i}}P.ObjectAdapterDeactivated=0,P.CommunicatorDestroyed=1,n.ConnectionI=P;class M{constructor(){this.stream=null,this.outAsync=null,this.requestId=0,this.prepared=!1}canceled(){u.assert(null!==this.outAsync),this.outAsync=null}doAdopt(){if(this.adopt){const e=new a(this.stream.instance,m.currentProtocolEncoding);e.swap(this.stream),this.stream=e,this.adopt=!1}}sent(){null!==this.outAsync&&this.outAsync.sent()}completed(e){null!==this.outAsync&&this.outAsync.completedEx(e)}static createForStream(e,t){const i=new M;return i.stream=e,i.adopt=t,i.isSent=!1,i.requestId=0,i.outAsync=null,i}static create(e,t,i){const n=new M;return n.stream=t,n.outAsync=e,n.requestId=i,n.isSent=!1,n.adopt=!1,n}}e.exports.Ice=n},4997:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(5896),i(9483),i(3239),i(1781),i(7548),i(8372),i(5527),i(2713),i(3418);const r=n.module("Ice");r.Slice,r.InitializationException=class extends r.LocalException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::InitializationException"}},r.PluginInitializationException=class extends r.LocalException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::PluginInitializationException"}},r.CollocationOptimizationException=class extends r.LocalException{constructor(e=""){super(e)}static get _parent(){return r.LocalException}static get _id(){return"::Ice::CollocationOptimizationException"}},r.AlreadyRegisteredException=class extends r.LocalException{constructor(e="",t="",i=""){super(i),this.kindOfObject=e,this.id=t}static get _parent(){return r.LocalException}static get _id(){return"::Ice::AlreadyRegisteredException"}},r.NotRegisteredException=class extends r.LocalException{constructor(e="",t="",i=""){super(i),this.kindOfObject=e,this.id=t}static get _parent(){return r.LocalException}static get _id(){return"::Ice::NotRegisteredException"}},r.TwowayOnlyException=class extends r.LocalException{constructor(e="",t=""){super(t),this.operation=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::TwowayOnlyException"}},r.CloneNotImplementedException=class extends r.LocalException{constructor(e=""){super(e)}static get _parent(){return r.LocalException}static get _id(){return"::Ice::CloneNotImplementedException"}},r.UnknownException=class extends r.LocalException{constructor(e="",t=""){super(t),this.unknown=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::UnknownException"}},r.UnknownLocalException=class extends r.UnknownException{constructor(e,t=""){super(e,t)}static get _parent(){return r.UnknownException}static get _id(){return"::Ice::UnknownLocalException"}},r.UnknownUserException=class extends r.UnknownException{constructor(e,t=""){super(e,t)}static get _parent(){return r.UnknownException}static get _id(){return"::Ice::UnknownUserException"}},r.VersionMismatchException=class extends r.LocalException{constructor(e=""){super(e)}static get _parent(){return r.LocalException}static get _id(){return"::Ice::VersionMismatchException"}},r.CommunicatorDestroyedException=class extends r.LocalException{constructor(e=""){super(e)}static get _parent(){return r.LocalException}static get _id(){return"::Ice::CommunicatorDestroyedException"}},r.ObjectAdapterDeactivatedException=class extends r.LocalException{constructor(e="",t=""){super(t),this.name=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::ObjectAdapterDeactivatedException"}},r.ObjectAdapterIdInUseException=class extends r.LocalException{constructor(e="",t=""){super(t),this.id=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::ObjectAdapterIdInUseException"}},r.NoEndpointException=class extends r.LocalException{constructor(e="",t=""){super(t),this.proxy=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::NoEndpointException"}},r.EndpointParseException=class extends r.LocalException{constructor(e="",t=""){super(t),this.str=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::EndpointParseException"}},r.EndpointSelectionTypeParseException=class extends r.LocalException{constructor(e="",t=""){super(t),this.str=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::EndpointSelectionTypeParseException"}},r.VersionParseException=class extends r.LocalException{constructor(e="",t=""){super(t),this.str=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::VersionParseException"}},r.IdentityParseException=class extends r.LocalException{constructor(e="",t=""){super(t),this.str=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::IdentityParseException"}},r.ProxyParseException=class extends r.LocalException{constructor(e="",t=""){super(t),this.str=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::ProxyParseException"}},r.IllegalIdentityException=class extends r.LocalException{constructor(e=new r.Identity,t=""){super(t),this.id=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::IllegalIdentityException"}},r.IllegalServantException=class extends r.LocalException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::IllegalServantException"}},r.RequestFailedException=class extends r.LocalException{constructor(e=new r.Identity,t="",i="",n=""){super(n),this.id=e,this.facet=t,this.operation=i}static get _parent(){return r.LocalException}static get _id(){return"::Ice::RequestFailedException"}},r.ObjectNotExistException=class extends r.RequestFailedException{constructor(e,t,i,n=""){super(e,t,i,n)}static get _parent(){return r.RequestFailedException}static get _id(){return"::Ice::ObjectNotExistException"}},r.FacetNotExistException=class extends r.RequestFailedException{constructor(e,t,i,n=""){super(e,t,i,n)}static get _parent(){return r.RequestFailedException}static get _id(){return"::Ice::FacetNotExistException"}},r.OperationNotExistException=class extends r.RequestFailedException{constructor(e,t,i,n=""){super(e,t,i,n)}static get _parent(){return r.RequestFailedException}static get _id(){return"::Ice::OperationNotExistException"}},r.SyscallException=class extends r.LocalException{constructor(e=0,t=""){super(t),this.error=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::SyscallException"}},r.SocketException=class extends r.SyscallException{constructor(e,t=""){super(e,t)}static get _parent(){return r.SyscallException}static get _id(){return"::Ice::SocketException"}},r.CFNetworkException=class extends r.SocketException{constructor(e,t="",i=""){super(e,i),this.domain=t}static get _parent(){return r.SocketException}static get _id(){return"::Ice::CFNetworkException"}},r.FileException=class extends r.SyscallException{constructor(e,t="",i=""){super(e,i),this.path=t}static get _parent(){return r.SyscallException}static get _id(){return"::Ice::FileException"}},r.ConnectFailedException=class extends r.SocketException{constructor(e,t=""){super(e,t)}static get _parent(){return r.SocketException}static get _id(){return"::Ice::ConnectFailedException"}},r.ConnectionRefusedException=class extends r.ConnectFailedException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ConnectFailedException}static get _id(){return"::Ice::ConnectionRefusedException"}},r.ConnectionLostException=class extends r.SocketException{constructor(e,t=""){super(e,t)}static get _parent(){return r.SocketException}static get _id(){return"::Ice::ConnectionLostException"}},r.DNSException=class extends r.LocalException{constructor(e=0,t="",i=""){super(i),this.error=e,this.host=t}static get _parent(){return r.LocalException}static get _id(){return"::Ice::DNSException"}},r.OperationInterruptedException=class extends r.LocalException{constructor(e=""){super(e)}static get _parent(){return r.LocalException}static get _id(){return"::Ice::OperationInterruptedException"}},r.TimeoutException=class extends r.LocalException{constructor(e=""){super(e)}static get _parent(){return r.LocalException}static get _id(){return"::Ice::TimeoutException"}},r.ConnectTimeoutException=class extends r.TimeoutException{constructor(e=""){super(e)}static get _parent(){return r.TimeoutException}static get _id(){return"::Ice::ConnectTimeoutException"}},r.CloseTimeoutException=class extends r.TimeoutException{constructor(e=""){super(e)}static get _parent(){return r.TimeoutException}static get _id(){return"::Ice::CloseTimeoutException"}},r.ConnectionTimeoutException=class extends r.TimeoutException{constructor(e=""){super(e)}static get _parent(){return r.TimeoutException}static get _id(){return"::Ice::ConnectionTimeoutException"}},r.InvocationTimeoutException=class extends r.TimeoutException{constructor(e=""){super(e)}static get _parent(){return r.TimeoutException}static get _id(){return"::Ice::InvocationTimeoutException"}},r.InvocationCanceledException=class extends r.LocalException{constructor(e=""){super(e)}static get _parent(){return r.LocalException}static get _id(){return"::Ice::InvocationCanceledException"}},r.ProtocolException=class extends r.LocalException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::ProtocolException"}},r.BadMagicException=class extends r.ProtocolException{constructor(e,t=null,i=""){super(e,i),this.badMagic=t}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::BadMagicException"}},r.UnsupportedProtocolException=class extends r.ProtocolException{constructor(e,t=new r.ProtocolVersion,i=new r.ProtocolVersion,n=""){super(e,n),this.bad=t,this.supported=i}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::UnsupportedProtocolException"}},r.UnsupportedEncodingException=class extends r.ProtocolException{constructor(e,t=new r.EncodingVersion,i=new r.EncodingVersion,n=""){super(e,n),this.bad=t,this.supported=i}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::UnsupportedEncodingException"}},r.UnknownMessageException=class extends r.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::UnknownMessageException"}},r.ConnectionNotValidatedException=class extends r.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::ConnectionNotValidatedException"}},r.UnknownRequestIdException=class extends r.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::UnknownRequestIdException"}},r.UnknownReplyStatusException=class extends r.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::UnknownReplyStatusException"}},r.CloseConnectionException=class extends r.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::CloseConnectionException"}},r.ConnectionManuallyClosedException=class extends r.LocalException{constructor(e=!1,t=""){super(t),this.graceful=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::ConnectionManuallyClosedException"}},r.IllegalMessageSizeException=class extends r.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::IllegalMessageSizeException"}},r.CompressionException=class extends r.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::CompressionException"}},r.DatagramLimitException=class extends r.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::DatagramLimitException"}},r.MarshalException=class extends r.ProtocolException{constructor(e,t=""){super(e,t)}static get _parent(){return r.ProtocolException}static get _id(){return"::Ice::MarshalException"}},r.ProxyUnmarshalException=class extends r.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return r.MarshalException}static get _id(){return"::Ice::ProxyUnmarshalException"}},r.UnmarshalOutOfBoundsException=class extends r.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return r.MarshalException}static get _id(){return"::Ice::UnmarshalOutOfBoundsException"}},r.NoValueFactoryException=class extends r.MarshalException{constructor(e,t="",i=""){super(e,i),this.type=t}static get _parent(){return r.MarshalException}static get _id(){return"::Ice::NoValueFactoryException"}},r.UnexpectedObjectException=class extends r.MarshalException{constructor(e,t="",i="",n=""){super(e,n),this.type=t,this.expectedType=i}static get _parent(){return r.MarshalException}static get _id(){return"::Ice::UnexpectedObjectException"}},r.MemoryLimitException=class extends r.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return r.MarshalException}static get _id(){return"::Ice::MemoryLimitException"}},r.StringConversionException=class extends r.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return r.MarshalException}static get _id(){return"::Ice::StringConversionException"}},r.EncapsulationException=class extends r.MarshalException{constructor(e,t=""){super(e,t)}static get _parent(){return r.MarshalException}static get _id(){return"::Ice::EncapsulationException"}},r.FeatureNotSupportedException=class extends r.LocalException{constructor(e="",t=""){super(t),this.unsupportedFeature=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::FeatureNotSupportedException"}},r.SecurityException=class extends r.LocalException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.LocalException}static get _id(){return"::Ice::SecurityException"}},r.FixedProxyException=class extends r.LocalException{constructor(e=""){super(e)}static get _parent(){return r.LocalException}static get _id(){return"::Ice::FixedProxyException"}},r.ResponseSentException=class extends r.LocalException{constructor(e=""){super(e)}static get _parent(){return r.LocalException}static get _id(){return"::Ice::ResponseSentException"}},t.Ice=r},5056:(e,t,i)=>{"use strict";e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},5072:e=>{"use strict";var t=[];function i(e){for(var i=-1,n=0;n<t.length;n++)if(t[n].identifier===e){i=n;break}return i}function n(e,n){for(var s={},o=[],a=0;a<e.length;a++){var c=e[a],l=n.base?c[0]+n.base:c[0],h=s[l]||0,u="".concat(l," ").concat(h);s[l]=h+1;var d=i(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var _=r(p,n);n.byIndex=a,t.splice(a,0,{identifier:u,updater:_,references:1})}o.push(u)}return o}function r(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,r){var s=n(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<s.length;o++){var a=i(s[o]);t[a].references--}for(var c=n(e,r),l=0;l<s.length;l++){var h=i(s[l]);0===t[h].references&&(t[h].updater(),t.splice(h,1))}s=c}}},5079:(e,t,i)=>{const n=i(8846).Ice;n.AsyncStatus={Queued:0,Sent:1},e.exports.Ice=n},5121:(e,t,i)=>{const n=i(8846).Ice;i(4997),i(1824),i(7168),i(9294);const r=n.ObjectAdapterI,s=n.Promise;n.ObjectAdapterFactory=class{constructor(e,t){this._instance=e,this._communicator=t,this._adapters=[],this._adapterNamesInUse=[],this._shutdownPromise=new s}shutdown(){return null===this._instance||(this._instance=null,this._communicator=null,s.all(this._adapters.map(e=>e.deactivate())).then(()=>this._shutdownPromise.resolve())),this._shutdownPromise}waitForShutdown(){return this._shutdownPromise.then(()=>s.all(this._adapters.map(e=>e.waitForDeactivate())))}isShutdown(){return null===this._instance}destroy(){return this.waitForShutdown().then(()=>s.all(this._adapters.map(e=>e.destroy())))}createObjectAdapter(e,t,i){if(null===this._instance)throw new n.ObjectAdapterDeactivatedException;let s=null;try{if(0===e.length)s=new r(this._instance,this._communicator,this,n.generateUUID(),null,!0,i);else{if(-1!==this._adapterNamesInUse.indexOf(e))throw new n.AlreadyRegisteredException("object adapter",e);s=new r(this._instance,this._communicator,this,e,t,!1,i),this._adapterNamesInUse.push(e)}this._adapters.push(s)}catch(e){i.reject(e)}}removeObjectAdapter(e){if(null===this._instance)return;let t=this._adapters.indexOf(e);-1!==t&&this._adapters.splice(t,1),t=this._adapterNamesInUse.indexOf(e.getName()),-1!==t&&this._adapterNamesInUse.splice(t,1)}},e.exports.Ice=n},5174:(e,t,i)=>{const n=i(4997).Ice,r=n.AlreadyRegisteredException;n.ValueFactoryManagerI=class{constructor(){this._factoryMap=new Map}add(e,t){if(this._factoryMap.has(t))throw new r("value factory",t);this._factoryMap.set(t,e)}find(e){return this._factoryMap.get(e)}destroy(){this._factoryMap=new Map}},e.exports.Ice=n},5352:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice.defineDictionary(r,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),t.Ice=r},5372:()=>{},5411:e=>{const t=new class{constructor(){this.mediaRecorder=null,this.audioChunks=[],this.isRecording=!1,this.audioStream=null}async initialize(){try{return this.audioStream=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}}),console.log("âœ… Permisos de micrÃ³fono concedidos"),!0}catch(e){throw console.error("âŒ Error al acceder al micrÃ³fono:",e),new Error("No se pudo acceder al micrÃ³fono. Por favor, concede los permisos necesarios.")}}async startRecording(){try{return this.audioStream||await this.initialize(),this.audioChunks=[],this.mediaRecorder=new MediaRecorder(this.audioStream,{mimeType:"audio/webm;codecs=opus"}),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.audioChunks.push(e.data)},this.mediaRecorder.start(),this.isRecording=!0,console.log("ðŸŽ™ï¸ GrabaciÃ³n iniciada"),!0}catch(e){throw console.error("Error al iniciar grabaciÃ³n:",e),e}}async stopRecording(){return new Promise((e,t)=>{this.mediaRecorder&&this.isRecording?(this.mediaRecorder.onstop=()=>{const t=new Blob(this.audioChunks,{type:"audio/webm;codecs=opus"});this.isRecording=!1,this.audioChunks=[],console.log("â¹ï¸ GrabaciÃ³n detenida. TamaÃ±o:",t.size,"bytes"),e(t)},this.mediaRecorder.stop()):t(new Error("No hay grabaciÃ³n en curso"))})}cancelRecording(){this.mediaRecorder&&this.isRecording&&(this.mediaRecorder.stop(),this.isRecording=!1,this.audioChunks=[],console.log("âŒ GrabaciÃ³n cancelada"))}async blobToBase64(e){return new Promise((t,i)=>{const n=new FileReader;n.onloadend=()=>{const e=n.result.split(",")[1];t(e)},n.onerror=i,n.readAsDataURL(e)})}base64ToBlob(e,t="audio/webm;codecs=opus"){const i=atob(e),n=[];for(let e=0;e<i.length;e++)n.push(i.charCodeAt(e));return new Blob([new Uint8Array(n)],{type:t})}async playAudio(e){try{const t=this.base64ToBlob(e),i=URL.createObjectURL(t),n=new Audio(i);return n.onended=()=>{URL.revokeObjectURL(i)},await n.play(),n}catch(e){throw console.error("Error al reproducir audio:",e),e}}async getAudioDuration(e){return new Promise(t=>{const i=new Audio;i.onloadedmetadata=()=>{t(Math.round(i.duration))},i.src=URL.createObjectURL(e)})}cleanup(){this.audioStream&&(this.audioStream.getTracks().forEach(e=>e.stop()),this.audioStream=null),this.mediaRecorder=null,this.audioChunks=[],this.isRecording=!1}static isSupported(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&window.MediaRecorder)}};e.exports=t},5527:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(2676),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice"),s=r.Slice;r.Identity=class{constructor(e="",t=""){this.name=e,this.category=t}_write(e){e.writeString(this.name),e.writeString(this.category)}_read(e){this.name=e.readString(),this.category=e.readString()}static get minWireSize(){return 2}},s.defineStruct(r.Identity,!0,!0),s.defineDictionary(r,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",!1,r.HashMap.compareEquals,"Ice.Value"),s.defineSequence(r,"IdentitySeqHelper","Ice.Identity",!1),t.Ice=r},5588:(e,t,i)=>{const n=i(4997).Ice;class r{constructor(e,t,i,n){this._instance=e,this._queue=t,this._outAsync=i}run(){this._outAsync.retry(),this._queue.remove(this)}destroy(){try{this._outAsync.abort(new n.CommunicatorDestroyedException)}catch(e){}}asyncRequestCanceled(e,t){this._queue.cancel(this)&&(this._instance.traceLevels().retry>=1&&this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+t.toString()),this._outAsync.completedEx(t))}}n.RetryQueue=class{constructor(e){this._instance=e,this._requests=[]}add(e,t){if(null===this._instance)throw new n.CommunicatorDestroyedException;const i=new r(this._instance,this,e);e.cancelable(i),i.token=this._instance.timer().schedule(()=>i.run(),t),this._requests.push(i)}destroy(){this._requests.forEach(e=>{this._instance.timer().cancel(e.token),e.destroy()}),this._requests=[],this._instance=null}remove(e){const t=this._requests.indexOf(e);t>=0&&this._requests.splice(t,1)}cancel(e){const t=this._requests.indexOf(e);return t>=0&&(this._requests.splice(t,1),this._instance.timer().cancel(e.token))}},e.exports.Ice=n},5752:(e,t,i)=>{const n=i(8846).Ice;i(4190),i(4262),i(4269),i(2698),i(1781),i(4997),i(3332);const r=n.Base64,s=n.Debug,o=n.EndpointParseException,a=n.HashUtil,c=n.StringUtil;class l extends n.EndpointI{constructor(e){super(),this._rawEncoding=n.Encoding_1_0,this._type=void 0===e?-1:e,this._rawBytes=null}streamWrite(e){e.startEncapsulation(this._rawEncoding,n.FormatType.DefaultFormat),e.writeBlob(this._rawBytes),e.endEncapsulation()}getInfo(){return new h(null,-1,!1,this._rawEncoding,this._rawBytes,this._type)}type(){return this._type}protocol(){return"opaque"}timeout(){return-1}changeTimeout(e){return this}changeConnectionId(e){return this}compress(){return!1}changeCompress(e){return this}datagram(){return!1}secure(){return!1}rawBytes(){return this._rawBytes}transceiver(e){return e.value=null,null}acceptor(e,t){return e.value=this,null}connect(){return null}hashCode(){if(void 0===this._hashCode){let e=5381;e=a.addNumber(e,this._type),e=a.addHashable(e,this._rawEncoding),e=a.addArray(e,this._rawBytes,a.addNumber),this._hashCode=e}return this._hashCode}options(){let e="";return e+=" -t "+this._type,e+=" -e "+n.encodingVersionToString(this._rawEncoding),e+=" -v "+r.encode(this._rawBytes),e}equals(e){if(!(e instanceof l))return!1;if(this===e)return!0;if(this._type!==e._type)return!1;if(!this._rawEncoding.equals(e._rawEncoding))return!1;if(this._rawBytes.length!==e._rawBytes.length)return!1;for(let t=0;t<this._rawBytes.length;t++)if(this._rawBytes[t]!==e._rawBytes[t])return!1;return!0}compareTo(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof l))return this.type()<e.type()?-1:1;if(this._type<e._type)return-1;if(e._type<this._type)return 1;if(this._rawEncoding.major<e._rawEncoding.major)return-1;if(e._rawEncoding.major<this._rawEncoding.major)return 1;if(this._rawEncoding.minor<e._rawEncoding.minor)return-1;if(e._rawEncoding.minor<this._rawEncoding.minor)return 1;if(this._rawBytes.length<e._rawBytes.length)return-1;if(e._rawBytes.length<this._rawBytes.length)return 1;for(let t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t])return-1;if(e._rawBytes[t]<this._rawBytes[t])return 1}return 0}checkOption(e,t,i){switch(e.charAt(1)){case"t":{if(this._type>-1)throw new o("multiple -t options in endpoint "+i);if(null===t)throw new o("no argument provided for -t option in endpoint "+i);let e;try{e=c.toInt(t)}catch(e){throw new o("invalid type value `"+t+"' in endpoint "+i)}if(e<0||e>65535)throw new o("type value `"+t+"' out of range in endpoint "+i);return this._type=e,!0}case"v":if(this._rawBytes)throw new o("multiple -v options in endpoint "+i);if(null===t||0===t.length)throw new o("no argument provided for -v option in endpoint "+i);for(let e=0;e<t.length;++e)if(!r.isBase64(t.charAt(e)))throw new o("invalid base64 character `"+t.charAt(e)+"' (ordinal "+t.charCodeAt(e)+") in endpoint "+i);return this._rawBytes=r.decode(t),!0;case"e":if(null===t)throw new o("no argument provided for -e option in endpoint "+i);try{this._rawEncoding=n.stringToEncodingVersion(t)}catch(e){throw new o("invalid encoding version `"+t+"' in endpoint "+i+":\n"+e.str)}return!0;default:return!1}}initWithOptions(e){if(super.initWithOptions(e),s.assert(this._rawEncoding),this._type<0)throw new o("no -t option in endpoint `"+this+"'");if(null===this._rawBytes||0===this._rawBytes.length)throw new o("no -v option in endpoint `"+this+"'")}initWithStream(e){this._rawEncoding=e.getEncoding(),this._rawBytes=e.readBlob(e.getEncapsulationSize())}}class h extends n.OpaqueEndpointInfo{constructor(e,t,i,n,r){super(-1,!1,i,n),this._type=r}type(){return this._type}datagram(){return!1}secure(){return!1}}n.OpaqueEndpointI=l,e.exports.Ice=n},5770:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(1193),i(9483),i(3239),i(1781),i(7548),i(8372),i(3991),i(7605),i(1373),i(9994),i(9956),i(2368),i(359),i(1618),i(537),i(9576),i(7812),i(1386),i(3793);const r=n.module("Ice"),s=r.Slice;r.ToStringMode=s.defineEnum([["Unicode",0],["ASCII",1],["Compat",2]]),t.Ice=r},5828:e=>{const t=new class{constructor(){this.currentUserId="user1",this.currentUserName="Alice",this.chats=[],this.activeChat=null,this.activeMessages=[],this.allUsers=[]}setCurrentUser(e,t){this.currentUserId=e,this.currentUserName=t}getCurrentUserId(){return this.currentUserId}getCurrentUserName(){return this.currentUserName}setChats(e){this.chats=e.sort((e,t)=>t.lastMessageTimestamp-e.lastMessageTimestamp)}getChats(){return this.chats}addChat(e){const t=this.chats.findIndex(t=>t.chatId===e.chatId);t>=0?this.chats[t]=e:this.chats.push(e),this.chats.sort((e,t)=>t.lastMessageTimestamp-e.lastMessageTimestamp)}setActiveChat(e,t,i){this.activeChat={id:e,name:t,isGroup:i},this.activeMessages=[]}getActiveChat(){return this.activeChat}clearActiveChat(){this.activeChat=null,this.activeMessages=[]}setActiveMessages(e){this.activeMessages=e}getActiveMessages(){return this.activeMessages}addMessage(e){if(this.activeMessages.push(e),this.activeChat){const t=this.chats.findIndex(e=>e.chatId===this.activeChat.id);t>=0&&(this.chats[t].lastMessageContent=e.content,this.chats[t].lastMessageTimestamp=e.timestamp,this.chats.sort((e,t)=>t.lastMessageTimestamp-e.lastMessageTimestamp))}}setAllUsers(e){this.allUsers=e}getAllUsers(){return this.allUsers}getUsersExceptCurrent(){return this.allUsers.filter(e=>e.id!==this.currentUserId)}isChatActive(e){return this.activeChat&&this.activeChat.id===e}formatTimestamp(e){const t=new Date(e),i=new Date;return t.toDateString()===i.toDateString()?t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):Math.floor((i-t)/864e5)<7?t.toLocaleDateString("es-ES",{weekday:"short"}):t.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"})}};e.exports=t},5874:(e,t,i)=>{const n=i(1193).Ice;n.OptionalFormat=n.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]]),e.exports.Ice=n},5896:(e,t,i)=>{const n=i(8846).Ice,r=function(e,t,i,n){if(n+="  ",null===t)return"\n"+n+e+": (null)";if(void 0===t)return"\n"+n+e+": (undefined)";if("stack"==e||"function"==typeof t)return"";if("object"!=typeof t)return"\n"+n+e+': "'+t+'"';if(-1!=i.indexOf(t))return"\n"+n+e+": (recursive)";i.push(t);let s="\n"+n+e+":";for(const o in t)0!==e.indexOf("_")&&"function"!=typeof t[o]&&(s+=n+r(o,t[o],i,n));return s};class s extends Error{constructor(e){super(),e&&(this.ice_cause=e)}ice_name(){return this.constructor._id.substr(2)}ice_id(){return this.constructor._id}static get _id(){return"::Ice::Exception"}toString(){if(this._inToStringAlready)return"";this._inToStringAlready=!0;let e=this.ice_id();for(const t in this)"_inToStringAlready"!=t&&(e+=r(t,this[t],[],""));return!0===n._printStackTraces&&this.stack&&(e+="\n"+this.stack),this._inToStringAlready=!1,e}static captureStackTrace(e){const t=(new Error).stack;void 0!==t&&Object.defineProperty(e,"stack",{get:function(){return t}})}}n.Exception=s,n.LocalException=class extends s{constructor(e){super(e),s.captureStackTrace(this)}static get _id(){return"::Ice::LocalException"}};class o extends s{constructor(e){super(e),s.captureStackTrace(this)}static get _id(){return"::Ice::UserException"}ice_getSlicedData(){return null}_write(e){e.startException(null),a(this,e,this._mostDerivedType()),e.endException()}_read(e){e.startException(),c(this,e,this._mostDerivedType()),e.endException(!1)}_usesClasses(){return!1}_mostDerivedType(){return n.UserException}}n.UserException=o;const a=function(e,t,i){void 0!==i&&i!==o&&(t.startSlice(i._id,-1,i._parent===o),i.prototype.hasOwnProperty("_writeMemberImpl")&&i.prototype._writeMemberImpl.call(e,t),t.endSlice(),a(e,t,i._parent))},c=function(e,t,i){void 0!==i&&i!==o&&(t.startSlice(),i.prototype.hasOwnProperty("_readMemberImpl")&&i.prototype._readMemberImpl.call(e,t),t.endSlice(),c(e,t,i._parent))},l=function(e){e.startException(this._slicedData),a(this,e,this._mostDerivedType()),e.endException()},h=function(e){e.startException(),c(this,e,this._mostDerivedType()),this._slicedData=e.endException(!0)},u=function(){return this._slicedData};n.Slice.PreservedUserException=function(e){e.prototype.ice_getSlicedData=u,e.prototype._write=l,e.prototype._read=h},e.exports.Ice=n},5908:(e,t,i)=>{const n=i(8846).Ice;n.Property=class{constructor(e,t,i){this._pattern=e,this._deprecated=t,this._deprecatedBy=i}get pattern(){return this._pattern}get deprecated(){return this._deprecated}get deprecatedBy(){return this._deprecatedBy}},e.exports.A=n},6048:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(7416),i(1781),i(3726),i(4997),i(3332),i(1098);const r=i(7416).IceSSL,s=n.Debug,o=n.HashUtil,a=n.StringUtil,c=void 0!==n.TcpTransceiver?n.TcpTransceiver:null;class l extends n.IPEndpointI{constructor(e,t,i,n,r,s,o){super(e,t,i,n,s),this._timeout=void 0===r?e?e.defaultTimeout():void 0:r,this._compress=void 0!==o&&o}getInfo(){const e=new n.TCPEndpointInfo;return this.fillEndpointInfo(e),this.secure()?new r.EndpointInfo(e,e.timeout,e.compress):e}timeout(){return this._timeout}changeTimeout(e){return e===this._timeout?this:new l(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)}changeConnectionId(e){return e===this._connectionId?this:new l(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)}compress(){return this._compress}changeCompress(e){return e===this._compress?this:new l(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)}datagram(){return!1}connectable(){return"undefined"!=typeof process&&!this.secure()}connect(){return s.assert(!this.secure()),c.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)}options(){let e=super.options();return-1==this._timeout?e+=" -t infinite":e+=" -t "+this._timeout,this._compress&&(e+=" -z"),e}compareTo(e){return this===e?0:null===e?1:e instanceof l?this._timeout<e._timeout?-1:e._timeout<this._timeout?1:!this._compress&&e._compress?-1:!e._compress&&this._compress?1:super.compareTo(e):this.type()<e.type()?-1:1}streamWriteImpl(e){super.streamWriteImpl(e),e.writeInt(this._timeout),e.writeBool(this._compress)}hashInit(e){return e=super.hashInit(e),e=o.addNumber(e,this._timeout),o.addBoolean(e,this._compress)}fillEndpointInfo(e){super.fillEndpointInfo(e),e.timeout=this._timeout,e.compress=this._compress}initWithStream(e){super.initWithStream(e),this._timeout=e.readInt(),this._compress=e.readBool()}checkOption(e,t,i){if(super.checkOption(e,t,i))return!0;if("-t"===e){if(null===t)throw new n.EndpointParseException("no argument provided for -t option in endpoint "+i);if("infinite"==t)this._timeout=-1;else{let e=!1;try{this._timeout=a.toInt(t)}catch(t){e=!0}if(e||this._timeout<1)throw new n.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+i)}}else{if("-z"!==e)return!1;if(null!==t)throw new n.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+i);this._compress=!0}return!0}createEndpoint(e,t,i){return new l(this._instance,e,t,this._sourceAddr,this._timeout,i,this._compress)}}n.TcpEndpointI=l,e.exports.A=n},6062:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(2525),i(7238),i(3905),i(427),n.module("Glacier2")},6070:(e,t,i)=>{const n=i(8846).Ice;i(3210),i(8789),i(4262),i(4381),i(901),i(7416),i(5896),i(1779),i(2644),i(4997),i(7356),i(5121),i(1517),i(532),i(7168),i(7812),i(9662),i(2279),i(8740),i(8306),i(5588),i(4277),i(2737),i(1216),i(8146),i(2355),i(5174),i(7950);const r=n.ACMConfig,s=n.AsyncResultBase,o=n.Debug,a=n.DefaultsAndOverrides,c=n.EndpointFactoryManager,l=n.ImplicitContextI,h=n.LocatorManager,u=n.ObjectAdapterFactory,d=n.OutgoingConnectionFactory,p=n.Properties,_=n.ProxyFactory,g=n.ReferenceFactory,m=n.RequestHandlerFactory,f=n.RetryQueue,y=n.RouterManager,S=n.Timer,w=n.TraceLevels,x=n.ValueFactoryManagerI;n.Instance=class{constructor(e){this._state=0,this._initData=e,this._traceLevels=null,this._defaultsAndOverrides=null,this._messageSizeMax=0,this._batchAutoFlushSize=0,this._clientACM=null,this._toStringMode=n.ToStringMode.Unicode,this._implicitContext=null,this._routerManager=null,this._locatorManager=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._outgoingConnectionFactory=null,this._objectAdapterFactory=null,this._retryQueue=null,this._endpointHostResolver=null,this._endpointFactoryManager=null,this._objectFactoryMap=null}initializationData(){return this._initData}traceLevels(){return o.assert(null!==this._traceLevels),this._traceLevels}defaultsAndOverrides(){return o.assert(null!==this._defaultsAndOverrides),this._defaultsAndOverrides}routerManager(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._routerManager),this._routerManager}locatorManager(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._locatorManager),this._locatorManager}referenceFactory(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._referenceFactory),this._referenceFactory}requestHandlerFactory(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._requestHandlerFactory),this._requestHandlerFactory}proxyFactory(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._proxyFactory),this._proxyFactory}outgoingConnectionFactory(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._outgoingConnectionFactory),this._outgoingConnectionFactory}objectAdapterFactory(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._objectAdapterFactory),this._objectAdapterFactory}retryQueue(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._retryQueue),this._retryQueue}timer(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._timer),this._timer}endpointFactoryManager(){if(2===this._state)throw new n.CommunicatorDestroyedException;return o.assert(null!==this._endpointFactoryManager),this._endpointFactoryManager}messageSizeMax(){return this._messageSizeMax}batchAutoFlushSize(){return this._batchAutoFlushSize}clientACM(){return this._clientACM}toStringMode(){return this._toStringMode}getImplicitContext(){return this._implicitContext}setDefaultLocator(e){if(2==this._state)throw new n.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultLocator(e)}setDefaultRouter(e){if(2==this._state)throw new n.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultRouter(e)}setLogger(e){this._initData.logger=e}finishSetup(e,t){try{null===this._initData.properties&&(this._initData.properties=p.createProperties()),void 0===n._oneOfDone&&(n._printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0,n._oneOfDone=!0),null===this._initData.logger&&(this._initData.logger=n.getProcessLogger()),this._traceLevels=new w(this._initData.properties),this._defaultsAndOverrides=new a(this._initData.properties,this._initData.logger);const i=1024;let s=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",i);this._messageSizeMax=s<1||s>2147483647/1024?2147483647:1024*s,0===this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0?this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0&&(this._batchAutoFlushSize=this._messageSizeMax):(s=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024),this._batchAutoFlushSize=s<1?s:s>2147483647/1024?2147483647:1024*s),this._clientACM=new r(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new r(this._initData.properties,this._initData.logger,"Ice.ACM",new r));const o=this._initData.properties.getPropertyWithDefault("Ice.ToStringMode","Unicode");if("ASCII"===o)this._toStringMode=n.ToStringMode.ASCII;else if("Compat"===o)this._toStringMode=n.ToStringMode.Compat;else if("Unicode"!==o)throw new n.InitializationException("The value for Ice.ToStringMode must be Unicode, ASCII or Compat");this._implicitContext=l.create(this._initData.properties.getProperty("Ice.ImplicitContext")),this._routerManager=new y,this._locatorManager=new h(this._initData.properties),this._referenceFactory=new g(this,e),this._requestHandlerFactory=new m(this,e),this._proxyFactory=new _(this),this._endpointFactoryManager=new c(this);const I=new n.ProtocolInstance(this,n.TCPEndpointType,"tcp",!1),E=new n.TcpEndpointFactory(I);this._endpointFactoryManager.add(E);const v=new n.ProtocolInstance(this,n.WSEndpointType,"ws",!1),b=new n.WSEndpointFactory(v,E.clone(v));this._endpointFactoryManager.add(b);const C=new n.ProtocolInstance(this,n.SSLEndpointType,"ssl",!0),P=new n.TcpEndpointFactory(C);this._endpointFactoryManager.add(P);const M=new n.ProtocolInstance(this,n.WSSEndpointType,"wss",!0),A=new n.WSEndpointFactory(M,P.clone(M));this._endpointFactoryManager.add(A),this._outgoingConnectionFactory=new d(e,this),null===this._initData.valueFactoryManager&&(this._initData.valueFactoryManager=new x),this._objectAdapterFactory=new u(this,e),this._retryQueue=new f(this),this._timer=new S(this._initData.logger);const k=n.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));null!==k&&(this._referenceFactory=this._referenceFactory.setDefaultRouter(k));const O=n.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));null!==O&&(this._referenceFactory=this._referenceFactory.setDefaultLocator(O)),null!==t&&t.resolve(e)}catch(e){if(null===t)throw e instanceof n.LocalException&&this.destroy(),e;e instanceof n.LocalException?this.destroy().finally(()=>t.reject(e)):t.reject(e)}}destroy(){const e=new s(null,"destroy",null,this,null);return 1==this._state?(this._destroyPromises||(this._destroyPromises=[]),this._destroyPromises.push(e),e):(this._state=1,n.Promise.try(()=>{if(this._objectAdapterFactory)return this._objectAdapterFactory.shutdown()}).then(()=>{if(null!==this._outgoingConnectionFactory&&this._outgoingConnectionFactory.destroy(),null!==this._objectAdapterFactory)return this._objectAdapterFactory.destroy()}).then(()=>{if(null!==this._outgoingConnectionFactory)return this._outgoingConnectionFactory.waitUntilFinished()}).then(()=>{if(this._retryQueue&&this._retryQueue.destroy(),this._timer&&this._timer.destroy(),null!==this._objectFactoryMap&&(this._objectFactoryMap.forEach(e=>e.destroy()),this._objectFactoryMap.clear()),this._routerManager&&this._routerManager.destroy(),this._locatorManager&&this._locatorManager.destroy(),this._endpointFactoryManager&&this._endpointFactoryManager.destroy(),this._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){const e=this._initData.properties.getUnusedProperties();if(e.length>0){const t=[];t.push("The following properties were set but never read:"),e.forEach(e=>t.push("\n    ",e)),this._initData.logger.warning(t.join(""))}}this._objectAdapterFactory=null,this._outgoingConnectionFactory=null,this._retryQueue=null,this._timer=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._routerManager=null,this._locatorManager=null,this._endpointFactoryManager=null,this._state=2,this._destroyPromises&&this._destroyPromises.forEach(e=>e.resolve()),e.resolve()}).catch(t=>{this._destroyPromises&&this._destroyPromises.forEach(e=>e.reject(t)),e.reject(t)}),e)}addObjectFactory(e,t){this._initData.valueFactoryManager.add(t=>e.create(t),t),null===this._objectFactoryMap&&(this._objectFactoryMap=new Map),this._objectFactoryMap.set(t,e)}findObjectFactory(e){let t=null;return null!==this._objectFactoryMap&&(t=this._objectFactoryMap.get(e)),void 0!==t?t:null}},e.exports.Ice=n},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i="",n=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),n&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),n&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i}).join("")},t.i=function(e,i,n,r,s){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var h=[].concat(e[l]);n&&o[h[0]]||(void 0!==s&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=s),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),r&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=r):h[4]="".concat(r)),t.push(h))}},t}},6352:(e,t,i)=>{const n=i(4997).Ice,r=n.UnexpectedObjectException,s=n.MemoryLimitException;n.ExUtil={throwUOE:function(e,t){const i=t.ice_id();throw new r("expected element of type `"+e+"' but received `"+i+"'",i,e)},throwMemoryLimitException:function(e,t){throw new s("requested "+e+" bytes, maximum allowed is "+t+" bytes (see Ice.MessageSizeMax)")}},e.exports.Ice=n},6454:(e,t,i)=>{const n=i(8846).Ice;i(4269),i(7416),i(1781),i(4997),i(9509);const r=n.EndpointI,s=n.HashUtil;class o extends r{constructor(e,t,i){super(),this._instance=e,this._delegate=t,this._resource=i||"/"}getInfo(){const e=new n.WSEndpointInfo;return e.type=()=>this.type(),e.datagram=()=>this.datagram(),e.secure=()=>this.secure(),e.resource=this._resource,e.underlying=this._delegate.getInfo(),e.timeout=e.underlying.timeout,e.compress=e.underlying.compress,e}type(){return this._delegate.type()}protocol(){return this._delegate.protocol()}streamWrite(e){e.startEncapsulation(),this._delegate.streamWriteImpl(e),e.writeString(this._resource),e.endEncapsulation()}timeout(){return this._delegate.timeout()}changeTimeout(e){return e===this._delegate.timeout()?this:new o(this._instance,this._delegate.changeTimeout(e),this._resource)}changeConnectionId(e){return e===this._delegate.connectionId()?this:new o(this._instance,this._delegate.changeConnectionId(e),this._resource)}compress(){return this._delegate.compress()}changeCompress(e){return e===this._delegate.compress()?this:new o(this._instance,this._delegate.changeCompress(e),this._resource)}datagram(){return this._delegate.datagram()}secure(){return this._delegate.secure()}connect(){return n.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)}hashCode(){return void 0===this._hashCode&&(this._hashCode=this._delegate.hashCode(),this._hashCode=s.addString(this._hashCode,this._resource)),this._hashCode}compareTo(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof o))return this.type()<e.type()?-1:1;const t=this._delegate.compareTo(e._delegate);return 0!==t?t:this._resource!==e._resource?this._resource<e._resource?-1:1:0}options(){let e=this._delegate.options();return null!==this._resource&&this._resource.length>0&&(e+=" -r ",e+=-1!==this._resource.indexOf(":")?'"'+this._resource+'"':this._resource),e}toConnectorString(){return this._delegate.toConnectorString()}initWithStream(e){this._resource=e.readString()}checkOption(e,t,i){if("-r"!==e)return!1;if(null===t)throw new n.EndpointParseException("no argument provided for -r option in endpoint "+i);return this._resource=t,!0}connectable(){return"undefined"!=typeof WebSocket}}n.WSEndpoint=o,t.A=n},6708:(e,t,i)=>{const n=i(8846).Ice;i(8789),i(4262),i(5896),i(9157),i(701);const r=n.AsyncResultBase,s=n.Debug,o=n.Protocol,a=n.UserException,c=n.OutputStream;class l extends r{constructor(e,t,i,n,r,s){super(e,t,i,n,r),this._completed=s,this._is=null,this._os=null!==e?new c(this._instance,o.currentProtocolEncoding):null,this._state=0,this._exception=null,this._sentSynchronously=!1}cancel(){this.cancelWithException(new n.InvocationCanceledException)}isCompleted(){return(this._state&l.Done)>0}isSent(){return(this._state&l.Sent)>0}throwLocalException(){if(null!==this._exception)throw this._exception}sentSynchronously(){return this._sentSynchronously}markSent(e){s.assert(0===(this._state&l.Done)),this._state|=l.Sent,e&&(this._state|=l.Done|l.OK,this._cancellationHandler=null,this.resolve())}markFinished(e,t){s.assert(0===(this._state&l.Done)),this._state|=l.Done,e&&(this._state|=l.OK),this._cancellationHandler=null,t?t(this):this.resolve()}markFinishedEx(e){s.assert(0===(this._state&l.Done)),this._exception=e,this._state|=l.Done,this._cancellationHandler=null,this.reject(e)}cancelWithException(e){this._cancellationHandler?this._cancellationHandler.asyncRequestCanceled(this,e):this._cancellationException=e}cancelable(e){if(this._cancellationException)try{throw this._cancellationException}finally{this._cancellationException=null}this._cancellationHandler=e}getOs(){return this._os}startReadParams(){return this._is.startEncapsulation(),this._is}endReadParams(){this._is.endEncapsulation()}readEmptyParams(){this._is.skipEmptyEncapsulation()}throwUserException(){if(s.assert(0!==(this._state&l.Done)),0===(this._state&l.OK))try{this._is.startEncapsulation(),this._is.throwException()}catch(e){throw e instanceof a&&this._is.endEncapsulation(),e}}}l.OK=1,l.Done=2,l.Sent=4,n.AsyncResult=l,e.exports.Ice=n},6815:(e,t,i)=>{const n=i(8846).Ice;n.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4},e.exports.Ice=n},6929:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(7788),i(9483),i(3239),i(1781),i(7548),i(8372),i(3418);const r=n.module("Ice"),s=r.Slice;s.defineDictionary(r,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),r.PropertiesAdmin=class extends r.Object{},r.PropertiesAdminPrx=class extends r.ObjectPrx{},s.defineOperations(r.PropertiesAdmin,r.PropertiesAdminPrx,["::Ice::Object","::Ice::PropertiesAdmin"],1,{getProperty:[,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,,,[["Ice.PropertyDictHelper"]],,,,]}),t.Ice=r},7081:(e,t,i)=>{const n=i(8846).Ice;i(3418),i(3793),i(9576),i(4262),i(5896),i(5527),i(4997),i(9157),i(701),i(3332);const r=n.OutputStream,s=n.Current,o=n.Debug,a=n.Context,c=n.Identity,l=n.Protocol,h=n.StringUtil;n.IncomingAsync=class{constructor(e,t,i,r,o){this._instance=e,this._response=r,this._connection=t,this._format=n.FormatType.DefaultFormat,this._current=new s,this._current.id=new c,this._current.adapter=i,this._current.con=this._connection,this._current.requestId=o,this._servant=null,this._locator=null,this._cookie={value:null},this._os=null,this._is=null}startWriteParams(){if(!this._response)throw new n.MarshalException("can't marshal out parameters for oneway dispatch");return o.assert(null!==this._current.encoding),this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),this._os.writeByte(0),this._os.startEncapsulation(this._current.encoding,this._format),this._os}endWriteParams(){this._response&&this._os.endEncapsulation()}writeEmptyParams(){this._response&&(o.assert(null!==this._current.encoding),this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),this._os.writeByte(l.replyOK),this._os.writeEmptyEncapsulation(this._current.encoding))}writeParamEncaps(e,t){this._response&&(o.assert(null!==this._current.encoding),this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),this._os.writeByte(t?l.replyOK:l.replyUserException),null===e||0===e.length?this._os.writeEmptyEncapsulation(this._current.encoding):this._os.writeEncapsulation(e))}setFormat(e){this._format=e}warning(e){o.assert(null!==this._instance);const t=[];if(t.push("dispatch exception:"),t.push("\nidentity: "+n.identityToString(this._current.id,this._instance.toStringMode())),t.push("\nfacet: "+h.escapeString(this._current.facet,"",this._instance.toStringMode())),t.push("\noperation: "+this._current.operation),null!==this._connection)try{for(let e=this._connection.getInfo();e;e=e.underlying)e instanceof n.IPConnectionInfo&&t.push("\nremote host: "+e.remoteAddress+" remote port: "+e.remotePort)}catch(e){}e.stack&&(t.push("\n"),t.push(e.stack)),this._instance.initializationData().logger.warning(t.join(""))}handleException(e,t){o.assert(null!==this._connection);const i=this._instance.initializationData().properties;if(e instanceof n.RequestFailedException)null===e.id&&(e.id=this._current.id),null===e.facet&&(e.facet=this._current.facet),null!==e.operation&&0!==e.operation.length||(e.operation=this._current.operation),i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1&&this.warning(e),this._response?(this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),e instanceof n.ObjectNotExistException?this._os.writeByte(l.replyObjectNotExist):e instanceof n.FacetNotExistException?this._os.writeByte(l.replyFacetNotExist):e instanceof n.OperationNotExistException?this._os.writeByte(l.replyOperationNotExist):o.assert(!1),e.id._write(this._os),null===e.facet||0===e.facet.length?n.StringSeqHelper.write(this._os,null):n.StringSeqHelper.write(this._os,[e.facet]),this._os.writeString(e.operation),this._connection.sendResponse(this._os)):this._connection.sendNoResponse();else if(e instanceof n.UnknownLocalException)i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.warning(e),this._response?(this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),this._os.writeByte(l.replyUnknownLocalException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os)):this._connection.sendNoResponse();else if(e instanceof n.UnknownUserException)i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.warning(e),this._response?(this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),this._os.writeByte(l.replyUnknownUserException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os)):this._connection.sendNoResponse();else if(e instanceof n.UnknownException)i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.warning(e),this._response?(this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),this._os.writeByte(l.replyUnknownException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os)):this._connection.sendNoResponse();else if(e instanceof n.LocalException)if(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.warning(e),this._response){this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),this._os.writeByte(l.replyUnknownLocalException);const t=[e.ice_id()];e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os)}else this._connection.sendNoResponse();else e instanceof n.UserException?this._response?(this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),this._os.writeByte(l.replyUserException),this._os.startEncapsulation(this._current.encoding,this._format),this._os.writeException(e),this._os.endEncapsulation(),this._connection.sendResponse(this._os)):this._connection.sendNoResponse():(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.warning(e),this._response?(this._os=new r(this._instance,l.currentProtocolEncoding),this._os.writeBlob(l.replyHdr),this._os.writeInt(this._current.requestId),this._os.writeByte(l.replyUnknownException),this._os.writeString(e.toString()+(e.stack?"\n"+e.stack:"")),this._connection.sendResponse(this._os)):this._connection.sendNoResponse());this._connection=null}invoke(e,t){this._is=t,this._current.id._read(this._is);const i=n.StringSeqHelper.read(this._is);if(i.length>0){if(i.length>1)throw new n.MarshalException;this._current.facet=i[0]}else this._current.facet="";this._current.operation=this._is.readString(),this._current.mode=n.OperationMode.valueOf(this._is.readByte()),this._current.ctx=new a;let r=this._is.readSize();for(;r-- >0;)this._current.ctx.set(this._is.readString(),this._is.readString());if(null!==e&&(this._servant=e.findServant(this._current.id,this._current.facet),null===this._servant&&(this._locator=e.findServantLocator(this._current.id.category),null===this._locator&&this._current.id.category.length>0&&(this._locator=e.findServantLocator("")),null!==this._locator)))try{this._servant=this._locator.locate(this._current,this._cookie)}catch(e){return this.skipReadParams(),void this.handleException(e,!1)}if(null===this._servant)try{throw null!==e&&e.hasServant(this._current.id)?new n.FacetNotExistException(this._current.id,this._current.facet,this._current.operation):new n.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation)}catch(e){return this.skipReadParams(),void this.handleException(e,!1)}try{o.assert(null!==this._servant);const e=this._servant._iceDispatch(this,this._current);if(null!==e)return void e.then(()=>this.completed(null,!0),e=>this.completed(e,!0));o.assert(!this._response||null!==this._os),this.completed(null,!1)}catch(e){this.completed(e,!1)}}startReadParams(){return this._current.encoding=this._is.startEncapsulation(),this._is}endReadParams(){this._is.endEncapsulation()}readEmptyParams(){this._current.encoding=this._is.skipEmptyEncapsulation()}readParamEncaps(){return this._current.encoding=new n.EncodingVersion,this._is.readEncapsulation(this._current.encoding)}skipReadParams(){this._current.encoding=this._is.skipEncapsulation()}completed(e,t){try{if(null!==this._locator){o.assert(null!==this._locator&&null!==this._servant);try{this._locator.finished(this._current,this._servant,this._cookie.value)}catch(e){return void this.handleException(e,t)}}o.assert(null!==this._connection),null!==e?this.handleException(e,t):this._response?this._connection.sendResponse(this._os):this._connection.sendNoResponse()}catch(e){if(!(e instanceof n.LocalException))throw e;this._connection.invokeException(e,1)}this._connection=null}},e.exports.Ice=n},7104:(e,t,i)=>{const{compunet:n}=i(3950),r=i(2425).Ice,s=i(294),o=new class{constructor(){this.communicator=null,this.chatServicePrx=null,this.groupServicePrx=null,this.isConnected=!1,this.callbackAdapter=null}async initialize(){try{console.log("Inicializando conexiÃ³n Ice...");const e=new r.InitializationData;e.properties=r.createProperties(),this.communicator=r.initialize(e);const t=this.communicator.stringToProxy("chat:ws -h localhost -p 10000");this.chatServicePrx=await n.ChatServicePrx.checkedCast(t);const i=this.communicator.stringToProxy("group:ws -h localhost -p 10000");if(this.groupServicePrx=await n.GroupServicePrx.checkedCast(i),!this.chatServicePrx||!this.groupServicePrx)throw new Error("No se pudieron crear los proxies de los servicios");return this.isConnected=!0,console.log("ConexiÃ³n Ice establecida correctamente"),!0}catch(e){throw console.error("Error al inicializar Ice:",e),this.isConnected=!1,e}}async shutdown(){if(this.communicator)try{await this.communicator.destroy(),this.isConnected=!1,console.log("ConexiÃ³n Ice cerrada")}catch(e){console.error("Error al cerrar la conexiÃ³n Ice:",e)}}async registerUser(e,t){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{await this.chatServicePrx.registerUser(e,t),console.log(`Usuario registrado: ${e}`)}catch(e){throw console.error("Error al registrar usuario:",e),e}}async getUser(e){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{return await this.chatServicePrx.getUser(e)}catch(e){throw console.error("Error al obtener usuario:",e),e}}async getAllUsers(){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{return await this.chatServicePrx.getAllUsers()}catch(e){throw console.error("Error al obtener usuarios:",e),e}}async sendDirectMessage(e,t,i){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{await this.chatServicePrx.sendDirectMessage(e,t,i),console.log(`Mensaje enviado de ${e} a ${t}`)}catch(e){throw console.error("Error al enviar mensaje directo:",e),e}}async getDirectChatMessages(e,t){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{return await this.chatServicePrx.getDirectChatMessages(e,t)}catch(e){throw console.error("Error al obtener mensajes directos:",e),e}}async loginAndSetup(e,t){await this.registerUser(e,t),await this.registerCallback(e),console.log(` Login completo: ${t}`)}async createGroup(e,t,i){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{const n=await this.groupServicePrx.createGroup(e,t,i);return console.log(`Grupo creado: ${n}`),n}catch(e){throw console.error("Error al crear grupo:",e),e}}async addMembersToGroup(e,t){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{await this.groupServicePrx.addMembersToGroup(e,t),console.log(`Miembros agregados al grupo ${e}`)}catch(e){throw console.error("Error al agregar miembros al grupo:",e),e}}async getGroupMembers(e){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{return await this.groupServicePrx.getGroupMembers(e)}catch(e){throw console.error("Error al obtener miembros del grupo:",e),e}}async sendGroupMessage(e,t,i){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{await this.groupServicePrx.sendGroupMessage(e,t,i),console.log(`Mensaje enviado al grupo ${t}`)}catch(e){throw console.error("Error al enviar mensaje al grupo:",e),e}}async sendDirectAudio(e,t,i,n){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{await this.chatServicePrx.sendDirectAudio(e,t,i,n),console.log(`Audio enviado de ${e} a ${t}`)}catch(e){throw console.error("Error al enviar audio directo:",e),e}}async sendGroupAudio(e,t,i,n){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{await this.groupServicePrx.sendGroupAudio(e,t,i,n),console.log(`Audio enviado al grupo ${t}`)}catch(e){throw console.error("Error al enviar audio al grupo:",e),e}}async getGroupChatMessages(e){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{return await this.groupServicePrx.getGroupChatMessages(e)}catch(e){throw console.error("Error al obtener mensajes del grupo:",e),e}}async getUserDirectChats(e){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{return await this.chatServicePrx.getUserDirectChats(e)}catch(e){throw console.error("Error al obtener chats directos:",e),e}}async getUserGroupChats(e){if(!this.isConnected)throw new Error("No hay conexiÃ³n con el servidor");try{return await this.groupServicePrx.getUserGroupChats(e)}catch(e){throw console.error("Error al obtener grupos del usuario:",e),e}}async registerCallback(e){try{console.log("Registrando callback para:",e),this.callbackAdapter=await this.communicator.createObjectAdapter(""),await this.callbackAdapter.activate();const t=new s,i=new r.Identity("callback_"+e,""),n=this.callbackAdapter.add(t,i);await this.chatServicePrx.registerCallback(n,e),console.log("Callback registrado con Ã©xito para:",e)}catch(e){throw console.error("Error registrando callback:",e),e}}async unregisterCallback(e){try{await this.chatServicePrx.unregisterCallback(e),console.log("Callback eliminado para:",e)}catch(e){console.error("Error eliminando callback:",e)}}};e.exports=o},7149:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(9157),i(701);const r=n.OutputStream,s=n.Debug,o=n.Protocol;n.BatchRequestQueue=class{constructor(e,t){if(this._batchStreamInUse=!1,this._batchRequestNum=0,this._batchStream=new r(e,o.currentProtocolEncoding),this._batchStream.writeBlob(o.requestBatchHdr),this._batchMarker=this._batchStream.size,this._exception=null,this._maxSize=e.batchAutoFlushSize(),this._maxSize>0&&t){const t=e.initializationData().properties.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65507);t<this._maxSize&&(this._maxSize=t)}}prepareBatchRequest(e){if(this._exception)throw this._exception;this._batchStream.swap(e)}finishBatchRequest(e,t,i){this._batchStream.swap(e);try{this._maxSize>0&&this._batchStream.size>=this._maxSize&&t.ice_flushBatchRequests(),s.assert(this._batchMarker<this._batchStream.size),this._batchMarker=this._batchStream.size,++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}}abortBatchRequest(e){this._batchStream.swap(e),this._batchStream.resize(this._batchMarker)}swap(e){if(0===this._batchRequestNum)return 0;let t=null;if(this._batchMarker<this._batchStream.size){const e=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker,t=this._batchStream.buffer.getArray(e),this._batchStream.resize(this._batchMarker)}const i=this._batchRequestNum;return this._batchStream.swap(e),this._batchRequestNum=0,this._batchStream.writeBlob(o.requestBatchHdr),this._batchMarker=this._batchStream.size,null!==t&&this._batchStream.writeBlob(t),i}destroy(e){this._exception=e}isEmpty(){return this._batchStream.size===o.requestBatchHdr.length}},e.exports.Ice=n},7168:(e,t,i)=>{const n=i(1216).Ice,r=n.Timer;class s extends Promise{constructor(e){let t,i;super((n,r)=>{t=n,i=r,e&&e(n,r)}),this.resolve=t,this.reject=i}delay(e){return this.then(t=>new s((i,n)=>r.setTimeout(()=>i(t),e)),t=>new s((i,n)=>r.setTimeout(()=>n(t),e)))}static get[Symbol.species](){return s}static delay(e,t){return new s(i=>r.setTimeout(()=>i(t),e))}static try(e){return s.resolve().then(e)}}n.Promise=s,e.exports.Ice=n},7238:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(427),i(2525);const r=n.module("Glacier2");i(8930),i(1488),i(1930),i(7788),i(5896),i(9483),i(3239),i(1781),i(7548),i(8372),i(2368);const s=n.module("Ice"),o=s.Slice;r.SessionNotExistException=class extends s.UserException{constructor(e=""){super(e)}static get _parent(){return s.UserException}static get _id(){return"::Glacier2::SessionNotExistException"}_mostDerivedType(){return r.SessionNotExistException}},r.Router=class extends s.Object{static get _iceImplements(){return[s.Router]}},r.RouterPrx=class extends s.ObjectPrx{static get _implements(){return[s.RouterPrx]}},o.defineOperations(r.Router,r.RouterPrx,["::Glacier2::Router","::Ice::Object","::Ice::Router"],0,{getCategoryForClient:[,2,1,,[7],,,,,],createSession:[,,,2,["Glacier2.SessionPrx"],[[7],[7]],,[r.CannotCreateSessionException,r.PermissionDeniedException],,],createSessionFromSecureConnection:[,,,2,["Glacier2.SessionPrx"],,,[r.CannotCreateSessionException,r.PermissionDeniedException],,],refreshSession:[,,,,,,,[r.SessionNotExistException],,],destroySession:[,,,,,,,[r.SessionNotExistException],,],getSessionTimeout:[,2,1,,[4],,,,,],getACMTimeout:[,2,1,,[3],,,,,]}),t.Glacier2=r},7356:(e,t,i)=>{const n=i(8846).Ice;i(3239),i(359),i(403),i(9299);const r=n.HashMap,s=n.LocatorInfo,o=n.LocatorPrx,a=n.LocatorTable;n.LocatorManager=class{constructor(e){this._background=e.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0,this._table=new r(r.compareEquals),this._locatorTables=new r(r.compareEquals)}destroy(){for(const e of this._table.values())e.destroy();this._table.clear(),this._locatorTables.clear()}find(e){if(null===e)return null;const t=o.uncheckedCast(e.ice_locator(null));let i=this._table.get(t);if(void 0===i){let e=this._locatorTables.get(t.ice_getIdentity());void 0===e&&(e=new a,this._locatorTables.set(t.ice_getIdentity(),e)),i=new s(t,e,this._background),this._table.set(t,i)}return i}},e.exports.Ice=n},7416:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(9483),i(3239),i(1781),i(7548),i(8372),i(8220);const r=n.module("Ice");r.Slice;let s=n.module("IceSSL");s.EndpointInfo=class extends r.EndpointInfo{constructor(e,t,i){super(e,t,i)}},t.IceSSL=s},7422:(e,t,i)=>{const n=i(6815).Ice,r=n.ReferenceMode;n.ConnectionRequestHandler=class{constructor(e,t){this._reference=e,this._response=e.getMode()==r.ModeTwoway,this._connection=t}update(e,t){try{if(e===this)return t;if(e.getConnection()===this._connection)return t}catch(e){}return this}sendAsyncRequest(e){return e.invokeRemote(this._connection,this._response)}asyncRequestCanceled(e){return this._connection.asyncRequestCanceled(e)}getReference(){return this._reference}getConnection(){return this._connection}},e.exports.Ice=n},7548:(e,t,i)=>{const n=i(8846).Ice,r=n._ModuleRegistry,s=function(e,t){return e===t||null!=e&&null!=t&&e.prototype===t.prototype&&("function"==typeof e.equals?e.equals(t):(e instanceof Array||e instanceof Uint8Array)&&o.equals(e,t,s))};class o{static clone(e){return void 0===e?e:null===e?[]:e.slice()}static equals(e,t,i){if(e.length!=t.length)return!1;const n=i||s;for(let i=0;i<e.length;++i)if(!n.call(n,e[i],t[i]))return!1;return!0}static shuffle(e){for(let t=e.length;t>1;--t){const i=e[t-1],n=Math.floor(Math.random()*t);e[t-1]=e[n],e[n]=i}}}o.eq=s,n.Slice.defineSequence=function(e,t,i,s,o){let a=null;Object.defineProperty(e,t,{get:()=>(null===a&&(a=n.StreamHelpers.generateSeqHelper(r.type(i),s,r.type(o))),a)})},n.ArrayUtil=o,e.exports.Ice=n},7605:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice,r.Instrumentation=n.module("Ice.Instrumentation"),t.Ice=r},7613:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry,r=i(427).Glacier2;i(8930),i(1488),i(1930),i(7788),i(9483),i(3239),i(1781),i(7548),i(8372);const s=n.module("Ice"),o=i(7868).IceGrid,a=s.Slice;o.Session=class extends s.Object{static get _iceImplements(){return[r.Session]}},o.SessionPrx=class extends s.ObjectPrx{static get _implements(){return[r.SessionPrx]}},a.defineOperations(o.Session,o.SessionPrx,["::Glacier2::Session","::Ice::Object","::IceGrid::Session"],2,{keepAlive:[,2,2,,,,,,,],allocateObjectById:[,,,,[9],[[s.Identity]],,[o.AllocationException,o.ObjectNotRegisteredException],,],allocateObjectByType:[,,,,[9],[[7]],,[o.AllocationException],,],releaseObject:[,,,,,[[s.Identity]],,[o.AllocationException,o.ObjectNotRegisteredException],,],setAllocationTimeout:[,2,2,,,[[3]],,,,]}),t.IceGrid=o},7622:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry,r=i(427).Glacier2;i(8930),i(1488),i(1930),i(7788),i(2676),i(1193),i(9483),i(3239),i(1781),i(7548),i(8372),i(5527),i(3418),i(7812),i(5352);const s=n.module("Ice");i(7868),i(8880);const o=n.module("IceGrid"),a=s.Slice;o.ServerState=a.defineEnum([["Inactive",0],["Activating",1],["ActivationTimedOut",2],["Active",3],["Deactivating",4],["Destroying",5],["Destroyed",6]]),a.defineDictionary(o,"StringObjectProxyDict","StringObjectProxyDictHelper","Ice.StringHelper","Ice.ObjectPrx",!1,void 0,void 0),o.ObjectInfo=class{constructor(e=null,t=""){this.proxy=e,this.type=t}_write(e){e.writeProxy(this.proxy),e.writeString(this.type)}_read(e){this.proxy=e.readProxy(),this.type=e.readString()}static get minWireSize(){return 3}},a.defineStruct(o.ObjectInfo,!1,!0),a.defineSequence(o,"ObjectInfoSeqHelper","IceGrid.ObjectInfo",!1),o.AdapterInfo=class{constructor(e="",t=null,i=""){this.id=e,this.proxy=t,this.replicaGroupId=i}_write(e){e.writeString(this.id),e.writeProxy(this.proxy),e.writeString(this.replicaGroupId)}_read(e){this.id=e.readString(),this.proxy=e.readProxy(),this.replicaGroupId=e.readString()}static get minWireSize(){return 4}},a.defineStruct(o.AdapterInfo,!1,!0),a.defineSequence(o,"AdapterInfoSeqHelper","IceGrid.AdapterInfo",!1),o.ServerInfo=class{constructor(e="",t="",i=0,n="",r=null,s=""){this.application=e,this.uuid=t,this.revision=i,this.node=n,this.descriptor=r,this.sessionId=s}_write(e){e.writeString(this.application),e.writeString(this.uuid),e.writeInt(this.revision),e.writeString(this.node),e.writeValue(this.descriptor),e.writeString(this.sessionId)}_read(e){this.application=e.readString(),this.uuid=e.readString(),this.revision=e.readInt(),this.node=e.readString(),e.readValue(e=>this.descriptor=e,o.ServerDescriptor),this.sessionId=e.readString()}static get minWireSize(){return 9}},a.defineStruct(o.ServerInfo,!1,!0),o.NodeInfo=class{constructor(e="",t="",i="",n="",r="",s="",o=0,a=""){this.name=e,this.os=t,this.hostname=i,this.release=n,this.version=r,this.machine=s,this.nProcessors=o,this.dataDir=a}_write(e){e.writeString(this.name),e.writeString(this.os),e.writeString(this.hostname),e.writeString(this.release),e.writeString(this.version),e.writeString(this.machine),e.writeInt(this.nProcessors),e.writeString(this.dataDir)}_read(e){this.name=e.readString(),this.os=e.readString(),this.hostname=e.readString(),this.release=e.readString(),this.version=e.readString(),this.machine=e.readString(),this.nProcessors=e.readInt(),this.dataDir=e.readString()}static get minWireSize(){return 11}},a.defineStruct(o.NodeInfo,!0,!0),o.RegistryInfo=class{constructor(e="",t=""){this.name=e,this.hostname=t}_write(e){e.writeString(this.name),e.writeString(this.hostname)}_read(e){this.name=e.readString(),this.hostname=e.readString()}static get minWireSize(){return 2}},a.defineStruct(o.RegistryInfo,!0,!0),a.defineSequence(o,"RegistryInfoSeqHelper","IceGrid.RegistryInfo",!1),o.LoadInfo=class{constructor(e=0,t=0,i=0){this.avg1=e,this.avg5=t,this.avg15=i}_write(e){e.writeFloat(this.avg1),e.writeFloat(this.avg5),e.writeFloat(this.avg15)}_read(e){this.avg1=e.readFloat(),this.avg5=e.readFloat(),this.avg15=e.readFloat()}static get minWireSize(){return 12}},a.defineStruct(o.LoadInfo,!1,!1),o.ApplicationInfo=class{constructor(e="",t=new s.Long(0,0),i="",n=new s.Long(0,0),r="",a=0,c=new o.ApplicationDescriptor){this.uuid=e,this.createTime=t,this.createUser=i,this.updateTime=n,this.updateUser=r,this.revision=a,this.descriptor=c}_write(e){e.writeString(this.uuid),e.writeLong(this.createTime),e.writeString(this.createUser),e.writeLong(this.updateTime),e.writeString(this.updateUser),e.writeInt(this.revision),o.ApplicationDescriptor.write(e,this.descriptor)}_read(e){this.uuid=e.readString(),this.createTime=e.readLong(),this.createUser=e.readString(),this.updateTime=e.readLong(),this.updateUser=e.readString(),this.revision=e.readInt(),this.descriptor=o.ApplicationDescriptor.read(e,this.descriptor)}static get minWireSize(){return 33}},a.defineStruct(o.ApplicationInfo,!1,!0),a.defineSequence(o,"ApplicationInfoSeqHelper","IceGrid.ApplicationInfo",!1),o.ApplicationUpdateInfo=class{constructor(e=new s.Long(0,0),t="",i=0,n=new o.ApplicationUpdateDescriptor){this.updateTime=e,this.updateUser=t,this.revision=i,this.descriptor=n}_write(e){e.writeLong(this.updateTime),e.writeString(this.updateUser),e.writeInt(this.revision),o.ApplicationUpdateDescriptor.write(e,this.descriptor)}_read(e){this.updateTime=e.readLong(),this.updateUser=e.readString(),this.revision=e.readInt(),this.descriptor=o.ApplicationUpdateDescriptor.read(e,this.descriptor)}static get minWireSize(){return 28}},a.defineStruct(o.ApplicationUpdateInfo,!1,!0),o.Admin=class extends s.Object{},o.AdminPrx=class extends s.ObjectPrx{},a.defineOperations(o.Admin,o.AdminPrx,["::Ice::Object","::IceGrid::Admin"],1,{addApplication:[,,,,,[[o.ApplicationDescriptor]],,[o.AccessDeniedException,o.DeploymentException],!0],syncApplication:[,,,,,[[o.ApplicationDescriptor]],,[o.AccessDeniedException,o.ApplicationNotExistException,o.DeploymentException],!0],updateApplication:[,,,,,[[o.ApplicationUpdateDescriptor]],,[o.AccessDeniedException,o.ApplicationNotExistException,o.DeploymentException],!0],syncApplicationWithoutRestart:[,,,,,[[o.ApplicationDescriptor]],,[o.AccessDeniedException,o.ApplicationNotExistException,o.DeploymentException],!0],updateApplicationWithoutRestart:[,,,,,[[o.ApplicationUpdateDescriptor]],,[o.AccessDeniedException,o.ApplicationNotExistException,o.DeploymentException],!0],removeApplication:[,,,,,[[7]],,[o.AccessDeniedException,o.ApplicationNotExistException,o.DeploymentException],,],instantiateServer:[,,,,,[[7],[7],[o.ServerInstanceDescriptor]],,[o.AccessDeniedException,o.ApplicationNotExistException,o.DeploymentException],,],patchApplication:[,,,,,[[7],[1]],,[o.ApplicationNotExistException,o.PatchException],,],getApplicationInfo:[,2,1,,[o.ApplicationInfo],[[7]],,[o.ApplicationNotExistException],,!0],getDefaultApplicationDescriptor:[,2,1,,[o.ApplicationDescriptor],,,[o.DeploymentException],,!0],getAllApplicationNames:[,2,1,,["Ice.StringSeqHelper"],,,,,],getServerInfo:[,2,1,,[o.ServerInfo],[[7]],,[o.ServerNotExistException],,!0],getServerState:[,2,1,,[o.ServerState._helper],[[7]],,[o.DeploymentException,o.NodeUnreachableException,o.ServerNotExistException],,],getServerPid:[,2,1,,[3],[[7]],,[o.DeploymentException,o.NodeUnreachableException,o.ServerNotExistException],,],getServerAdminCategory:[,2,2,,[7],,,,,],getServerAdmin:[,2,2,,[9],[[7]],,[o.DeploymentException,o.NodeUnreachableException,o.ServerNotExistException],,],enableServer:[,2,2,,,[[7],[1]],,[o.DeploymentException,o.NodeUnreachableException,o.ServerNotExistException],,],isServerEnabled:[,2,1,,[1],[[7]],,[o.DeploymentException,o.NodeUnreachableException,o.ServerNotExistException],,],startServer:[,,,,,[[7]],,[o.DeploymentException,o.NodeUnreachableException,o.ServerNotExistException,o.ServerStartException],,],stopServer:[,,,,,[[7]],,[o.DeploymentException,o.NodeUnreachableException,o.ServerNotExistException,o.ServerStopException],,],patchServer:[,,,,,[[7],[1]],,[o.DeploymentException,o.NodeUnreachableException,o.PatchException,o.ServerNotExistException],,],sendSignal:[,,,,,[[7],[7]],,[o.BadSignalException,o.DeploymentException,o.NodeUnreachableException,o.ServerNotExistException],,],getAllServerIds:[,2,1,,["Ice.StringSeqHelper"],,,,,],getAdapterInfo:[,2,1,,["IceGrid.AdapterInfoSeqHelper"],[[7]],,[o.AdapterNotExistException],,],removeAdapter:[,,,,,[[7]],,[o.AdapterNotExistException,o.DeploymentException],,],getAllAdapterIds:[,2,1,,["Ice.StringSeqHelper"],,,,,],addObject:[,,,,,[[9]],,[o.DeploymentException,o.ObjectExistsException],,],updateObject:[,,,,,[[9]],,[o.DeploymentException,o.ObjectNotRegisteredException],,],addObjectWithType:[,,,,,[[9],[7]],,[o.DeploymentException,o.ObjectExistsException],,],removeObject:[,,,,,[[s.Identity]],,[o.DeploymentException,o.ObjectNotRegisteredException],,],getObjectInfo:[,2,1,,[o.ObjectInfo],[[s.Identity]],,[o.ObjectNotRegisteredException],,],getObjectInfosByType:[,2,1,,["IceGrid.ObjectInfoSeqHelper"],[[7]],,,,],getAllObjectInfos:[,2,1,,["IceGrid.ObjectInfoSeqHelper"],[[7]],,,,],pingNode:[,2,1,,[1],[[7]],,[o.NodeNotExistException],,],getNodeLoad:[,2,1,,[o.LoadInfo],[[7]],,[o.NodeNotExistException,o.NodeUnreachableException],,],getNodeInfo:[,2,1,,[o.NodeInfo],[[7]],,[o.NodeNotExistException,o.NodeUnreachableException],,],getNodeAdmin:[,2,2,,[9],[[7]],,[o.NodeNotExistException,o.NodeUnreachableException],,],getNodeProcessorSocketCount:[,2,1,,[3],[[7]],,[o.NodeNotExistException,o.NodeUnreachableException],,],shutdownNode:[,,,,,[[7]],,[o.NodeNotExistException,o.NodeUnreachableException],,],getNodeHostname:[,2,1,,[7],[[7]],,[o.NodeNotExistException,o.NodeUnreachableException],,],getAllNodeNames:[,2,1,,["Ice.StringSeqHelper"],,,,,],pingRegistry:[,2,2,,[1],[[7]],,[o.RegistryNotExistException],,],getRegistryInfo:[,2,2,,[o.RegistryInfo],[[7]],,[o.RegistryNotExistException,o.RegistryUnreachableException],,],getRegistryAdmin:[,2,2,,[9],[[7]],,[o.RegistryNotExistException],,],shutdownRegistry:[,2,2,,,[[7]],,[o.RegistryNotExistException,o.RegistryUnreachableException],,],getAllRegistryNames:[,2,2,,["Ice.StringSeqHelper"],,,,,],shutdown:[,,,,,,,,,],getSliceChecksums:[,2,1,,["Ice.SliceChecksumDictHelper"],,,,,]}),o.FileIterator=class extends s.Object{},o.FileIteratorPrx=class extends s.ObjectPrx{},a.defineOperations(o.FileIterator,o.FileIteratorPrx,["::Ice::Object","::IceGrid::FileIterator"],1,{read:[,,,,[1],[[3]],[["Ice.StringSeqHelper"]],[o.FileNotAvailableException],,],destroy:[,,,,,,,,,]}),o.ServerDynamicInfo=class{constructor(e="",t=o.ServerState.Inactive,i=0,n=!1){this.id=e,this.state=t,this.pid=i,this.enabled=n}_write(e){e.writeString(this.id),o.ServerState._write(e,this.state),e.writeInt(this.pid),e.writeBool(this.enabled)}_read(e){this.id=e.readString(),this.state=o.ServerState._read(e),this.pid=e.readInt(),this.enabled=e.readBool()}static get minWireSize(){return 7}},a.defineStruct(o.ServerDynamicInfo,!0,!0),a.defineSequence(o,"ServerDynamicInfoSeqHelper","IceGrid.ServerDynamicInfo",!1),o.AdapterDynamicInfo=class{constructor(e="",t=null){this.id=e,this.proxy=t}_write(e){e.writeString(this.id),e.writeProxy(this.proxy)}_read(e){this.id=e.readString(),this.proxy=e.readProxy()}static get minWireSize(){return 3}},a.defineStruct(o.AdapterDynamicInfo,!1,!0),a.defineSequence(o,"AdapterDynamicInfoSeqHelper","IceGrid.AdapterDynamicInfo",!1),o.NodeDynamicInfo=class{constructor(e=new o.NodeInfo,t=null,i=null){this.info=e,this.servers=t,this.adapters=i}_write(e){o.NodeInfo.write(e,this.info),o.ServerDynamicInfoSeqHelper.write(e,this.servers),o.AdapterDynamicInfoSeqHelper.write(e,this.adapters)}_read(e){this.info=o.NodeInfo.read(e,this.info),this.servers=o.ServerDynamicInfoSeqHelper.read(e),this.adapters=o.AdapterDynamicInfoSeqHelper.read(e)}static get minWireSize(){return 13}},a.defineStruct(o.NodeDynamicInfo,!1,!0),o.RegistryObserver=class extends s.Object{},o.RegistryObserverPrx=class extends s.ObjectPrx{},a.defineOperations(o.RegistryObserver,o.RegistryObserverPrx,["::Ice::Object","::IceGrid::RegistryObserver"],1,{registryInit:[,,,,,[["IceGrid.RegistryInfoSeqHelper"]],,,,],registryUp:[,,,,,[[o.RegistryInfo]],,,,],registryDown:[,,,,,[[7]],,,,]}),a.defineSequence(o,"NodeDynamicInfoSeqHelper","IceGrid.NodeDynamicInfo",!1),o.NodeObserver=class extends s.Object{},o.NodeObserverPrx=class extends s.ObjectPrx{},a.defineOperations(o.NodeObserver,o.NodeObserverPrx,["::Ice::Object","::IceGrid::NodeObserver"],1,{nodeInit:[,,,,,[["IceGrid.NodeDynamicInfoSeqHelper"]],,,,],nodeUp:[,,,,,[[o.NodeDynamicInfo]],,,,],nodeDown:[,,,,,[[7]],,,,],updateServer:[,,,,,[[7],[o.ServerDynamicInfo]],,,,],updateAdapter:[,,,,,[[7],[o.AdapterDynamicInfo]],,,,]}),o.ApplicationObserver=class extends s.Object{},o.ApplicationObserverPrx=class extends s.ObjectPrx{},a.defineOperations(o.ApplicationObserver,o.ApplicationObserverPrx,["::Ice::Object","::IceGrid::ApplicationObserver"],1,{applicationInit:[,,,,,[[3],["IceGrid.ApplicationInfoSeqHelper"]],,,!0],applicationAdded:[,,,,,[[3],[o.ApplicationInfo]],,,!0],applicationRemoved:[,,,,,[[3],[7]],,,,],applicationUpdated:[,,,,,[[3],[o.ApplicationUpdateInfo]],,,!0]}),o.AdapterObserver=class extends s.Object{},o.AdapterObserverPrx=class extends s.ObjectPrx{},a.defineOperations(o.AdapterObserver,o.AdapterObserverPrx,["::Ice::Object","::IceGrid::AdapterObserver"],1,{adapterInit:[,,,,,[["IceGrid.AdapterInfoSeqHelper"]],,,,],adapterAdded:[,,,,,[[o.AdapterInfo]],,,,],adapterUpdated:[,,,,,[[o.AdapterInfo]],,,,],adapterRemoved:[,,,,,[[7]],,,,]}),o.ObjectObserver=class extends s.Object{},o.ObjectObserverPrx=class extends s.ObjectPrx{},a.defineOperations(o.ObjectObserver,o.ObjectObserverPrx,["::Ice::Object","::IceGrid::ObjectObserver"],1,{objectInit:[,,,,,[["IceGrid.ObjectInfoSeqHelper"]],,,,],objectAdded:[,,,,,[[o.ObjectInfo]],,,,],objectUpdated:[,,,,,[[o.ObjectInfo]],,,,],objectRemoved:[,,,,,[[s.Identity]],,,,]}),o.AdminSession=class extends s.Object{static get _iceImplements(){return[r.Session]}},o.AdminSessionPrx=class extends s.ObjectPrx{static get _implements(){return[r.SessionPrx]}},a.defineOperations(o.AdminSession,o.AdminSessionPrx,["::Glacier2::Session","::Ice::Object","::IceGrid::AdminSession"],2,{keepAlive:[,2,2,,,,,,,],getAdmin:[,2,1,,["IceGrid.AdminPrx"],,,,,],getAdminCallbackTemplate:[,2,2,,[9],,,,,],setObservers:[,2,2,,,[["IceGrid.RegistryObserverPrx"],["IceGrid.NodeObserverPrx"],["IceGrid.ApplicationObserverPrx"],["IceGrid.AdapterObserverPrx"],["IceGrid.ObjectObserverPrx"]],,[o.ObserverAlreadyRegisteredException],,],setObserversByIdentity:[,2,2,,,[[s.Identity],[s.Identity],[s.Identity],[s.Identity],[s.Identity]],,[o.ObserverAlreadyRegisteredException],,],startUpdate:[,,,,[3],,,[o.AccessDeniedException],,],finishUpdate:[,,,,,,,[o.AccessDeniedException],,],getReplicaName:[,2,2,,[7],,,,,],openServerLog:[,,,,["IceGrid.FileIteratorPrx"],[[7],[7],[3]],,[o.DeploymentException,o.FileNotAvailableException,o.NodeUnreachableException,o.ServerNotExistException],,],openServerStdErr:[,,,,["IceGrid.FileIteratorPrx"],[[7],[3]],,[o.DeploymentException,o.FileNotAvailableException,o.NodeUnreachableException,o.ServerNotExistException],,],openServerStdOut:[,,,,["IceGrid.FileIteratorPrx"],[[7],[3]],,[o.DeploymentException,o.FileNotAvailableException,o.NodeUnreachableException,o.ServerNotExistException],,],openNodeStdErr:[,,,,["IceGrid.FileIteratorPrx"],[[7],[3]],,[o.FileNotAvailableException,o.NodeNotExistException,o.NodeUnreachableException],,],openNodeStdOut:[,,,,["IceGrid.FileIteratorPrx"],[[7],[3]],,[o.FileNotAvailableException,o.NodeNotExistException,o.NodeUnreachableException],,],openRegistryStdErr:[,,,,["IceGrid.FileIteratorPrx"],[[7],[3]],,[o.FileNotAvailableException,o.RegistryNotExistException,o.RegistryUnreachableException],,],openRegistryStdOut:[,,,,["IceGrid.FileIteratorPrx"],[[7],[3]],,[o.FileNotAvailableException,o.RegistryNotExistException,o.RegistryUnreachableException],,]}),t.IceGrid=o},7659:e=>{"use strict";var t={};e.exports=function(e,i){var n=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},7788:(e,t,i)=>{const n=i(8846).Ice,r=n._ModuleRegistry;i(9576),i(5896),i(2698),i(8930),i(1930),i(5874),i(8372);const s=[n.ByteHelper,n.BoolHelper,n.ShortHelper,n.IntHelper,n.LongHelper,n.FloatHelper,n.DoubleHelper,n.StringHelper,n.Value,n.ObjectPrx,n.Value];function o(e){let t=e[0];const i=typeof t;return"number"===i?t=s[e[0]]:"string"===i&&(t=r.type(t)),{type:t,isObject:!0===e[1],tag:e[2]}}function a(e,t){const i={};let r;i.name=e,i.servantMethod=t[0]?t[0]:e,i.mode=t[1]?n.OperationMode.valueOf(t[1]):n.OperationMode.Normal,i.sendMode=t[2]?n.OperationMode.valueOf(t[2]):n.OperationMode.Normal,i.format=t[3]?n.FormatType.valueOf(t[3]):n.FormatType.DefaultFormat,t[4]&&(r=o(t[4]),r.pos=0),i.returns=r;const s=[],a=[];if(t[5])for(let e=0;e<t[5].length;++e){const i=o(t[5][e]);i.pos=e,s.push(i),i.tag&&a.push(i)}a.sort((e,t)=>e.tag-t.tag),i.inParams=s,i.inParamsOpt=a;const c=[],l=[];if(t[6]){const e=r?1:0;for(let i=0;i<t[6].length;++i){const n=o(t[6][i]);n.pos=i+e,c.push(n),n.tag&&l.push(n)}}r&&r.tag&&l.push(r),l.sort((e,t)=>e.tag-t.tag),i.outParams=c,i.outParamsOpt=l;const h=[];if(t[7])for(let e=0;e<t[7].length;++e)h.push(t[7][e]);return i.exceptions=h,i.sendsClasses=!0===t[8],i.returnsClasses=!0===t[9],i}class c{constructor(e){this.raw=e,this.parsed={}}find(e){let t=this.parsed[e];return void 0===t&&void 0!==this.raw[e]&&(t=a(e,this.raw[e]),this.parsed[e]=t),t}}function l(e,t,i,n,r,s,o){const a=(t,i)=>{i?t.isObject?e.readOptionalValue(t.tag,e=>{s[t.pos+o]=e},t.type):s[t.pos+o]=t.type.readOptional(e,t.tag):t.isObject?e.readValue(e=>{s[t.pos+o]=e},t.type):s[t.pos+o]=t.type.read(e)};for(let e=0;e<i.length;++e)i[e].tag||a(i[e],!1);t&&a(t,!1);for(let e=0;e<n.length;++e)a(n[e],!0);r&&e.readPendingValues()}function h(e,t,i,n,r,s){for(let i=0;i<n.length;++i){const r=n[i];r.tag||r.type.write(e,t[r.pos])}i&&i.type.write(e,t[i.pos]);for(let i=0;i<r.length;++i){const n=r[i];n.type.writeOptional(e,n.tag,t[n.pos])}s&&e.writePendingValues()}function u(e,t,i){let n;for(let r=0;void 0===n&&r<e.length;++r){const s=e[r];n=s[t],void 0===n&&(-1===i.indexOf(s)&&i.push(s),s._iceImplements&&(n=u(s._iceImplements,t,i)))}return n}function d(e,t,i){const r=i[0]?i[0]:t;let s=null;e.prototype[r]=function(...e){null===s&&(s=a(t,i));const r=e[s.inParams.length];let o=null;s.inParams.length>0&&(o=function(e,t){for(let e=0;e<s.inParams.length;++e){const i=s.inParams[e],r=t[i.pos];if(!(i.tag&&void 0===r||"function"!=typeof i.type.validate||i.type.validate(r)))throw new n.MarshalException("invalid value for argument "+(e+1)+" in operation `"+s.servantMethod+"'")}h(e,t,void 0,s.inParams,s.inParamsOpt,s.sendsClasses)});let c=null;return(s.returns||s.outParams.length>0)&&(c=function(e){const t=[],i=e.startReadParams();let n;return s.returns&&!s.returns.tag&&(n=s.returns),l(i,n,s.outParams,s.outParamsOpt,s.returnsClasses,t,0),e.endReadParams(),1==t.length?t[0]:t}),n.ObjectPrx._invoke(this,s.name,s.sendMode,s.format,r,o,c,s.exceptions,Array.prototype.slice.call(e))}}const p=n.Slice;p.defineOperations=function(e,t,i,r,s){if(s&&(e._iceOps=new c(s)),e.prototype._iceDispatch=function(t,i){const r=function(e,t){const i="_iceD_"+t;let r,s=e[i];if(void 0===s){r=[];let t=e;for(;t&&void 0===s;)t._iceImplements&&(s=u(t._iceImplements,i,r)),t=Object.getPrototypeOf(t);void 0!==s&&(e[i]=s)}if(void 0===s){let o,a;if(e._iceOps&&(o=e._iceOps.find(t)),void 0===o){let i=Object.getPrototypeOf(e);for(;void 0===o&&i;)i._iceOps&&void 0!==(o=i._iceOps.find(t))&&(a=i),i=Object.getPrototypeOf(i);for(let e=0;void 0===o&&e<r.length;++e){const i=r[e];i._iceOps&&void 0!==(o=i._iceOps.find(t))&&(a=i)}}void 0!==o&&(s=function(e,t,i){return function(e,t,i,r){const s=e[t.servantMethod];if(void 0===s||"function"!=typeof s)throw new n.UnknownException("servant for identity "+r.adapter.getCommunicator().identityToString(r.id)+" does not define operation `"+t.servantMethod+"'");const o=[];0===t.inParams.length?i.readEmptyParams():(l(i.startReadParams(),void 0,t.inParams,t.inParamsOpt,t.sendsClasses,o,0),i.endReadParams()),o.push(r),i.setFormat(t.format);const a=function(e){const r=t.outParams.length+(t.returns?1:0);if(r>1&&!(e instanceof Array))throw new n.MarshalException("operation `"+t.servantMethod+"' should return an array");if(1===r&&(e=[e]),void 0===t.returns&&0===t.outParams.length){if(e&&e.length>0)throw new n.MarshalException("operation `"+t.servantMethod+"' shouldn't return any value");i.writeEmptyParams()}else{let n;t.returns&&!t.returns.tag&&(n=t.returns),h(i.startWriteParams(),e,n,t.outParams,t.outParamsOpt,t.returnsClasses),i.endWriteParams()}},c=s.apply(e,o);return c instanceof Promise?c.then(a):(a(c),null)}(e,o,t,i)},e[i]=s,a&&(a[i]=s))}return s}(e,i.operation);if(void 0===r||"function"!=typeof r)throw new n.OperationNotExistException(i.id,i.facet,i.operation);return r.call(r,this,t,i)},e.prototype._iceMostDerivedType=function(){return e},Object.defineProperty(e,"_iceIds",{get:()=>i}),Object.defineProperty(e,"_iceId",{get:()=>i[r]}),e.ice_staticId=function(){return e._iceId},void 0!==t){if(s)for(const e in s)d(t,e,s[e]);if(t._implements)for(const e in t._implements){const i=t._implements[e].prototype;for(const e in i)"function"==typeof i[e]&&void 0===t.prototype[e]&&(t.prototype[e]=i[e])}Object.defineProperty(t,"_id",{get:()=>i[r]})}},p.defineOperations(n.Object,n.ObjectPrx,["::Ice::Object"],0,{ice_ping:[void 0,1,1,void 0,void 0,void 0,void 0,void 0],ice_isA:[void 0,1,1,void 0,[1],[[7]],void 0,void 0],ice_id:[void 0,1,1,void 0,[7],void 0,void 0,void 0],ice_ids:[void 0,1,1,void 0,["Ice.StringSeqHelper"],void 0,void 0,void 0]}),e.exports.Ice=n},7812:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(9483),i(3239),i(1781),i(7548),i(8372),i(6929);const r=n.module("Ice");r.Slice,t.Ice=r},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var r=void 0!==i.layer;r&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,r&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},7868:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(5896),i(9483),i(3239),i(1781),i(7548),i(8372),i(5527),i(3418);const r=n.module("Ice");r.Slice;let s=n.module("IceGrid");s.ApplicationNotExistException=class extends r.UserException{constructor(e="",t=""){super(t),this.name=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::ApplicationNotExistException"}_mostDerivedType(){return s.ApplicationNotExistException}_writeMemberImpl(e){e.writeString(this.name)}_readMemberImpl(e){this.name=e.readString()}},s.ServerNotExistException=class extends r.UserException{constructor(e="",t=""){super(t),this.id=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::ServerNotExistException"}_mostDerivedType(){return s.ServerNotExistException}_writeMemberImpl(e){e.writeString(this.id)}_readMemberImpl(e){this.id=e.readString()}},s.ServerStartException=class extends r.UserException{constructor(e="",t="",i=""){super(i),this.id=e,this.reason=t}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::ServerStartException"}_mostDerivedType(){return s.ServerStartException}_writeMemberImpl(e){e.writeString(this.id),e.writeString(this.reason)}_readMemberImpl(e){this.id=e.readString(),this.reason=e.readString()}},s.ServerStopException=class extends r.UserException{constructor(e="",t="",i=""){super(i),this.id=e,this.reason=t}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::ServerStopException"}_mostDerivedType(){return s.ServerStopException}_writeMemberImpl(e){e.writeString(this.id),e.writeString(this.reason)}_readMemberImpl(e){this.id=e.readString(),this.reason=e.readString()}},s.AdapterNotExistException=class extends r.UserException{constructor(e="",t=""){super(t),this.id=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::AdapterNotExistException"}_mostDerivedType(){return s.AdapterNotExistException}_writeMemberImpl(e){e.writeString(this.id)}_readMemberImpl(e){this.id=e.readString()}},s.ObjectExistsException=class extends r.UserException{constructor(e=new r.Identity,t=""){super(t),this.id=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::ObjectExistsException"}_mostDerivedType(){return s.ObjectExistsException}_writeMemberImpl(e){r.Identity.write(e,this.id)}_readMemberImpl(e){this.id=r.Identity.read(e,this.id)}},s.ObjectNotRegisteredException=class extends r.UserException{constructor(e=new r.Identity,t=""){super(t),this.id=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::ObjectNotRegisteredException"}_mostDerivedType(){return s.ObjectNotRegisteredException}_writeMemberImpl(e){r.Identity.write(e,this.id)}_readMemberImpl(e){this.id=r.Identity.read(e,this.id)}},s.NodeNotExistException=class extends r.UserException{constructor(e="",t=""){super(t),this.name=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::NodeNotExistException"}_mostDerivedType(){return s.NodeNotExistException}_writeMemberImpl(e){e.writeString(this.name)}_readMemberImpl(e){this.name=e.readString()}},s.RegistryNotExistException=class extends r.UserException{constructor(e="",t=""){super(t),this.name=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::RegistryNotExistException"}_mostDerivedType(){return s.RegistryNotExistException}_writeMemberImpl(e){e.writeString(this.name)}_readMemberImpl(e){this.name=e.readString()}},s.DeploymentException=class extends r.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::DeploymentException"}_mostDerivedType(){return s.DeploymentException}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},s.NodeUnreachableException=class extends r.UserException{constructor(e="",t="",i=""){super(i),this.name=e,this.reason=t}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::NodeUnreachableException"}_mostDerivedType(){return s.NodeUnreachableException}_writeMemberImpl(e){e.writeString(this.name),e.writeString(this.reason)}_readMemberImpl(e){this.name=e.readString(),this.reason=e.readString()}},s.ServerUnreachableException=class extends r.UserException{constructor(e="",t="",i=""){super(i),this.name=e,this.reason=t}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::ServerUnreachableException"}_mostDerivedType(){return s.ServerUnreachableException}_writeMemberImpl(e){e.writeString(this.name),e.writeString(this.reason)}_readMemberImpl(e){this.name=e.readString(),this.reason=e.readString()}},s.RegistryUnreachableException=class extends r.UserException{constructor(e="",t="",i=""){super(i),this.name=e,this.reason=t}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::RegistryUnreachableException"}_mostDerivedType(){return s.RegistryUnreachableException}_writeMemberImpl(e){e.writeString(this.name),e.writeString(this.reason)}_readMemberImpl(e){this.name=e.readString(),this.reason=e.readString()}},s.BadSignalException=class extends r.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::BadSignalException"}_mostDerivedType(){return s.BadSignalException}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},s.PatchException=class extends r.UserException{constructor(e=null,t=""){super(t),this.reasons=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::PatchException"}_mostDerivedType(){return s.PatchException}_writeMemberImpl(e){r.StringSeqHelper.write(e,this.reasons)}_readMemberImpl(e){this.reasons=r.StringSeqHelper.read(e)}},s.AccessDeniedException=class extends r.UserException{constructor(e="",t=""){super(t),this.lockUserId=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::AccessDeniedException"}_mostDerivedType(){return s.AccessDeniedException}_writeMemberImpl(e){e.writeString(this.lockUserId)}_readMemberImpl(e){this.lockUserId=e.readString()}},s.AllocationException=class extends r.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::AllocationException"}_mostDerivedType(){return s.AllocationException}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},s.AllocationTimeoutException=class extends s.AllocationException{constructor(e,t=""){super(e,t)}static get _parent(){return s.AllocationException}static get _id(){return"::IceGrid::AllocationTimeoutException"}_mostDerivedType(){return s.AllocationTimeoutException}},s.PermissionDeniedException=class extends r.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::PermissionDeniedException"}_mostDerivedType(){return s.PermissionDeniedException}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},s.ObserverAlreadyRegisteredException=class extends r.UserException{constructor(e=new r.Identity,t=""){super(t),this.id=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::ObserverAlreadyRegisteredException"}_mostDerivedType(){return s.ObserverAlreadyRegisteredException}_writeMemberImpl(e){r.Identity.write(e,this.id)}_readMemberImpl(e){this.id=r.Identity.read(e,this.id)}},s.FileNotAvailableException=class extends r.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::FileNotAvailableException"}_mostDerivedType(){return s.FileNotAvailableException}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},t.IceGrid=s},7879:(e,t,i)=>{const n=i(8846).Ice;i(6708),i(5079),i(3418),i(9576),i(4262),i(5896),i(5527),i(4997),i(9157),i(4650),i(701);const r=n.AsyncResult,s=n.AsyncStatus,o=n.Debug,a=n.Identity,c=n.InputStream,l=n.OutputStream,h=n.Protocol,u=n.RetryException;class d extends r{constructor(e,t,i,n,r){super(e,t,i,n,r),this._os=new l(this._instance,h.currentProtocolEncoding)}getOs(){return this._os}sent(){this.markSent(!0)}completedEx(e){this.markFinishedEx(e)}}class p extends d{constructor(e,t){e?super(e.ice_getCommunicator(),t,null,e,null):super(),this._mode=null,this._cnt=0,this._sent=!1,this._handler=null}completedEx(e){try{this._instance.retryQueue().add(this,this.handleException(e))}catch(e){this.markFinishedEx(e)}}retryException(e){try{this._proxy._updateRequestHandler(this._handler,null),this._instance.retryQueue().add(this,0)}catch(e){this.completedEx(e)}}retry(){this.invokeImpl(!1)}abort(e){this.markFinishedEx(e)}invokeImpl(e){try{if(e){const e=this._proxy._getReference().getInvocationTimeout();e>0&&(this._timeoutToken=this._instance.timer().schedule(()=>{this.cancelWithException(new n.InvocationTimeoutException)},e))}for(;;)try{return this._sent=!1,this._handler=this._proxy._getRequestHandler(),void((this._handler.sendAsyncRequest(this)&s.Sent)>0&&e&&(this._sentSynchronously=!0))}catch(e){if(e instanceof u)this._proxy._updateRequestHandler(this._handler,null);else{const t=this.handleException(e);if(t>0)return void this._instance.retryQueue().add(this,t)}}}catch(e){this.markFinishedEx(e)}}markSent(e){this._sent=!0,e&&this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),super.markSent.call(this,e)}markFinishedEx(e){this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),super.markFinishedEx.call(this,e)}handleException(e){const t={value:0};return this._cnt=this._proxy._handleException(e,this._handler,this._mode,this._sent,t,this._cnt),t.value}}class _ extends p{constructor(e,t,i){super(e,t),e&&(this._encoding=h.getCompatibleEncoding(this._proxy._getReference().getEncoding()),this._completed=i)}prepare(e,t,i){h.checkSupportedProtocol(h.getCompatibleProtocol(this._proxy._getReference().getProtocol())),this._mode=t,null===i&&(i=_._emptyContext),this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()?this._proxy._getBatchRequestQueue().prepareBatchRequest(this._os):this._os.writeBlob(h.requestHdr);const r=this._proxy._getReference();r.getIdentity()._write(this._os);const s=r.getFacet();if(null===s||0===s.length?n.StringSeqHelper.write(this._os,null):n.StringSeqHelper.write(this._os,[s]),this._os.writeString(this._operation),this._os.writeByte(t.value),void 0!==i){if(null!==i&&!(i instanceof Map))throw new RangeError("illegal context value, expecting null or Map");n.ContextHelper.write(this._os,i)}else{const e=r.getInstance().getImplicitContext(),t=r.getContext();null===e?n.ContextHelper.write(this._os,t):e.write(t,this._os)}}sent(){this.markSent(!this._proxy.ice_isTwoway())}invokeRemote(e,t){return e.sendAsyncRequest(this,t,0)}abort(e){(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&this._proxy._getBatchRequestQueue().abortBatchRequest(this._os),super.abort(e)}invoke(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())return this._sentSynchronously=!0,this._proxy._getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation),void this.markFinished(!0);this.invokeImpl(!0)}completed(e){let t;o.assert(this._proxy.ice_isTwoway());try{switch(null===this._is&&(this._is=new c(this._instance,h.currentProtocolEncoding)),this._is.swap(e),t=this._is.readByte(),t){case h.replyOK:case h.replyUserException:break;case h.replyObjectNotExist:case h.replyFacetNotExist:case h.replyOperationNotExist:{const e=new a;e._read(this._is);const i=n.StringSeqHelper.read(this._is);let r;if(i.length>0){if(i.length>1)throw new n.MarshalException;r=i[0]}else r="";const s=this._is.readString();let c=null;switch(t){case h.replyObjectNotExist:c=new n.ObjectNotExistException;break;case h.replyFacetNotExist:c=new n.FacetNotExistException;break;case h.replyOperationNotExist:c=new n.OperationNotExistException;break;default:o.assert(!1)}throw c.id=e,c.facet=r,c.operation=s,c}case h.replyUnknownException:case h.replyUnknownLocalException:case h.replyUnknownUserException:{const e=this._is.readString();let i=null;switch(t){case h.replyUnknownException:i=new n.UnknownException;break;case h.replyUnknownLocalException:i=new n.UnknownLocalException;break;case h.replyUnknownUserException:i=new n.UnknownUserException;break;default:o.assert(!1)}throw i.unknown=e,i}default:throw new n.UnknownReplyStatusException}this.markFinished(t==h.replyOK,this._completed)}catch(e){this.completedEx(e)}}startWriteParams(e){return this._os.startEncapsulation(this._encoding,e),this._os}endWriteParams(){this._os.endEncapsulation()}writeEmptyParams(){this._os.writeEmptyEncapsulation(this._encoding)}startReadParams(){return this._is.startEncapsulation(),this._is}endReadParams(){this._is.endEncapsulation()}readEmptyParams(){this._is.skipEmptyEncapsulation()}throwUserException(){if(o.assert(0!==(this._state&r.Done)),0===(this._state&r.OK))try{this._is.startEncapsulation(),this._is.throwException()}catch(e){throw e instanceof n.UserException&&this._is.endEncapsulation(),e}}}_._emptyContext=new Map,n.OutgoingAsync=_,n.ProxyFlushBatch=class extends p{constructor(e,t){super(e,t),this._batchRequestNum=e._getBatchRequestQueue().swap(this._os)}invokeRemote(e,t){return 0===this._batchRequestNum?(this.sent(),s.Sent):e.sendAsyncRequest(this,t,this._batchRequestNum)}invoke(){h.checkSupportedProtocol(h.getCompatibleProtocol(this._proxy._getReference().getProtocol())),this.invokeImpl(!0)}},n.ProxyGetConnection=class extends p{invokeRemote(e,t){return this.markFinished(!0,t=>t.resolve(e)),s.Sent}invoke(){this.invokeImpl(!0)}},n.ConnectionFlushBatch=class extends d{constructor(e,t,i){super(t,i,e,null,null)}invoke(){try{const e=this._connection.getBatchRequestQueue().swap(this._os);let t;0===e?(this.sent(),t=s.Sent):t=this._connection.sendAsyncRequest(this,!1,e),(t&s.Sent)>0&&(this._sentSynchronously=!0)}catch(e){this.completedEx(e)}}},n.HeartbeatAsync=class extends d{constructor(e,t){super(t,"heartbeat",e,null,null)}invoke(){try{this._os.writeBlob(h.magic),h.currentProtocol._write(this._os),h.currentProtocolEncoding._write(this._os),this._os.writeByte(h.validateConnectionMsg),this._os.writeByte(0),this._os.writeInt(h.headerSize),(this._connection.sendAsyncRequest(this,!1,0)&s.Sent)>0&&(this._sentSynchronously=!0)}catch(e){this.completedEx(e)}}},e.exports.Ice=n},7950:(e,t,i)=>{const n=i(6454).A,r=n.WSEndpoint;n.WSEndpointFactory=class{constructor(e,t){this._instance=e,this._delegate=t}type(){return this._instance.type()}protocol(){return this._instance.protocol()}create(e,t){const i=new r(this._instance,this._delegate.create(e,t));return i.initWithOptions(e),i}read(e){const t=new r(this._instance,this._delegate.read(e));return t.initWithStream(e),t}destroy(){this._delegate.destroy(),this._instance=null}},t.Ice=n},8146:(e,t,i)=>{const n=i(1193).Ice;n.ToStringMode=n.Slice.defineEnum([["Unicode",0],["ASCII",1],["Compat",2]]),e.exports.Ice=n},8220:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(9483),i(3239),i(1781),i(7548),i(8372),i(2713),i(3418),i(9744);const r=n.module("Ice");r.Slice,Object.defineProperty(r,"TCPEndpointType",{value:1}),Object.defineProperty(r,"SSLEndpointType",{value:2}),Object.defineProperty(r,"UDPEndpointType",{value:3}),Object.defineProperty(r,"WSEndpointType",{value:4}),Object.defineProperty(r,"WSSEndpointType",{value:5}),Object.defineProperty(r,"BTEndpointType",{value:6}),Object.defineProperty(r,"BTSEndpointType",{value:7}),Object.defineProperty(r,"iAPEndpointType",{value:8}),Object.defineProperty(r,"iAPSEndpointType",{value:9}),r.EndpointInfo=class{constructor(e=null,t=0,i=!1){this.underlying=e,this.timeout=t,this.compress=i}},r.IPEndpointInfo=class extends r.EndpointInfo{constructor(e,t,i,n="",r=0,s=""){super(e,t,i),this.host=n,this.port=r,this.sourceAddress=s}},r.TCPEndpointInfo=class extends r.IPEndpointInfo{constructor(e,t,i,n,r,s){super(e,t,i,n,r,s)}},r.UDPEndpointInfo=class extends r.IPEndpointInfo{constructor(e,t,i,n,r,s,o="",a=0){super(e,t,i,n,r,s),this.mcastInterface=o,this.mcastTtl=a}},r.WSEndpointInfo=class extends r.EndpointInfo{constructor(e,t,i,n=""){super(e,t,i),this.resource=n}},r.OpaqueEndpointInfo=class extends r.EndpointInfo{constructor(e,t,i,n=new r.EncodingVersion,s=null){super(e,t,i),this.rawEncoding=n,this.rawBytes=s}},t.Ice=r},8306:(e,t,i)=>{const n=i(8846).Ice;i(3852),i(3239),i(8740);const r=n.ConnectRequestHandler,s=n.HashMap;n.RequestHandlerFactory=class{constructor(e){this._instance=e,this._handlers=new s(s.compareEquals)}getRequestHandler(e,t){let i,n=!1;return e.getCacheConnection()?(i=this._handlers.get(e),i||(i=new r(e,t),this._handlers.set(e,i),n=!0)):(n=!0,i=new r(e,t)),n&&e.getConnection().then(e=>{i.setConnection(e)},e=>{i.setException(e)}),t._setRequestHandler(i.connect(t))}removeRequestHandler(e,t){e.getCacheConnection()&&this._handlers.get(e)===t&&this._handlers.delete(e)}},e.exports.Ice=n},8372:(e,t,i)=>{const n=i(5874).Ice,r=Object.defineProperty,s=n.OptionalFormat,o={FSizeOptHelper:function(){this.writeOptional=function(e,t,i){if(void 0!==i&&e.writeOptional(t,s.FSize)){const t=e.startSize();this.write(e,i),e.endSize(t)}},this.readOptional=function(e,t){let i;return e.readOptional(t,s.FSize)&&(e.skip(4),i=this.read(e)),i}},VSizeOptHelper:function(){this.writeOptional=function(e,t,i){void 0!==i&&e.writeOptional(t,s.VSize)&&(e.writeSize(this.minWireSize),this.write(e,i))},this.readOptional=function(e,t){let i;return e.readOptional(t,s.VSize)&&(e.skipSize(),i=this.read(e)),i}},VSizeContainerOptHelper:function(e){this.writeOptional=function(t,i,n){if(void 0!==n&&t.writeOptional(i,s.VSize)){const i=this.size(n);t.writeSize(i>254?i*e+5:i*e+1),this.write(t,n)}},this.readOptional=function(e,t){let i;return e.readOptional(t,s.VSize)&&(e.skipSize(),i=this.read(e)),i}},VSizeContainer1OptHelper:function(){this.writeOptional=function(e,t,i){void 0!==i&&e.writeOptional(t,s.VSize)&&this.write(e,i)},this.readOptional=function(e,t){let i;return e.readOptional(t,s.VSize)&&(i=this.read(e)),i}}};class a{write(e,t){if(null==t||0===t.length)e.writeSize(0);else{const i=this.elementHelper;e.writeSize(t.length);for(let n=0;n<t.length;++n)i.write(e,t[n])}}read(e){const t=this.elementHelper,i=e.readAndCheckSeqSize(t.minWireSize),n=[];n.length=i;for(let r=0;r<i;++r)n[r]=t.read(e);return n}size(e){return null==e?0:e.length}get minWireSize(){return 1}}const c=new a;c.write=(e,t)=>e.writeByteSeq(t),c.read=e=>e.readByteSeq(),r(c,"elementHelper",{get:()=>n.ByteHelper}),o.VSizeContainer1OptHelper.call(c);const l=function(e){const t=e.readAndCheckSeqSize(1),i=[];i.length=t;const n=this.elementType,r=function(t){e.readValue(e=>{i[t]=e},n)};for(let e=0;e<t;++e)r(e);return i};o.generateSeqHelper=function(e,t,i){if(e===n.ByteHelper)return c;const s=new a;return t?1===e.minWireSize?o.VSizeContainer1OptHelper.call(s):o.VSizeContainerOptHelper.call(s,e.minWireSize):o.FSizeOptHelper.call(s),r(s,"elementHelper",{get:()=>e}),e==n.ObjectHelper&&(r(s,"elementType",{get:()=>i}),s.read=l),s};class h{write(e,t){if(null===t||null==t||0===t.size)e.writeSize(0);else{const i=this.keyHelper,n=this.valueHelper;e.writeSize(t.size);for(const[r,s]of t)i.write(e,r),n.write(e,s)}}read(e){const t=new(0,this.mapType),i=e.readSize(),n=this.keyHelper,r=this.valueHelper;for(let s=0;s<i;++s)t.set(n.read(e),r.read(e));return t}size(e){return null==e?0:e.size}get minWireSize(){return 1}}const u=function(e){const t=e.readSize(),i=new(0,this.mapType),n=this.valueType,r=function(t){e.readValue(e=>i.set(t,e),n)},s=this.keyHelper;for(let i=0;i<t;++i)r(s.read(e));return i};o.generateDictHelper=function(e,t,i,s,a){const c=new h;return i?o.VSizeContainerOptHelper.call(c,e.minWireSize+t.minWireSize):o.FSizeOptHelper.call(c),r(c,"mapType",{get:()=>a}),r(c,"keyHelper",{get:()=>e}),r(c,"valueHelper",{get:()=>t}),t==n.ObjectHelper&&(r(c,"valueType",{get:()=>s}),c.read=u),c},n.StreamHelpers=o,e.exports.Ice=n},8437:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(4997),i(532),i(532),i(3542),i(3332);const r=n.StringUtil,s=n.PropertyNames,o=n.Debug,a=n.getProcessLogger,c=n.InitializationException;class l{constructor(e,t){if(this._properties=new Map,null!=t)for(const[e,i]of t._properties)this._properties.set(e,{value:i.value,used:!1});if(null!=e){const t=this.parseIceCommandLineOptions(e);e.length=0;for(let i=0;i<t.length;++i)e.push(t[i])}}getProperty(e){return this.getPropertyWithDefault(e,"")}getPropertyWithDefault(e,t){const i=this._properties.get(e);return void 0!==i?(i.used=!0,i.value):t}getPropertyAsInt(e){return this.getPropertyAsIntWithDefault(e,0)}getPropertyAsIntWithDefault(e,t){const i=this._properties.get(e);return void 0!==i?(i.used=!0,parseInt(i.value)):t}getPropertyAsList(e){return this.getPropertyAsListWithDefault(e,0)}getPropertyAsListWithDefault(e,t){null==t&&(t=[]);const i=this._properties.get(e);if(void 0!==i){i.used=!0;let n=r.splitString(i.value,", \t\r\n");return null===n?(a().warning("mismatched quotes in property "+e+"'s value, returning default value"),t):(0===n.length&&(n=t),n)}return t}getPropertiesForPrefix(e=""){const t=new Map;return this._properties.forEach((i,n)=>{0===n.indexOf(e)&&(i.used=!0,t.set(n,i.value))}),t}setProperty(e="",t=""){null!==e&&(e=e.trim());const i=a();if(null===e||0===e.length)throw new c("Attempt to set property with empty key");let n=e.indexOf(".");if(-1!==n){const t=e.substr(0,n);for(let r=0;r<s.validProps.length;++r){let a=s.validProps[r][0].pattern;if(n=a.indexOf("."),o.assert(-1!=n),a.substring(0,n-1)!=t)continue;let c,l=!1,h=!1;for(let t=0;t<s.validProps[r][t].length&&!l;++t){a=s.validProps[r][t].pattern();let n=new RegExp(a);if(l=n.test(e),l&&s.validProps[r][t].deprecated&&(i.warning("deprecated property: "+e),null!==s.validProps[r][t].deprecatedBy&&(e=s.validProps[r][t].deprecatedBy)),l)break;if(n=new RegExp(a.toUpperCase()),l=n.test(e.toUpperCase()),l){h=!0,c=a.substr(2),c=c.substr(0,c.length-1),c=c.replace(/\\/g,"");break}}l?h&&i.warning("unknown property: `"+e+"'; did you mean `"+c+"'"):i.warning("unknown property: "+e)}}if(null!==t&&t.length>0){const i=this._properties.get(e);void 0!==i?i.value=t:this._properties.set(e,{value:t,used:!1})}else this._properties.delete(e)}getCommandLineOptions(){const e=[];return this._properties.forEach((t,i)=>{e.push("--"+i+"="+t.value)}),e}parseCommandLineOptions(e,t){e.length>0&&"."!=e.charAt(e.length-1)&&(e+="."),e="--"+e;const i=[];return t.forEach(t=>{0===t.indexOf(e)?(-1===t.indexOf("=")&&(t+="=1"),this.parseLine(t.substring(2))):i.push(t)}),i}parseIceCommandLineOptions(e){let t=e.slice();for(let e=0;e<s.clPropNames.length;++e)t=this.parseCommandLineOptions(s.clPropNames[e],t);return t}parse(e){e.match(/[^\r\n]+/g).forEach(e=>this.parseLine(e))}parseLine(e){let t="",i="",n=0,r="",s="",c=!1;for(let a=0;a<e.length;++a){let l=e.charAt(a);switch(n){case 0:switch(l){case"\\":if(a<e.length-1)switch(l=e.charAt(++a),l){case"\\":case"#":case"=":t+=r,r="",t+=l;break;case" ":0!==t.length&&(r+=l);break;default:t+=r,r="",t+="\\",t+=l}else t+=r,t+=l;break;case" ":case"\t":case"\r":case"\n":0!==t.length&&(r+=l);break;case"=":r="",n=1;break;case"#":c=!0;break;default:t+=r,r="",t+=l}break;case 1:switch(l){case"\\":if(a<e.length-1)switch(l=e.charAt(++a),l){case"\\":case"#":case"=":i+=0===i.length?s:r,r="",s="",i+=l;break;case" ":r+=l,s+=l;break;default:i+=0===i.length?s:r,r="",s="",i+="\\",i+=l}else i+=0===i.length?s:r,i+=l;break;case" ":case"\t":case"\r":case"\n":0!==i.length&&(r+=l);break;case"#":c=!0;break;default:i+=0===i.length?s:r,r="",s="",i+=l}break;default:o.assert(!1)}if(c)break}i+=s,0===n&&0!==t.length||1==n&&0===t.length?a().warning('invalid config file entry: "'+e+'"'):0!==t.length&&this.setProperty(t,i)}clone(){return new l(null,this)}getUnusedProperties(){const e=[];return this._properties.forEach((t,i)=>{t.used||e.push(i)}),e}static createProperties(e,t){return new l(e,t)}}n.Properties=l,e.exports.Ice=n},8471:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice"),s=i(3076).V,o=r.Slice;s.TopicMetrics=class extends s.Metrics{constructor(e,t,i,n,s,o=new r.Long(0,0),a=new r.Long(0,0)){super(e,t,i,n,s),this.published=o,this.forwarded=a}_iceWriteMemberImpl(e){e.writeLong(this.published),e.writeLong(this.forwarded)}_iceReadMemberImpl(e){this.published=e.readLong(),this.forwarded=e.readLong()}},o.defineValue(s.TopicMetrics,"::IceMX::TopicMetrics",!1),s.SubscriberMetrics=class extends s.Metrics{constructor(e,t,i,n,s,o=0,a=0,c=new r.Long(0,0)){super(e,t,i,n,s),this.queued=o,this.outstanding=a,this.delivered=c}_iceWriteMemberImpl(e){e.writeInt(this.queued),e.writeInt(this.outstanding),e.writeLong(this.delivered)}_iceReadMemberImpl(e){this.queued=e.readInt(),this.outstanding=e.readInt(),this.delivered=e.readLong()}},o.defineValue(s.SubscriberMetrics,"::IceMX::SubscriberMetrics",!1),t.V=s},8655:(e,t,i)=>{const n=i(8846).Ice;i(5770),i(4997),i(7812),i(9157);const r=n.Protocol;n.InitializationData=class{constructor(){this.properties=null,this.logger=null,this.valueFactoryManager=null}clone(){const e=new n.InitializationData;return e.properties=this.properties,e.logger=this.logger,e.valueFactoryManager=this.valueFactoryManager,e}},n.initialize=function(e,t){let i=null,r=null;if(e instanceof Array)i=e;else if(e instanceof n.InitializationData)r=e;else if(null!=e)throw new n.InitializationException("invalid argument to initialize");if(null!=t){if(!(t instanceof n.InitializationData&&null===r))throw new n.InitializationException("invalid argument to initialize");r=t}r=null===r?new n.InitializationData:r.clone(),r.properties=n.createProperties(i,r.properties);const s=new n.Communicator(r);return s.finishSetup(null),s},n.createProperties=function(e,t){return new n.Properties(e,t)},n.currentProtocol=function(){return r.currentProtocol.clone()},n.currentEncoding=function(){return r.currentEncoding.clone()},n.stringVersion=function(){return"3.7.10"},n.intVersion=function(){return 30710},e.exports.Ice=n},8740:(e,t,i)=>{const n=i(8846).Ice;i(7548),i(7149),i(3418),i(7422),i(4262),i(2459),i(1781),i(5527),i(4997),i(359),i(1967),i(5752),i(7168),i(3542),i(6815),i(2368),i(3332),i(2713);const r=n.ArrayUtil,s=n.BatchRequestQueue,o=n.ConnectionRequestHandler,a=n.Debug,c=n.EndpointSelectionType,l=n.HashUtil,h=n.Identity,u=n.LocatorPrx,d=n.MapUtil,p=n.OpaqueEndpointI,_=n.PropertyNames,g=n.ReferenceMode,m=n.RouterPrx,f=n.StringSeqHelper,y=n.StringUtil,S=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"];class w{constructor(e,t){this._instance=e,this._communicator=t,this._defaultRouter=null,this._defaultLocator=null}create(e,t,i,n){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,i.getMode(),i.getSecure(),i.getProtocol(),i.getEncoding(),n,null,null)}createWithAdapterId(e,t,i,n){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,i.getMode(),i.getSecure(),i.getProtocol(),i.getEncoding(),null,n,null)}createFixed(e,t){return 0===e.name.length&&0===e.category.length?null:new I(this._instance,this._communicator,e,"",t.endpoint().datagram()?g.ModeDatagram:g.ModeTwoway,t.endpoint().secure(),n.Protocol_1_0,this._instance.defaultsAndOverrides().defaultEncoding,t,-1,null)}copy(e){const t=e.getIdentity();return 0===t.name.length&&0===t.category.length?null:e.clone()}createFromString(e,t){if(null==e||0===e.length)return null;const i=" \t\n\r";let r=0,s=y.findFirstNotOf(e,i,r);if(-1==s)throw new n.ProxyParseException("no non-whitespace characters found in `"+e+"'");let o=null;if(r=y.checkQuote(e,s),-1===r)throw new n.ProxyParseException("mismatched quotes around identity in `"+e+"'");if(0===r?(r=y.findFirstOf(e,i+":@",s),-1===r&&(r=e.length),o=e.substring(s,r)):(s++,o=e.substring(s,r),r++),s===r)throw new n.ProxyParseException("no identity in `"+e+"'");const c=n.stringToIdentity(o);if(0===c.name.length){if(c.category.length>0)throw new n.IllegalIdentityException(c);if(-1!=y.findFirstNotOf(e,i,r))throw new n.ProxyParseException("invalid characters after identity in `"+e+"'");return null}let l="",h=g.ModeTwoway,u=!1,d=this._instance.defaultsAndOverrides().defaultEncoding,p=n.Protocol_1_0,_="";for(;s=y.findFirstNotOf(e,i,r),-1!==s&&":"!=e.charAt(s)&&"@"!=e.charAt(s)&&(r=y.findFirstOf(e,i+":@",s),-1==r&&(r=e.length),s!=r);){const t=e.substring(s,r);if(2!=t.length||"-"!=t.charAt(0))throw new n.ProxyParseException("expected a proxy option but found `"+t+"' in `"+e+"'");let o=null;const a=y.findFirstNotOf(e,i,r);if(-1!=a){const c=e.charAt(a);if("@"!=c&&":"!=c&&"-"!=c){if(s=a,r=y.checkQuote(e,s),-1==r)throw new n.ProxyParseException("mismatched quotes around value for "+t+" option in `"+e+"'");0===r?(r=y.findFirstOf(e,i+":@",s),-1===r&&(r=e.length),o=e.substring(s,r)):(s++,o=e.substring(s,r),r++)}}switch(t.charAt(1)){case"f":if(null===o)throw new n.ProxyParseException("no argument provided for -f option in `"+e+"'");try{l=y.unescapeString(o,0,o.length)}catch(t){throw new n.ProxyParseException("invalid facet in `"+e+"': "+t.message)}break;case"t":if(null!==o)throw new n.ProxyParseException("unexpected argument `"+o+"' provided for -t option in `"+e+"'");h=g.ModeTwoway;break;case"o":if(null!==o)throw new n.ProxyParseException("unexpected argument `"+o+"' provided for -o option in `"+e+"'");h=g.ModeOneway;break;case"O":if(null!==o)throw new n.ProxyParseException("unexpected argument `"+o+"' provided for -O option in `"+e+"'");h=g.ModeBatchOneway;break;case"d":if(null!==o)throw new n.ProxyParseException("unexpected argument `"+o+"' provided for -d option in `"+e+"'");h=g.ModeDatagram;break;case"D":if(null!==o)throw new n.ProxyParseException("unexpected argument `"+o+"' provided for -D option in `"+e+"'");h=g.ModeBatchDatagram;break;case"s":if(null!==o)throw new n.ProxyParseException("unexpected argument `"+o+"' provided for -s option in `"+e+"'");u=!0;break;case"e":if(null===o)throw new n.ProxyParseException("no argument provided for -e option in `"+e+"'");try{d=n.stringToEncodingVersion(o)}catch(t){throw new n.ProxyParseException("invalid encoding version `"+o+"' in `"+e+"':\n"+t.str)}break;case"p":if(null===o)throw new n.ProxyParseException("no argument provided for -p option in `"+e+"'");try{p=n.stringToProtocolVersion(o)}catch(t){throw new n.ProxyParseException("invalid protocol version `"+o+"' in `"+e+"':\n"+t.str)}break;default:throw new n.ProxyParseException("unknown option `"+t+"' in `"+e+"'")}}if(-1===s)return this.createImpl(c,l,h,u,p,d,null,null,t);const m=[];if(":"==e.charAt(s)){const i=[];for(r=s;r<e.length&&":"==e.charAt(r);){for(s=r+1,r=s;;){if(r=e.indexOf(":",r),-1==r){r=e.length;break}{let t=!1,i=s;for(;i=e.indexOf('"',i),!(-1==i||r<i||(i=e.indexOf('"',++i),-1==i));){if(r<i){t=!0;break}++i}if(!t)break;++r}}const t=e.substring(s,r),n=this._instance.endpointFactoryManager().create(t,!1);null!==n?m.push(n):i.push(t)}if(0===m.length)throw a.assert(i.length>0),new n.EndpointParseException("invalid endpoint `"+i[0]+"' in `"+e+"'");if(0!==i.length&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){const e=[];e.push("Proxy contains unknown endpoints:"),i.forEach(t=>{e.push(" `"),e.push(t),e.push("'")}),this._instance.initializationData().logger.warning(e.join(""))}return this.createImpl(c,l,h,u,p,d,m,null,t)}if("@"==e.charAt(s)){if(s=y.findFirstNotOf(e,i,s+1),-1==s)throw new n.ProxyParseException("missing adapter id in `"+e+"'");let o=null;if(r=y.checkQuote(e,s),-1===r)throw new n.ProxyParseException("mismatched quotes around adapter id in `"+e+"'");if(0===r?(r=y.findFirstOf(e,i,s),-1===r&&(r=e.length),o=e.substring(s,r)):(s++,o=e.substring(s,r),r++),r!==e.length&&-1!==y.findFirstNotOf(e,i,r))throw new n.ProxyParseException("invalid trailing characters after `"+e.substring(0,r+1)+"' in `"+e+"'");try{_=y.unescapeString(o,0,o.length)}catch(t){throw new n.ProxyParseException("invalid adapter id in `"+e+"': "+t.message)}if(0===_.length)throw new n.ProxyParseException("empty adapter id in `"+e+"'");return this.createImpl(c,l,h,u,p,d,null,_,t)}throw new n.ProxyParseException("malformed proxy `"+e+"'")}createFromStream(e,t){if(0===e.name.length&&0===e.category.length)return null;const i=f.read(t);let r;if(i.length>0){if(i.length>1)throw new n.ProxyUnmarshalException;r=i[0]}else r="";const s=t.readByte();if(s<0||s>g.ModeLast)throw new n.ProxyUnmarshalException;const o=t.readBool();let a=null,c=null;t.getEncoding().equals(n.Encoding_1_0)?(a=n.Protocol_1_0,c=n.Encoding_1_0):(a=new n.ProtocolVersion,a._read(t),c=new n.EncodingVersion,c._read(t));let l=null,h=null;const u=t.readSize();if(u>0){l=[];for(let e=0;e<u;e++)l[e]=this._instance.endpointFactoryManager().read(t)}else h=t.readString();return this.createImpl(e,r,s,o,a,c,l,h,null)}setDefaultRouter(e){if(null===this._defaultRouter?null===e:this._defaultRouter.equals(e))return this;const t=new w(this._instance,this._communicator);return t._defaultLocator=this._defaultLocator,t._defaultRouter=e,t}getDefaultRouter(){return this._defaultRouter}setDefaultLocator(e){if(null===this._defaultLocator?null===e:this._defaultLocator.equals(e))return this;const t=new w(this._instance,this._communicator);return t._defaultRouter=this._defaultRouter,t._defaultLocator=e,t}getDefaultLocator(){return this._defaultLocator}checkForUnknownProperties(e){let t=[];for(let t=0;t<_.clPropNames.length;++t)if(0===e.indexOf(_.clPropNames[t]+"."))return;const i=this._instance.initializationData().properties.getPropertiesForPrefix(e+".");if(t=t.concat(Array.from(i.keys()).filter(t=>!S.some(i=>t===e+"."+i))),t.length>0){const i=[];i.push("found unknown properties for proxy '"),i.push(e),i.push("':"),t.forEach(e=>i.push("\n    ",e)),this._instance.initializationData().logger.warning(i.join(""))}}createImpl(e,t,i,r,s,o,a,l,h){const d=this._instance.defaultsAndOverrides();let p=null;null!==this._defaultLocator&&(p=this._defaultLocator._getReference().getEncoding().equals(o)?this._instance.locatorManager().find(this._defaultLocator):this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(o)));let _=this._instance.routerManager().find(this._defaultRouter),g=!0,f=d.defaultPreferSecure,y=d.defaultEndpointSelection,S=d.defaultLocatorCacheTimeout,w=d.defaultInvocationTimeout;if(null!==h&&h.length>0){const e=this._instance.initializationData().properties;e.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0&&this.checkForUnknownProperties(h);let t=h+".Locator";const i=u.uncheckedCast(this._communicator.propertyToProxy(t));null!==i&&(p=i._getReference().getEncoding().equals(o)?this._instance.locatorManager().find(i):this._instance.locatorManager().find(i.ice_encodingVersion(o))),t=h+".Router";const r=m.uncheckedCast(this._communicator.propertyToProxy(t));if(null!==r&&(h.endsWith("Router")?this._instance.initializationData().logger.warning("`"+t+"="+e.getProperty(t)+"': cannot set a router on a router; setting ignored"):_=this._instance.routerManager().find(r)),t=h+".ConnectionCached",g=e.getPropertyAsIntWithDefault(t,g?1:0)>0,t=h+".PreferSecure",f=e.getPropertyAsIntWithDefault(t,f?1:0)>0,t=h+".EndpointSelection",e.getProperty(t).length>0){const i=e.getProperty(t);if("Random"==i)y=c.Random;else{if("Ordered"!=i)throw new n.EndpointSelectionTypeParseException("illegal value `"+i+"'; expected `Random' or `Ordered'");y=c.Ordered}}t=h+".LocatorCacheTimeout";let s=e.getProperty(t);0!==s.length&&(S=e.getPropertyAsIntWithDefault(t,S),S<-1&&(S=-1,this._instance.initializationData().logger.warning("invalid value for"+t+"`"+e.getProperty(t)+"': defaulting to -1"))),t=h+".InvocationTimeout",s=e.getProperty(t),0!==s.length&&(w=e.getPropertyAsIntWithDefault(t,w),w<1&&-1!==w&&(w=-1,this._instance.initializationData().logger.warning("invalid value for"+t+"`"+e.getProperty(t)+"': defaulting to -1")))}return new E(this._instance,this._communicator,e,t,i,r,s,o,a,l,p,_,g,f,y,S,w)}}n.ReferenceFactory=w;class x{constructor(e,t,i,n,r,s,o,c,l,h){a.assert(void 0===i||null!==i.name),a.assert(void 0===i||null!==i.category),a.assert(void 0===n||null!==n),this._instance=e,this._communicator=t,this._mode=r,this._secure=s,this._identity=i,this._context=void 0===h?x._emptyContext:h,this._facet=n,this._protocol=o,this._encoding=c,this._invocationTimeout=l,this._hashInitialized=!1}getMode(){return this._mode}getSecure(){return this._secure}getProtocol(){return this._protocol}getEncoding(){return this._encoding}getIdentity(){return this._identity}getFacet(){return this._facet}getInstance(){return this._instance}getContext(){return this._context}getInvocationTimeout(){return this._invocationTimeout}getCommunicator(){return this._communicator}getEndpoints(){return a.assert(!1),null}getAdapterId(){return a.assert(!1),""}getRouterInfo(){return a.assert(!1),null}getLocatorInfo(){return a.assert(!1),null}getCacheConnection(){return a.assert(!1),!1}getPreferSecure(){return a.assert(!1),!1}getEndpointSelection(){return a.assert(!1),null}getLocatorCacheTimeout(){return a.assert(!1),0}getConnectionId(){return a.assert(!1),""}getTimeout(){return a.assert(!1),""}changeContext(e){null==e&&(e=x._emptyContext);const t=this._instance.referenceFactory().copy(this);return 0===e.size?t._context=x._emptyContext:t._context=new Map(e),t}changeMode(e){if(e===this._mode)return this;const t=this._instance.referenceFactory().copy(this);return t._mode=e,t}changeSecure(e){if(e===this._secure)return this;const t=this._instance.referenceFactory().copy(this);return t._secure=e,t}changeIdentity(e){if(e.equals(this._identity))return this;const t=this._instance.referenceFactory().copy(this);return t._identity=new h(e.name,e.category),t}changeFacet(e){if(e===this._facet)return this;const t=this._instance.referenceFactory().copy(this);return t._facet=e,t}changeInvocationTimeout(e){if(e===this._invocationTimeout)return this;const t=this._instance.referenceFactory().copy(this);return t._invocationTimeout=e,t}changeEncoding(e){if(e.equals(this._encoding))return this;const t=this._instance.referenceFactory().copy(this);return t._encoding=e,t}changeAdapterId(e){return a.assert(!1),null}changeEndpoints(e){return a.assert(!1),null}changeLocator(e){return a.assert(!1),null}changeRouter(e){return a.assert(!1),null}changeCacheConnection(e){return a.assert(!1),null}changePreferSecure(e){return a.assert(!1),null}changeEndpointSelection(e){return a.assert(!1),null}changeLocatorCacheTimeout(e){return a.assert(!1),null}changeTimeout(e){return a.assert(!1),null}changeConnectionId(e){return a.assert(!1),null}changeConnection(e){return a.assert(!1),null}hashCode(){if(this._hashInitialized)return this._hashValue;let e=5381;if(e=l.addNumber(e,this._mode),e=l.addBoolean(e,this._secure),e=l.addHashable(e,this._identity),null!==this._context&&void 0!==this._context)for(const[t,i]of this._context)e=l.addString(e,t),e=l.addString(e,i);return e=l.addString(e,this._facet),e=l.addHashable(e,this._protocol),e=l.addHashable(e,this._encoding),e=l.addNumber(e,this._invocationTimeout),this._hashValue=e,this._hashInitialized=!0,this._hashValue}isIndirect(){return a.assert(!1),!1}isWellKnown(){return a.assert(!1),!1}streamWrite(e){0===this._facet.length?e.writeSize(0):(e.writeSize(1),e.writeString(this._facet)),e.writeByte(this._mode),e.writeBool(this._secure),e.getEncoding().equals(n.Encoding_1_0)||(this._protocol._write(e),this._encoding._write(e))}toString(){const e=[],t=this._instance.toStringMode(),i=n.identityToString(this._identity,t);if(-1!=i.search(/[ :@]/)?(e.push('"'),e.push(i),e.push('"')):e.push(i),this._facet.length>0){e.push(" -f ");const i=y.escapeString(this._facet,"",t);-1!=i.search(/[ :@]/)?(e.push('"'),e.push(i),e.push('"')):e.push(i)}switch(this._mode){case g.ModeTwoway:e.push(" -t");break;case g.ModeOneway:e.push(" -o");break;case g.ModeBatchOneway:e.push(" -O");break;case g.ModeDatagram:e.push(" -d");break;case g.ModeBatchDatagram:e.push(" -D");break;default:a.assert(!1)}return this._secure&&e.push(" -s"),this._protocol.equals(n.Protocol_1_0)||(e.push(" -p "),e.push(n.protocolVersionToString(this._protocol))),e.push(" -e "),e.push(n.encodingVersionToString(this._encoding)),e.join("")}toProperty(e){return a.assert(!1),null}getRequestHandler(e){a.assert(!1)}getBatchRequestQueue(){a.assert(!1)}equals(e){return!!(this._mode===e._mode&&this._secure===e._secure&&this._identity.equals(e._identity)&&d.equals(this._context,e._context)&&this._facet===e._facet&&this._protocol.equals(e._protocol)&&this._encoding.equals(e._encoding)&&this._invocationTimeout===e._invocationTimeout)}clone(){return a.assert(!1),null}copyMembers(e){e._context=this._context}}x._emptyContext=new Map,x._emptyEndpoints=[],n.Reference=x;class I extends x{constructor(e,t,i,n,r,s,o,a,c,l,h){super(e,t,i,n,r,s,o,a,l,h),this._fixedConnection=c}getEndpoints(){return x._emptyEndpoints}getAdapterId(){return""}getRouterInfo(){return null}getLocatorInfo(){return null}getCacheConnection(){return!0}getPreferSecure(){return!1}getEndpointSelection(){return c.Random}getLocatorCacheTimeout(){return 0}getConnectionId(){return""}getTimeout(){}changeAdapterId(e){throw new n.FixedProxyException}changeEndpoints(e){throw new n.FixedProxyException}changeLocato(e){throw new n.FixedProxyException}changeRouter(e){throw new n.FixedProxyException}changeCacheConnection(e){throw new n.FixedProxyException}changePreferSecure(e){throw new n.FixedProxyException}changeEndpointSelection(e){throw new n.FixedProxyException}changeLocatorCacheTimeout(e){throw new n.FixedProxyException}changeTimeout(e){throw new n.FixedProxyException}changeConnectionId(e){throw new n.FixedProxyException}changeConnection(e){if(e==this._fixedConnection)return this;const t=this.getInstance().referenceFactory().copy(this);return t._fixedConnection=e,t}isIndirect(){return!1}isWellKnown(){return!1}streamWrite(e){throw new n.FixedProxyException}toProperty(e){throw new n.FixedProxyException}clone(){const e=new I(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._fixedConnection,this.getInvocationTimeout(),this.getContext());return this.copyMembers(e),e}getRequestHandler(e){switch(this.getMode()){case g.ModeTwoway:case g.ModeOneway:case g.ModeBatchOneway:if(this._fixedConnection.endpoint().datagram())throw new n.NoEndpointException(this.toString());break;case g.ModeDatagram:case g.ModeBatchDatagram:if(!this._fixedConnection.endpoint().datagram())throw new n.NoEndpointException(this.toString());break;default:a.assert(!1)}const t=this.getInstance().defaultsAndOverrides();if((t.overrideSecure?t.overrideSecureValue:this.getSecure())&&!this._fixedConnection.endpoint().secure())throw new n.NoEndpointException(this.toString());return this._fixedConnection.throwException(),e._setRequestHandler(new o(this,this._fixedConnection))}getBatchRequestQueue(){return this._fixedConnection.getBatchRequestQueue()}equals(e){return this===e||e instanceof I&&!!super.equals(e)&&this._fixedConnection==e._fixedConnection}}n.FixedReference=I;class E extends x{constructor(e,t,i,n,r,s,o,c,l,h,u,d,p,_,g,m,f,y){super(e,t,i,n,r,s,o,c,f,y),this._endpoints=l,this._adapterId=h,this._locatorInfo=u,this._routerInfo=d,this._cacheConnection=p,this._preferSecure=_,this._endpointSelection=g,this._locatorCacheTimeout=m,this._overrideTimeout=!1,this._timeout=-1,null===this._endpoints&&(this._endpoints=x._emptyEndpoints),null===this._adapterId&&(this._adapterId=""),this._connectionId="",a.assert(0===this._adapterId.length||0===this._endpoints.length)}getEndpoints(){return this._endpoints}getAdapterId(){return this._adapterId}getRouterInfo(){return this._routerInfo}getLocatorInfo(){return this._locatorInfo}getCacheConnection(){return this._cacheConnection}getPreferSecure(){return this._preferSecure}getEndpointSelection(){return this._endpointSelection}getLocatorCacheTimeout(){return this._locatorCacheTimeout}getConnectionId(){return this._connectionId}getTimeout(){return this._overrideTimeout?this._timeout:void 0}changeEncoding(e){const t=super.changeEncoding(e);return t!==this&&(null===t._locatorInfo||t._locatorInfo.getLocator().ice_getEncodingVersion().equals(e)||(t._locatorInfo=this.getInstance().locatorManager().find(t._locatorInfo.getLocator().ice_encodingVersion(e)))),t}changeAdapterId(e){if(this._adapterId===e)return this;const t=this.getInstance().referenceFactory().copy(this);return t._adapterId=e,t._endpoints=x._emptyEndpoints,t}changeEndpoints(e){if(r.equals(e,this._endpoints,(e,t)=>e.equals(t)))return this;const t=this.getInstance().referenceFactory().copy(this);return t._endpoints=e,t._adapterId="",t.applyOverrides(t._endpoints),t}changeLocator(e){const t=this.getInstance().locatorManager().find(e);if(null!==t&&null!==this._locatorInfo&&t.equals(this._locatorInfo))return this;const i=this.getInstance().referenceFactory().copy(this);return i._locatorInfo=t,i}changeRouter(e){const t=this.getInstance().routerManager().find(e);if(null!==t&&null!==this._routerInfo&&t.equals(this._routerInfo))return this;const i=this.getInstance().referenceFactory().copy(this);return i._routerInfo=t,i}changeCacheConnection(e){if(e===this._cacheConnection)return this;const t=this.getInstance().referenceFactory().copy(this);return t._cacheConnection=e,t}changePreferSecure(e){if(e===this._preferSecure)return this;const t=this.getInstance().referenceFactory().copy(this);return t._preferSecure=e,t}changeEndpointSelection(e){if(e===this._endpointSelection)return this;const t=this.getInstance().referenceFactory().copy(this);return t._endpointSelection=e,t}changeLocatorCacheTimeout(e){if(this._locatorCacheTimeout===e)return this;const t=this.getInstance().referenceFactory().copy(this);return t._locatorCacheTimeout=e,t}changeTimeout(e){if(this._overrideTimeout&&this._timeout===e)return this;const t=this.getInstance().referenceFactory().copy(this);return t._timeout=e,t._overrideTimeout=!0,t._endpoints=this._endpoints.map(t=>t.changeTimeout(e)),t}changeConnectionId(e){if(this._connectionId===e)return this;const t=this.getInstance().referenceFactory().copy(this);return t._connectionId=e,t._endpoints=this._endpoints.map(t=>t.changeConnectionId(e)),t}changeConnection(e){return new I(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),e,this.getInvocationTimeout(),this.getContext())}isIndirect(){return 0===this._endpoints.length}isWellKnown(){return 0===this._endpoints.length&&0===this._adapterId.length}streamWrite(e){super.streamWrite(e),e.writeSize(this._endpoints.length),this._endpoints.length>0?(a.assert(0===this._adapterId.length),this._endpoints.forEach(t=>{e.writeShort(t.type()),t.streamWrite(e)})):e.writeString(this._adapterId)}toString(){const e=[];if(e.push(super.toString()),this._endpoints.length>0)this._endpoints.forEach(t=>{const i=t.toString();null!==i&&i.length>0&&(e.push(":"),e.push(i))});else if(this._adapterId.length>0){e.push(" @ ");const t=y.escapeString(this._adapterId,null,this._instance.toStringMode());-1!=t.search(/[ :@]/)?(e.push('"'),e.push(t),e.push('"')):e.push(t)}return e.join("")}toProperty(e){const t=new Map;return t.set(e,this.toString()),t.set(e+".CollocationOptimized","0"),t.set(e+".ConnectionCached",this._cacheConnection?"1":"0"),t.set(e+".PreferSecure",this._preferSecure?"1":"0"),t.set(e+".EndpointSelection",this._endpointSelection===c.Random?"Random":"Ordered"),t.set(e+".LocatorCacheTimeout",String(this._locatorCacheTimeout)),t.set(e+".InvocationTimeout",String(this.getInvocationTimeout())),null!==this._routerInfo&&this._routerInfo.getRouter()._getReference().toProperty(e+".Router").forEach((e,i)=>t.set(i,e)),null!==this._locatorInfo&&this._locatorInfo.getLocator()._getReference().toProperty(e+".Locator").forEach((e,i)=>t.set(i,e)),t}hashCode(){return this._hashInitialized||(super.hashCode(),this._hashValue=l.addString(this._hashValue,this._adapterId)),this._hashValue}equals(e){return this===e||e instanceof E&&!!super.equals(e)&&!!(null===this._locatorInfo?null===e._locatorInfo:this._locatorInfo.equals(e._locatorInfo))&&!!(null===this._routerInfo?null===e._routerInfo:this._routerInfo.equals(e._routerInfo))&&this._cacheConnection===e._cacheConnection&&this._preferSecure===e._preferSecure&&this._endpointSelection===e._endpointSelection&&this._locatorCacheTimeout===e._locatorCacheTimeout&&this._connectionId===e._connectionId&&this._overrideTimeout===e._overrideTimeout&&(!this._overrideTimeout||this._timeout===e._timeout)&&!!r.equals(this._endpoints,e._endpoints,(e,t)=>e.equals(t))&&this._adapterId===e._adapterId}getRequestHandler(e){return this._instance.requestHandlerFactory().getRequestHandler(this,e)}getBatchRequestQueue(){return new s(this._instance,this._mode===g.ModeBatchDatagram)}getConnection(){const e=new n.Promise;return null!==this._routerInfo?this._routerInfo.getClientEndpoints().then(t=>{t.length>0?(this.applyOverrides(t),this.createConnection(t).then(e.resolve,e.reject)):this.getConnectionNoRouterInfo(e)}).catch(e.reject):this.getConnectionNoRouterInfo(e),e}getConnectionNoRouterInfo(e){this._endpoints.length>0?this.createConnection(this._endpoints).then(e.resolve).catch(e.reject):null!==this._locatorInfo?this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then(t=>{const[i,r]=t;0!==i.length?(this.applyOverrides(i),this.createConnection(i).then(e.resolve,t=>{if(t instanceof n.NoEndpointException)e.reject(t);else{if(a.assert(null!==this._locatorInfo),this.getLocatorInfo().clearCache(this),r){const i=this.getInstance().traceLevels();return i.retry>=2&&this.getInstance().initializationData().logger.trace(i.retryCat,"connection to cached endpoints failed\nremoving endpoints from cache and trying again\n"+t.toString()),void this.getConnectionNoRouterInfo(e)}e.reject(t)}})):e.reject(new n.NoEndpointException(this.toString()))}).catch(e.reject):e.reject(new n.NoEndpointException(this.toString()))}clone(){const e=new E(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);return this.copyMembers(e),e}copyMembers(e){super.copyMembers(e),e._overrideTimeout=this._overrideTimeout,e._timeout=this._timeout,e._connectionId=this._connectionId}applyOverrides(e){for(let t=0;t<e.length;++t)e[t]=e[t].changeConnectionId(this._connectionId),this._overrideTimeout&&(e[t]=e[t].changeTimeout(this._timeout))}filterEndpoints(e){let t=e.filter(e=>!(e instanceof p)&&e.connectable());switch(this.getMode()){case g.ModeTwoway:case g.ModeOneway:case g.ModeBatchOneway:t=t.filter(e=>!e.datagram());break;case g.ModeDatagram:case g.ModeBatchDatagram:t=t.filter(e=>e.datagram());break;default:a.assert(!1)}switch(this.getEndpointSelection()){case c.Random:r.shuffle(t);break;case c.Ordered:break;default:a.assert(!1)}const i=this.getInstance().defaultsAndOverrides();if(i.overrideSecure?i.overrideSecureValue:this.getSecure())t=t.filter(e=>e.secure());else{const e=this.getPreferSecure(),i=(t,i)=>{const n=t.secure(),r=i.secure();return n&&r||!n&&!r?0:!n&&r?e?1:-1:e?-1:1};t.sort(i)}return t}createConnection(e){const t=this.filterEndpoints(e);if(0===t.length)return n.Promise.reject(new n.NoEndpointException(this.toString()));const i=new n.Promise,r=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||1==t.length){const e=new v(this,null,i);r.create(t,!1,this.getEndpointSelection()).then(t=>e.setConnection(t)).catch(t=>e.setException(t))}else{const e=new v(this,t,i);r.create([t[0]],!0,this.getEndpointSelection()).then(t=>e.setConnection(t)).catch(t=>e.setException(t))}return i}}n.RoutableReference=E,e.exports.Ice=n;class v{constructor(e,t,i){this.ref=e,this.endpoints=t,this.promise=i,this.i=0,this.exception=null}setConnection(e){null!==this.ref.getRouterInfo()&&null!==this.ref.getRouterInfo().getAdapter()&&e.setAdapter(this.ref.getRouterInfo().getAdapter()),this.promise.resolve(e)}setException(e){null===this.exception&&(this.exception=e),null!==this.endpoints&&++this.i!==this.endpoints.length?this.ref.getInstance().outgoingConnectionFactory().create([this.endpoints[this.i]],this.i!=this.endpoints.length-1,this.ref.getEndpointSelection()).then(e=>this.setConnection(e)).catch(e=>this.setException(e)):this.promise.reject(this.exception)}}},8789:(e,t,i)=>{const n=i(7168).Ice;class r extends n.Promise{constructor(e,t,i,n,r){super(),this._communicator=e,this._instance=e?e.instance:null,this._operation=t,this._connection=i,this._proxy=n,this._adapter=r}get communicator(){return this._communicator}get connection(){return this._connection}get proxy(){return this._proxy}get adapter(){return this._adapter}get operation(){return this._operation}}n.AsyncResultBase=r,e.exports.Ice=n},8846:(e,t,i)=>{let n={};if("undefined"!=typeof process){const e={};class t{static module(t){let i=e[t];return void 0===i&&(i={},e[t]=i),i}static require(e,t){let i;return t.forEach(t=>{i=e.require(t)}),i}static type(t){if(void 0===t)return;const i=t.split(".");let n=e;for(let e=0;e<i.length;++e)if(n=n[i[e]],void 0===n)return;return n}}n=t.module("Ice"),n.Slice=n.Slice||{},n._ModuleRegistry=t}else{const e="undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};class t{static module(t){let i=e[t];return void 0===i&&(i={},e[t]=i),i}static require(t){return e}static type(t){if(void 0===t)return;const i=t.split(".");let n=e;for(let e=0,t=i.length;e<t;++e)if(n=n[i[e]],void 0===n)return;return n}}n=t.module("Ice"),n._require=function(){return e},n.Slice=n.Slice||{},n._ModuleRegistry=t}t.Ice=n},8880:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(2676),i(9483),i(3239),i(1781),i(7548),i(8372),i(5527),i(3418);const r=n.module("Ice"),s=r.Slice;let o=n.module("IceGrid");s.defineDictionary(o,"StringStringDict","StringStringDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),o.PropertyDescriptor=class{constructor(e="",t=""){this.name=e,this.value=t}_write(e){e.writeString(this.name),e.writeString(this.value)}_read(e){this.name=e.readString(),this.value=e.readString()}static get minWireSize(){return 2}},s.defineStruct(o.PropertyDescriptor,!0,!0),s.defineSequence(o,"PropertyDescriptorSeqHelper","IceGrid.PropertyDescriptor",!1),o.PropertySetDescriptor=class{constructor(e=null,t=null){this.references=e,this.properties=t}_write(e){r.StringSeqHelper.write(e,this.references),o.PropertyDescriptorSeqHelper.write(e,this.properties)}_read(e){this.references=r.StringSeqHelper.read(e),this.properties=o.PropertyDescriptorSeqHelper.read(e)}static get minWireSize(){return 2}},s.defineStruct(o.PropertySetDescriptor,!0,!0),s.defineDictionary(o,"PropertySetDescriptorDict","PropertySetDescriptorDictHelper","Ice.StringHelper","IceGrid.PropertySetDescriptor",!1,void 0,void 0),o.ObjectDescriptor=class{constructor(e=new r.Identity,t="",i=""){this.id=e,this.type=t,this.proxyOptions=i}_write(e){r.Identity.write(e,this.id),e.writeString(this.type),e.writeString(this.proxyOptions)}_read(e){this.id=r.Identity.read(e,this.id),this.type=e.readString(),this.proxyOptions=e.readString()}static get minWireSize(){return 4}},s.defineStruct(o.ObjectDescriptor,!0,!0),s.defineSequence(o,"ObjectDescriptorSeqHelper","IceGrid.ObjectDescriptor",!1),o.AdapterDescriptor=class{constructor(e="",t="",i="",n="",r="",s=!1,o=!1,a=null,c=null){this.name=e,this.description=t,this.id=i,this.replicaGroupId=n,this.priority=r,this.registerProcess=s,this.serverLifetime=o,this.objects=a,this.allocatables=c}_write(e){e.writeString(this.name),e.writeString(this.description),e.writeString(this.id),e.writeString(this.replicaGroupId),e.writeString(this.priority),e.writeBool(this.registerProcess),e.writeBool(this.serverLifetime),o.ObjectDescriptorSeqHelper.write(e,this.objects),o.ObjectDescriptorSeqHelper.write(e,this.allocatables)}_read(e){this.name=e.readString(),this.description=e.readString(),this.id=e.readString(),this.replicaGroupId=e.readString(),this.priority=e.readString(),this.registerProcess=e.readBool(),this.serverLifetime=e.readBool(),this.objects=o.ObjectDescriptorSeqHelper.read(e),this.allocatables=o.ObjectDescriptorSeqHelper.read(e)}static get minWireSize(){return 9}},s.defineStruct(o.AdapterDescriptor,!0,!0),s.defineSequence(o,"AdapterDescriptorSeqHelper","IceGrid.AdapterDescriptor",!1),o.DbEnvDescriptor=class{constructor(e="",t="",i="",n=null){this.name=e,this.description=t,this.dbHome=i,this.properties=n}_write(e){e.writeString(this.name),e.writeString(this.description),e.writeString(this.dbHome),o.PropertyDescriptorSeqHelper.write(e,this.properties)}_read(e){this.name=e.readString(),this.description=e.readString(),this.dbHome=e.readString(),this.properties=o.PropertyDescriptorSeqHelper.read(e)}static get minWireSize(){return 4}},s.defineStruct(o.DbEnvDescriptor,!0,!0),s.defineSequence(o,"DbEnvDescriptorSeqHelper","IceGrid.DbEnvDescriptor",!1),o.CommunicatorDescriptor=class extends r.Value{constructor(e=null,t=new o.PropertySetDescriptor,i=null,n=null,r=""){super(),this.adapters=e,this.propertySet=t,this.dbEnvs=i,this.logs=n,this.description=r}_iceWriteMemberImpl(e){o.AdapterDescriptorSeqHelper.write(e,this.adapters),o.PropertySetDescriptor.write(e,this.propertySet),o.DbEnvDescriptorSeqHelper.write(e,this.dbEnvs),r.StringSeqHelper.write(e,this.logs),e.writeString(this.description)}_iceReadMemberImpl(e){this.adapters=o.AdapterDescriptorSeqHelper.read(e),this.propertySet=o.PropertySetDescriptor.read(e,this.propertySet),this.dbEnvs=o.DbEnvDescriptorSeqHelper.read(e),this.logs=r.StringSeqHelper.read(e),this.description=e.readString()}},s.defineValue(o.CommunicatorDescriptor,"::IceGrid::CommunicatorDescriptor",!1),o.DistributionDescriptor=class{constructor(e="",t=null){this.icepatch=e,this.directories=t}_write(e){e.writeString(this.icepatch),r.StringSeqHelper.write(e,this.directories)}_read(e){this.icepatch=e.readString(),this.directories=r.StringSeqHelper.read(e)}static get minWireSize(){return 2}},s.defineStruct(o.DistributionDescriptor,!0,!0),o.ServerDescriptor=class extends o.CommunicatorDescriptor{constructor(e,t,i,n,r,s="",a="",c="",l="",h=null,u=null,d="",p="",_="",g=!1,m=new o.DistributionDescriptor,f=!1,y=""){super(e,t,i,n,r),this.id=s,this.exe=a,this.iceVersion=c,this.pwd=l,this.options=h,this.envs=u,this.activation=d,this.activationTimeout=p,this.deactivationTimeout=_,this.applicationDistrib=g,this.distrib=m,this.allocatable=f,this.user=y}_iceWriteMemberImpl(e){e.writeString(this.id),e.writeString(this.exe),e.writeString(this.iceVersion),e.writeString(this.pwd),r.StringSeqHelper.write(e,this.options),r.StringSeqHelper.write(e,this.envs),e.writeString(this.activation),e.writeString(this.activationTimeout),e.writeString(this.deactivationTimeout),e.writeBool(this.applicationDistrib),o.DistributionDescriptor.write(e,this.distrib),e.writeBool(this.allocatable),e.writeString(this.user)}_iceReadMemberImpl(e){this.id=e.readString(),this.exe=e.readString(),this.iceVersion=e.readString(),this.pwd=e.readString(),this.options=r.StringSeqHelper.read(e),this.envs=r.StringSeqHelper.read(e),this.activation=e.readString(),this.activationTimeout=e.readString(),this.deactivationTimeout=e.readString(),this.applicationDistrib=e.readBool(),this.distrib=o.DistributionDescriptor.read(e,this.distrib),this.allocatable=e.readBool(),this.user=e.readString()}},s.defineValue(o.ServerDescriptor,"::IceGrid::ServerDescriptor",!1),s.defineSequence(o,"ServerDescriptorSeqHelper","Ice.ObjectHelper",!1,"IceGrid.ServerDescriptor"),o.ServiceDescriptor=class extends o.CommunicatorDescriptor{constructor(e,t,i,n,r,s="",o=""){super(e,t,i,n,r),this.name=s,this.entry=o}_iceWriteMemberImpl(e){e.writeString(this.name),e.writeString(this.entry)}_iceReadMemberImpl(e){this.name=e.readString(),this.entry=e.readString()}},s.defineValue(o.ServiceDescriptor,"::IceGrid::ServiceDescriptor",!1),s.defineSequence(o,"ServiceDescriptorSeqHelper","Ice.ObjectHelper",!1,"IceGrid.ServiceDescriptor"),o.ServerInstanceDescriptor=class{constructor(e="",t=null,i=new o.PropertySetDescriptor,n=null){this.template=e,this.parameterValues=t,this.propertySet=i,this.servicePropertySets=n}_write(e){e.writeString(this.template),o.StringStringDictHelper.write(e,this.parameterValues),o.PropertySetDescriptor.write(e,this.propertySet),o.PropertySetDescriptorDictHelper.write(e,this.servicePropertySets)}_read(e){this.template=e.readString(),this.parameterValues=o.StringStringDictHelper.read(e),this.propertySet=o.PropertySetDescriptor.read(e,this.propertySet),this.servicePropertySets=o.PropertySetDescriptorDictHelper.read(e)}static get minWireSize(){return 5}},s.defineStruct(o.ServerInstanceDescriptor,!1,!0),s.defineSequence(o,"ServerInstanceDescriptorSeqHelper","IceGrid.ServerInstanceDescriptor",!1),o.TemplateDescriptor=class{constructor(e=null,t=null,i=null){this.descriptor=e,this.parameters=t,this.parameterDefaults=i}_write(e){e.writeValue(this.descriptor),r.StringSeqHelper.write(e,this.parameters),o.StringStringDictHelper.write(e,this.parameterDefaults)}_read(e){e.readValue(e=>this.descriptor=e,o.CommunicatorDescriptor),this.parameters=r.StringSeqHelper.read(e),this.parameterDefaults=o.StringStringDictHelper.read(e)}static get minWireSize(){return 3}},s.defineStruct(o.TemplateDescriptor,!1,!0),s.defineDictionary(o,"TemplateDescriptorDict","TemplateDescriptorDictHelper","Ice.StringHelper","IceGrid.TemplateDescriptor",!1,void 0,void 0),o.ServiceInstanceDescriptor=class{constructor(e="",t=null,i=null,n=new o.PropertySetDescriptor){this.template=e,this.parameterValues=t,this.descriptor=i,this.propertySet=n}_write(e){e.writeString(this.template),o.StringStringDictHelper.write(e,this.parameterValues),e.writeValue(this.descriptor),o.PropertySetDescriptor.write(e,this.propertySet)}_read(e){this.template=e.readString(),this.parameterValues=o.StringStringDictHelper.read(e),e.readValue(e=>this.descriptor=e,o.ServiceDescriptor),this.propertySet=o.PropertySetDescriptor.read(e,this.propertySet)}static get minWireSize(){return 5}},s.defineStruct(o.ServiceInstanceDescriptor,!1,!0),s.defineSequence(o,"ServiceInstanceDescriptorSeqHelper","IceGrid.ServiceInstanceDescriptor",!1),o.IceBoxDescriptor=class extends o.ServerDescriptor{constructor(e,t,i,n,r,s,o,a,c,l,h,u,d,p,_,g,m,f,y=null){super(e,t,i,n,r,s,o,a,c,l,h,u,d,p,_,g,m,f),this.services=y}_iceWriteMemberImpl(e){o.ServiceInstanceDescriptorSeqHelper.write(e,this.services)}_iceReadMemberImpl(e){this.services=o.ServiceInstanceDescriptorSeqHelper.read(e)}},s.defineValue(o.IceBoxDescriptor,"::IceGrid::IceBoxDescriptor",!1),o.NodeDescriptor=class{constructor(e=null,t=null,i=null,n="",r="",s=null){this.variables=e,this.serverInstances=t,this.servers=i,this.loadFactor=n,this.description=r,this.propertySets=s}_write(e){o.StringStringDictHelper.write(e,this.variables),o.ServerInstanceDescriptorSeqHelper.write(e,this.serverInstances),o.ServerDescriptorSeqHelper.write(e,this.servers),e.writeString(this.loadFactor),e.writeString(this.description),o.PropertySetDescriptorDictHelper.write(e,this.propertySets)}_read(e){this.variables=o.StringStringDictHelper.read(e),this.serverInstances=o.ServerInstanceDescriptorSeqHelper.read(e),this.servers=o.ServerDescriptorSeqHelper.read(e),this.loadFactor=e.readString(),this.description=e.readString(),this.propertySets=o.PropertySetDescriptorDictHelper.read(e)}static get minWireSize(){return 6}},s.defineStruct(o.NodeDescriptor,!1,!0),s.defineDictionary(o,"NodeDescriptorDict","NodeDescriptorDictHelper","Ice.StringHelper","IceGrid.NodeDescriptor",!1,void 0,void 0),o.LoadBalancingPolicy=class extends r.Value{constructor(e=""){super(),this.nReplicas=e}_iceWriteMemberImpl(e){e.writeString(this.nReplicas)}_iceReadMemberImpl(e){this.nReplicas=e.readString()}},s.defineValue(o.LoadBalancingPolicy,"::IceGrid::LoadBalancingPolicy",!1),o.RandomLoadBalancingPolicy=class extends o.LoadBalancingPolicy{constructor(e){super(e)}},s.defineValue(o.RandomLoadBalancingPolicy,"::IceGrid::RandomLoadBalancingPolicy",!1),o.OrderedLoadBalancingPolicy=class extends o.LoadBalancingPolicy{constructor(e){super(e)}},s.defineValue(o.OrderedLoadBalancingPolicy,"::IceGrid::OrderedLoadBalancingPolicy",!1),o.RoundRobinLoadBalancingPolicy=class extends o.LoadBalancingPolicy{constructor(e){super(e)}},s.defineValue(o.RoundRobinLoadBalancingPolicy,"::IceGrid::RoundRobinLoadBalancingPolicy",!1),o.AdaptiveLoadBalancingPolicy=class extends o.LoadBalancingPolicy{constructor(e,t=""){super(e),this.loadSample=t}_iceWriteMemberImpl(e){e.writeString(this.loadSample)}_iceReadMemberImpl(e){this.loadSample=e.readString()}},s.defineValue(o.AdaptiveLoadBalancingPolicy,"::IceGrid::AdaptiveLoadBalancingPolicy",!1),o.ReplicaGroupDescriptor=class{constructor(e="",t=null,i="",n=null,r="",s=""){this.id=e,this.loadBalancing=t,this.proxyOptions=i,this.objects=n,this.description=r,this.filter=s}_write(e){e.writeString(this.id),e.writeValue(this.loadBalancing),e.writeString(this.proxyOptions),o.ObjectDescriptorSeqHelper.write(e,this.objects),e.writeString(this.description),e.writeString(this.filter)}_read(e){this.id=e.readString(),e.readValue(e=>this.loadBalancing=e,o.LoadBalancingPolicy),this.proxyOptions=e.readString(),this.objects=o.ObjectDescriptorSeqHelper.read(e),this.description=e.readString(),this.filter=e.readString()}static get minWireSize(){return 6}},s.defineStruct(o.ReplicaGroupDescriptor,!1,!0),s.defineSequence(o,"ReplicaGroupDescriptorSeqHelper","IceGrid.ReplicaGroupDescriptor",!1),o.ApplicationDescriptor=class{constructor(e="",t=null,i=null,n=null,r=null,s=null,a=new o.DistributionDescriptor,c="",l=null){this.name=e,this.variables=t,this.replicaGroups=i,this.serverTemplates=n,this.serviceTemplates=r,this.nodes=s,this.distrib=a,this.description=c,this.propertySets=l}_write(e){e.writeString(this.name),o.StringStringDictHelper.write(e,this.variables),o.ReplicaGroupDescriptorSeqHelper.write(e,this.replicaGroups),o.TemplateDescriptorDictHelper.write(e,this.serverTemplates),o.TemplateDescriptorDictHelper.write(e,this.serviceTemplates),o.NodeDescriptorDictHelper.write(e,this.nodes),o.DistributionDescriptor.write(e,this.distrib),e.writeString(this.description),o.PropertySetDescriptorDictHelper.write(e,this.propertySets)}_read(e){this.name=e.readString(),this.variables=o.StringStringDictHelper.read(e),this.replicaGroups=o.ReplicaGroupDescriptorSeqHelper.read(e),this.serverTemplates=o.TemplateDescriptorDictHelper.read(e),this.serviceTemplates=o.TemplateDescriptorDictHelper.read(e),this.nodes=o.NodeDescriptorDictHelper.read(e),this.distrib=o.DistributionDescriptor.read(e,this.distrib),this.description=e.readString(),this.propertySets=o.PropertySetDescriptorDictHelper.read(e)}static get minWireSize(){return 10}},s.defineStruct(o.ApplicationDescriptor,!1,!0),s.defineSequence(o,"ApplicationDescriptorSeqHelper","IceGrid.ApplicationDescriptor",!1),o.BoxedString=class extends r.Value{constructor(e=""){super(),this.value=e}_iceWriteMemberImpl(e){e.writeString(this.value)}_iceReadMemberImpl(e){this.value=e.readString()}},s.defineValue(o.BoxedString,"::IceGrid::BoxedString",!1),o.NodeUpdateDescriptor=class{constructor(e="",t=null,i=null,n=null,r=null,s=null,o=null,a=null,c=null,l=null){this.name=e,this.description=t,this.variables=i,this.removeVariables=n,this.propertySets=r,this.removePropertySets=s,this.serverInstances=o,this.servers=a,this.removeServers=c,this.loadFactor=l}_write(e){e.writeString(this.name),e.writeValue(this.description),o.StringStringDictHelper.write(e,this.variables),r.StringSeqHelper.write(e,this.removeVariables),o.PropertySetDescriptorDictHelper.write(e,this.propertySets),r.StringSeqHelper.write(e,this.removePropertySets),o.ServerInstanceDescriptorSeqHelper.write(e,this.serverInstances),o.ServerDescriptorSeqHelper.write(e,this.servers),r.StringSeqHelper.write(e,this.removeServers),e.writeValue(this.loadFactor)}_read(e){this.name=e.readString(),e.readValue(e=>this.description=e,o.BoxedString),this.variables=o.StringStringDictHelper.read(e),this.removeVariables=r.StringSeqHelper.read(e),this.propertySets=o.PropertySetDescriptorDictHelper.read(e),this.removePropertySets=r.StringSeqHelper.read(e),this.serverInstances=o.ServerInstanceDescriptorSeqHelper.read(e),this.servers=o.ServerDescriptorSeqHelper.read(e),this.removeServers=r.StringSeqHelper.read(e),e.readValue(e=>this.loadFactor=e,o.BoxedString)}static get minWireSize(){return 10}},s.defineStruct(o.NodeUpdateDescriptor,!1,!0),s.defineSequence(o,"NodeUpdateDescriptorSeqHelper","IceGrid.NodeUpdateDescriptor",!1),o.BoxedDistributionDescriptor=class extends r.Value{constructor(e=new o.DistributionDescriptor){super(),this.value=e}_iceWriteMemberImpl(e){o.DistributionDescriptor.write(e,this.value)}_iceReadMemberImpl(e){this.value=o.DistributionDescriptor.read(e,this.value)}},s.defineValue(o.BoxedDistributionDescriptor,"::IceGrid::BoxedDistributionDescriptor",!1),o.ApplicationUpdateDescriptor=class{constructor(e="",t=null,i=null,n=null,r=null,s=null,o=null,a=null,c=null,l=null,h=null,u=null,d=null,p=null,_=null){this.name=e,this.description=t,this.distrib=i,this.variables=n,this.removeVariables=r,this.propertySets=s,this.removePropertySets=o,this.replicaGroups=a,this.removeReplicaGroups=c,this.serverTemplates=l,this.removeServerTemplates=h,this.serviceTemplates=u,this.removeServiceTemplates=d,this.nodes=p,this.removeNodes=_}_write(e){e.writeString(this.name),e.writeValue(this.description),e.writeValue(this.distrib),o.StringStringDictHelper.write(e,this.variables),r.StringSeqHelper.write(e,this.removeVariables),o.PropertySetDescriptorDictHelper.write(e,this.propertySets),r.StringSeqHelper.write(e,this.removePropertySets),o.ReplicaGroupDescriptorSeqHelper.write(e,this.replicaGroups),r.StringSeqHelper.write(e,this.removeReplicaGroups),o.TemplateDescriptorDictHelper.write(e,this.serverTemplates),r.StringSeqHelper.write(e,this.removeServerTemplates),o.TemplateDescriptorDictHelper.write(e,this.serviceTemplates),r.StringSeqHelper.write(e,this.removeServiceTemplates),o.NodeUpdateDescriptorSeqHelper.write(e,this.nodes),r.StringSeqHelper.write(e,this.removeNodes)}_read(e){this.name=e.readString(),e.readValue(e=>this.description=e,o.BoxedString),e.readValue(e=>this.distrib=e,o.BoxedDistributionDescriptor),this.variables=o.StringStringDictHelper.read(e),this.removeVariables=r.StringSeqHelper.read(e),this.propertySets=o.PropertySetDescriptorDictHelper.read(e),this.removePropertySets=r.StringSeqHelper.read(e),this.replicaGroups=o.ReplicaGroupDescriptorSeqHelper.read(e),this.removeReplicaGroups=r.StringSeqHelper.read(e),this.serverTemplates=o.TemplateDescriptorDictHelper.read(e),this.removeServerTemplates=r.StringSeqHelper.read(e),this.serviceTemplates=o.TemplateDescriptorDictHelper.read(e),this.removeServiceTemplates=r.StringSeqHelper.read(e),this.nodes=o.NodeUpdateDescriptorSeqHelper.read(e),this.removeNodes=r.StringSeqHelper.read(e)}static get minWireSize(){return 15}},s.defineStruct(o.ApplicationUpdateDescriptor,!1,!0),t.IceGrid=o},8930:(e,t,i)=>{const n=i(8846).Ice;i(5896),i(2698),i(5874),i(8372),n.Object=class{ice_isA(e,t){return this._iceMostDerivedType()._iceIds.indexOf(e)>=0}ice_ping(e){}ice_ids(e){return this._iceMostDerivedType()._iceIds}ice_id(e){return this._iceMostDerivedType()._iceId}toString(){return"[object "+this.ice_id()+"]"}_iceMostDerivedType(){return n.Object}equals(e){return this===e}static get _iceImplements(){return[]}},e.exports.Ice=n},9072:(e,t,i)=>{const n=i(1488).Ice;n.SliceInfo=class{constructor(){this.typeId="",this.compactId=-1,this.bytes=[],this.instances=[],this.hasOptionalMembers=!1,this.isLastSlice=!1}},n.SlicedData=class{constructor(e){this.slices=e}};class r extends n.Value{constructor(e){super(),this._unknownTypeId=e}ice_getSlicedData(){return this._slicedData}ice_id(){return this._unknownTypeId}_iceWrite(e){e.startValue(this._slicedData),e.endValue()}_iceRead(e){e.startValue(),this._slicedData=e.endValue(!0)}}n.UnknownSlicedValue=r,e.exports.Ice=n},9113:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice,t.Ice=r},9157:(e,t,i)=>{const n=i(8846).Ice;i(3643),i(4997),i(3332),i(2713);const r=n.StringUtil,s={};function o(e){const t=e.indexOf(".");if(-1===t)throw new n.VersionParseException("malformed version value `"+e+"'");try{const i=r.toInt(e.substring(0,t));if(i<1||i>255)throw new n.VersionParseException("range error in version `"+e+"'");return i}catch(t){throw new n.VersionParseException("invalid version value `"+e+"'")}}function a(e){const t=e.indexOf(".");if(-1===t)throw new n.VersionParseException("malformed version value `"+e+"'");try{const i=r.toInt(e.substring(t+1));if(i<0||i>255)throw new n.VersionParseException("range error in version `"+e+"'");return i}catch(t){throw new n.VersionParseException("invalid version value `"+e+"'")}}function c(e,t){return e+"."+t}n.Encoding_1_0=new n.EncodingVersion(1,0),n.Encoding_1_1=new n.EncodingVersion(1,1),n.Protocol_1_0=new n.ProtocolVersion(1,0),s.headerSize=14,s.magic=new Uint8Array([73,99,101,80]),s.protocolMajor=1,s.protocolMinor=0,s.protocolEncodingMajor=1,s.protocolEncodingMinor=0,s.encodingMajor=1,s.encodingMinor=1,s.requestMsg=0,s.requestBatchMsg=1,s.replyMsg=2,s.validateConnectionMsg=3,s.closeConnectionMsg=4,s.replyOK=0,s.replyUserException=1,s.replyObjectNotExist=2,s.replyFacetNotExist=3,s.replyOperationNotExist=4,s.replyUnknownLocalException=5,s.replyUnknownUserException=6,s.replyUnknownException=7,s.requestHdr=new Uint8Array([s.magic[0],s.magic[1],s.magic[2],s.magic[3],s.protocolMajor,s.protocolMinor,s.protocolEncodingMajor,s.protocolEncodingMinor,s.requestMsg,0,0,0,0,0,0,0,0,0]),s.requestBatchHdr=new Uint8Array([s.magic[0],s.magic[1],s.magic[2],s.magic[3],s.protocolMajor,s.protocolMinor,s.protocolEncodingMajor,s.protocolEncodingMinor,s.requestBatchMsg,0,0,0,0,0,0,0,0,0]),s.replyHdr=new Uint8Array([s.magic[0],s.magic[1],s.magic[2],s.magic[3],s.protocolMajor,s.protocolMinor,s.protocolEncodingMajor,s.protocolEncodingMinor,s.replyMsg,0,0,0,0,0]),s.currentProtocol=new n.ProtocolVersion(s.protocolMajor,s.protocolMinor),s.currentProtocolEncoding=new n.EncodingVersion(s.protocolEncodingMajor,s.protocolEncodingMinor),s.currentEncoding=new n.EncodingVersion(s.encodingMajor,s.encodingMinor),s.checkSupportedProtocol=function(e){if(e.major!==s.currentProtocol.major||e.minor>s.currentProtocol.minor)throw new n.UnsupportedProtocolException("",e,s.currentProtocol)},s.checkSupportedProtocolEncoding=function(e){if(e.major!==s.currentProtocolEncoding.major||e.minor>s.currentProtocolEncoding.minor)throw new n.UnsupportedEncodingException("",e,s.currentProtocolEncoding)},s.checkSupportedEncoding=function(e){if(e.major!==s.currentEncoding.major||e.minor>s.currentEncoding.minor)throw new n.UnsupportedEncodingException("",e,s.currentEncoding)},s.getCompatibleProtocol=function(e){return e.major!==s.currentProtocol.major||e.minor<s.currentProtocol.minor?e:s.currentProtocol},s.getCompatibleEncoding=function(e){return e.major!==s.currentEncoding.major||e.minor<s.currentEncoding.minor?e:s.currentEncoding},s.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor},n.stringToProtocolVersion=function(e){return new n.ProtocolVersion(o(e),a(e))},n.stringToEncodingVersion=function(e){return new n.EncodingVersion(o(e),a(e))},n.protocolVersionToString=function(e){return c(e.major,e.minor)},n.encodingVersionToString=function(e){return c(e.major,e.minor)},s.OPTIONAL_END_MARKER=255,s.FLAG_HAS_TYPE_ID_STRING=1,s.FLAG_HAS_TYPE_ID_INDEX=2,s.FLAG_HAS_TYPE_ID_COMPACT=3,s.FLAG_HAS_OPTIONAL_MEMBERS=4,s.FLAG_HAS_INDIRECTION_TABLE=8,s.FLAG_HAS_SLICE_SIZE=16,s.FLAG_IS_LAST_SLICE=32,n.Protocol=s,e.exports.Ice=n},9204:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(7788),i(5896),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice"),s=i(7622).IceGrid,o=r.Slice;s.ParseException=class extends r.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.UserException}static get _id(){return"::IceGrid::ParseException"}_mostDerivedType(){return s.ParseException}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},s.FileParser=class extends r.Object{},s.FileParserPrx=class extends r.ObjectPrx{},o.defineOperations(s.FileParser,s.FileParserPrx,["::Ice::Object","::IceGrid::FileParser"],1,{parse:[,2,2,,[s.ApplicationDescriptor],[[7],["IceGrid.AdminPrx"]],,[s.ParseException],,!0]}),t.IceGrid=s},9208:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(7788),i(2676),i(5896),i(9483),i(3239),i(1781),i(7548),i(8372),i(5527),i(5352);const r=n.module("Ice"),s=(i(8471).V,r.Slice);let o=n.module("IceStorm");o.LinkInfo=class{constructor(e=null,t="",i=0){this.theTopic=e,this.name=t,this.cost=i}_write(e){o.TopicPrx.write(e,this.theTopic),e.writeString(this.name),e.writeInt(this.cost)}_read(e){this.theTopic=o.TopicPrx.read(e,this.theTopic),this.name=e.readString(),this.cost=e.readInt()}static get minWireSize(){return 7}},s.defineStruct(o.LinkInfo,!1,!0),s.defineSequence(o,"LinkInfoSeqHelper","IceStorm.LinkInfo",!1),s.defineDictionary(o,"QoS","QoSHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),o.LinkExists=class extends r.UserException{constructor(e="",t=""){super(t),this.name=e}static get _parent(){return r.UserException}static get _id(){return"::IceStorm::LinkExists"}_mostDerivedType(){return o.LinkExists}_writeMemberImpl(e){e.writeString(this.name)}_readMemberImpl(e){this.name=e.readString()}},o.NoSuchLink=class extends r.UserException{constructor(e="",t=""){super(t),this.name=e}static get _parent(){return r.UserException}static get _id(){return"::IceStorm::NoSuchLink"}_mostDerivedType(){return o.NoSuchLink}_writeMemberImpl(e){e.writeString(this.name)}_readMemberImpl(e){this.name=e.readString()}},o.AlreadySubscribed=class extends r.UserException{constructor(e=""){super(e)}static get _parent(){return r.UserException}static get _id(){return"::IceStorm::AlreadySubscribed"}_mostDerivedType(){return o.AlreadySubscribed}},o.InvalidSubscriber=class extends r.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.UserException}static get _id(){return"::IceStorm::InvalidSubscriber"}_mostDerivedType(){return o.InvalidSubscriber}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},o.BadQoS=class extends r.UserException{constructor(e="",t=""){super(t),this.reason=e}static get _parent(){return r.UserException}static get _id(){return"::IceStorm::BadQoS"}_mostDerivedType(){return o.BadQoS}_writeMemberImpl(e){e.writeString(this.reason)}_readMemberImpl(e){this.reason=e.readString()}},o.Topic=class extends r.Object{},o.TopicPrx=class extends r.ObjectPrx{},s.defineOperations(o.Topic,o.TopicPrx,["::Ice::Object","::IceStorm::Topic"],1,{getName:[,2,1,,[7],,,,,],getPublisher:[,2,1,,[9],,,,,],getNonReplicatedPublisher:[,2,1,,[9],,,,,],subscribeAndGetPublisher:[,,,,[9],[["IceStorm.QoSHelper"],[9]],,[o.AlreadySubscribed,o.BadQoS,o.InvalidSubscriber],,],unsubscribe:[,2,2,,,[[9]],,,,],link:[,,,,,[["IceStorm.TopicPrx"],[3]],,[o.LinkExists],,],unlink:[,,,,,[["IceStorm.TopicPrx"]],,[o.NoSuchLink],,],getLinkInfoSeq:[,2,1,,["IceStorm.LinkInfoSeqHelper"],,,,,],getSubscribers:[,,,,["Ice.IdentitySeqHelper"],,,,,],destroy:[,,,,,,,,,]}),s.defineDictionary(o,"TopicDict","TopicDictHelper","Ice.StringHelper","IceStorm.TopicPrx",!1,void 0,void 0),o.TopicExists=class extends r.UserException{constructor(e="",t=""){super(t),this.name=e}static get _parent(){return r.UserException}static get _id(){return"::IceStorm::TopicExists"}_mostDerivedType(){return o.TopicExists}_writeMemberImpl(e){e.writeString(this.name)}_readMemberImpl(e){this.name=e.readString()}},o.NoSuchTopic=class extends r.UserException{constructor(e="",t=""){super(t),this.name=e}static get _parent(){return r.UserException}static get _id(){return"::IceStorm::NoSuchTopic"}_mostDerivedType(){return o.NoSuchTopic}_writeMemberImpl(e){e.writeString(this.name)}_readMemberImpl(e){this.name=e.readString()}},o.TopicManager=class extends r.Object{},o.TopicManagerPrx=class extends r.ObjectPrx{},s.defineOperations(o.TopicManager,o.TopicManagerPrx,["::Ice::Object","::IceStorm::TopicManager"],1,{create:[,,,,["IceStorm.TopicPrx"],[[7]],,[o.TopicExists],,],retrieve:[,2,1,,["IceStorm.TopicPrx"],[[7]],,[o.NoSuchTopic],,],retrieveAll:[,2,1,,["IceStorm.TopicDictHelper"],,,,,],getSliceChecksums:[,2,1,,["Ice.SliceChecksumDictHelper"],,,,,]}),o.Finder=class extends r.Object{},o.FinderPrx=class extends r.ObjectPrx{},s.defineOperations(o.Finder,o.FinderPrx,["::Ice::Object","::IceStorm::Finder"],1,{getTopicManager:[,,,,["IceStorm.TopicManagerPrx"],,,,,]})},9294:(e,t,i)=>{const n=i(8846).Ice;n.generateUUID=function(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)})},e.exports.Ice=n},9299:(e,t,i)=>{const n=i(8846).Ice;i(4262),i(3239),i(1779);const r=n.Debug,s=n.HashMap;class o{constructor(e,t){this.time=e,this.endpoints=t}}class a{constructor(e,t){this.time=e,this.reference=t}}n.LocatorTable=class{constructor(){this._adapterEndpointsTable=new Map,this._objectTable=new s(s.compareEquals)}clear(){this._adapterEndpointsTable.clear(),this._objectTable.clear()}getAdapterEndpoints(e,t,i){if(0===t)return i.value=!1,null;const n=this._adapterEndpointsTable.get(e);return void 0!==n?(i.value=this.checkTTL(n.time,t),n.endpoints):(i.value=!1,null)}addAdapterEndpoints(e,t){this._adapterEndpointsTable.set(e,new o(Date.now(),t))}removeAdapterEndpoints(e){const t=this._adapterEndpointsTable.get(e);return this._adapterEndpointsTable.delete(e),void 0!==t?t.endpoints:null}getObjectReference(e,t,i){if(0===t)return i.value=!1,null;const n=this._objectTable.get(e);return void 0!==n?(i.value=this.checkTTL(n.time,t),n.reference):(i.value=!1,null)}addObjectReference(e,t){this._objectTable.set(e,new a(Date.now(),t))}removeObjectReference(e){const t=this._objectTable.get(e);return this._objectTable.delete(e),void 0!==t?t.reference:null}checkTTL(e,t){return r.assert(0!==t),t<0||Date.now()-e<=1e3*t}},e.exports.Ice=n},9483:(e,t,i)=>{const n=i(8846).Ice;class r{constructor(e=0,t=void 0){if(!Number.isSafeInteger(e))throw new RangeError(void 0===t?"Number must be a safe integer":"High word must be a safe integer");if(void 0===t)this.low=e>>>0,this.high=(e-this.low)/r.HIGH_MASK>>>0;else{if(!Number.isSafeInteger(t))throw new RangeError("Low word must be a safe integer");if(t<0||t>r.MAX_UINT32)throw new RangeError("Low word must be between 0 and 0xFFFFFFFF");if(e<0||e>r.MAX_UINT32)throw new RangeError("High word must be between 0 and 0xFFFFFFFF");this.high=e,this.low=t}}hashCode(){return this.low}equals(e){return this===e||e instanceof r&&this.high===e.high&&this.low===e.low}toString(){return this.high+":"+this.low}toNumber(){if(0!==(this.high&r.SIGN_MASK)){const e=~this.low>>>0,t=~this.high>>>0;return t>r.HIGH_MAX||t==r.HIGH_MAX&&e==r.MAX_UINT32?Number.NEGATIVE_INFINITY:-(t*r.HIGH_MASK+e+1)}return this.high>r.HIGH_MAX?Number.POSITIVE_INFINITY:this.high*r.HIGH_MASK+this.low}}r.MAX_UINT32=4294967295,r.SIGN_MASK=2147483648,r.HIGH_MASK=4294967296,r.HIGH_MAX=2097151,n.Long=r,e.exports.Ice=n},9509:(e,t,i)=>{const n=i(8846).Ice;i(3321),i(4262),i(5896),i(4997),i(4375),i(1216);const r=n._ModuleRegistry.module("IceSSL");let s={};if("undefined"!=typeof WebSocket){const a=-1===navigator.userAgent.indexOf("Edge/")&&-1!==navigator.userAgent.indexOf("Chrome/"),c=/^((?!chrome).)*safari/i.test(navigator.userAgent),l=n.Debug,h=n.SocketOperation,u=n.Timer,d=0,p=1,_=2,g=3,m=4;function o(e,t){return e<_?new n.ConnectFailedException(t.code,t):1e3===t.code||1006===t.code?new n.ConnectionLostException:new n.SocketException(t.code,t)}s=class{constructor(e){this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288),this._writeReadyTimeout=0}writeReadyTimeout(){const e=Math.round(this._writeReadyTimeout);return this._writeReadyTimeout+=this._writeReadyTimeout>=5?5:.2,Math.min(e,25)}setCallbacks(e,t,i){this._connectedCallback=e,this._bytesAvailableCallback=t,this._bytesWrittenCallback=i}initialize(e,t){try{if(this._exception)throw this._exception;if(this._state===d)return this._state=p,this._fd=new WebSocket(this._url,"ice.zeroc.com"),this._fd.binaryType="arraybuffer",this._fd.onopen=e=>this.socketConnected(e),this._fd.onmessage=e=>this.socketBytesAvailable(e.data),this._fd.onclose=e=>this.socketClosed(e),h.Connect;this._state===p&&(this._desc="local address = <not available>\nremote address = "+(i=this._addr).host+":"+i.port,this._state=_)}catch(e){throw this._exception||(this._exception=o(this._state,e)),this._exception}var i;return l.assert(this._state===_),h.None}register(){this._registered=!0,(this._hasBytesAvailable||this._exception)&&(this._hasBytesAvailable=!1,u.setTimeout(()=>this._bytesAvailableCallback(),0))}unregister(){this._registered=!1}close(){if(null!==this._fd)if(!a&&!c||this._fd.readyState!==WebSocket.CONNECTING){l.assert(null!==this._fd);try{this._state=m,this._fd.close()}catch(e){throw o(this._state,e)}finally{this._fd=null}}else this._state=g;else l.assert(this._exception)}write(e){if(this._exception)throw this._exception;if(0===e.remaining)return!0;l.assert(this._fd);const t=()=>{if(this._fd){const i=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;this._fd.bufferedAmount+i<=this._maxSendPacketSize?this._bytesWrittenCallback(0,0):u.setTimeout(t,this.writeReadyTimeout())}};for(;;){const i=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(0===e.remaining)break;if(l.assert(i>0),this._fd.bufferedAmount+i>this._maxSendPacketSize)return u.setTimeout(t,this.writeReadyTimeout()),!1;this._writeReadyTimeout=0;const n=e.b.slice(e.position,e.position+i);if(this._fd.send(n),e.position+=i,c&&e.remaining>0)return u.setTimeout(t,this.writeReadyTimeout()),!1}return!0}read(e,t){if(this._exception)throw this._exception;if(t.value=!1,0===this._readBuffers.length)return!1;let i=this._readBuffers[0].byteLength-this._readPosition;for(l.assert(i>0);e.remaining>0;)if(i>e.remaining&&(i=e.remaining),new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,i),e.position),e.position+=i,this._readPosition+=i,this._readPosition===this._readBuffers[0].byteLength){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;i=this._readBuffers[0].byteLength}return t.value=this._readBuffers.length>0,0===e.remaining}type(){return this._secure?"wss":"ws"}getInfo(){l.assert(null!==this._fd);const e=new n.WSConnectionInfo,t=new n.TCPConnectionInfo;return t.localAddress="",t.localPort=-1,t.remoteAddress=this._addr.host,t.remotePort=this._addr.port,e.underlying=this._secure?new r.ConnectionInfo(t,t.timeout,t.compress):t,e.rcvSize=-1,e.sndSize=this._maxSendPacketSize,e.headers={},e}checkSendSize(e){}setBufferSize(e,t){this._maxSendPacketSize=t}toString(){return this._desc}socketConnected(e){this._state!=g?(l.assert(null!==this._connectedCallback),this._connectedCallback()):this.close()}socketBytesAvailable(e){l.assert(null!==this._bytesAvailableCallback),e.byteLength>0&&(this._readBuffers.push(e),this._registered?this._bytesAvailableCallback():this._hasBytesAvailable||(this._hasBytesAvailable=!0))}socketClosed(e){this._state!=g?(this._exception=o(this._state,e),this._state<_?this._connectedCallback():this._registered&&this._bytesAvailableCallback()):this.close()}static createOutgoing(e,t,i,n){const r=new s(e);let o=t?"wss":"ws";return o+="://"+i.host,80!==i.port&&(o+=":"+i.port),o+=n||"/",r._url=o,r._fd=null,r._addr=i,r._desc="local address = <not available>\nremote address = "+i.host+":"+i.port,r._state=d,r._secure=t,r._exception=null,r}}}else s=class{};n.WSTransceiver=s,t.Ice=n},9576:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(2676),i(1193),i(9483),i(3239),i(1781),i(7548),i(8372),i(1373),i(1391),i(5527),i(2713);const r=n.module("Ice"),s=r.Slice;s.defineDictionary(r,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),r.OperationMode=s.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]),r.Current=class{constructor(e=null,t=null,i=new r.Identity,n="",s="",o=r.OperationMode.Normal,a=null,c=0,l=new r.EncodingVersion){this.adapter=e,this.con=t,this.id=i,this.facet=n,this.operation=s,this.mode=o,this.ctx=a,this.requestId=c,this.encoding=l}},s.defineStruct(r.Current,!1,!0),t.Ice=r},9662:(e,t,i)=>{const n=i(8846).Ice;n.ProtocolInstance=class{constructor(e,t,i,n){this._instance=e,this._traceLevel=e.traceLevels().network,this._traceCategory=e.traceLevels().networkCat,this._logger=e.initializationData().logger,this._properties=e.initializationData().properties,this._type=t,this._protocol=i,this._secure=n}traceLevel(){return this._traceLevel}traceCategory(){return this._traceCategory}logger(){return this._logger}protocol(){return this._protocol}type(){return this._type}secure(){return this._secure}properties(){return this._properties}defaultHost(){return this._instance.defaultsAndOverrides().defaultHost}defaultSourceAddress(){return this._instance.defaultsAndOverrides().defaultSourceAddress}defaultEncoding(){return this._instance.defaultsAndOverrides().defaultEncoding}defaultTimeout(){return this._instance.defaultsAndOverrides().defaultTimeout}messageSizeMax(){return this._instance.messageSizeMax()}},e.exports.Ice=n},9678:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(7788),i(1193),i(9483),i(3239),i(1781),i(7548),i(8372),i(359);const r=n.module("Ice");i(7868),i(7613),i(7622);const s=n.module("IceGrid"),o=r.Slice;s.LoadSample=o.defineEnum([["LoadSample1",0],["LoadSample5",1],["LoadSample15",2]]),s.Query=class extends r.Object{},s.QueryPrx=class extends r.ObjectPrx{},o.defineOperations(s.Query,s.QueryPrx,["::Ice::Object","::IceGrid::Query"],1,{findObjectById:[,2,1,,[9],[[r.Identity]],,,,],findObjectByType:[,2,1,,[9],[[7]],,,,],findObjectByTypeOnLeastLoadedNode:[,2,1,,[9],[[7],[s.LoadSample._helper]],,,,],findAllObjectsByType:[,2,1,,["Ice.ObjectProxySeqHelper"],[[7]],,,,],findAllReplicas:[,2,2,,["Ice.ObjectProxySeqHelper"],[[9]],,,,]}),s.Registry=class extends r.Object{},s.RegistryPrx=class extends r.ObjectPrx{},o.defineOperations(s.Registry,s.RegistryPrx,["::Ice::Object","::IceGrid::Registry"],1,{createSession:[,,,,["IceGrid.SessionPrx"],[[7],[7]],,[s.PermissionDeniedException],,],createAdminSession:[,,,,["IceGrid.AdminSessionPrx"],[[7],[7]],,[s.PermissionDeniedException],,],createSessionFromSecureConnection:[,,,,["IceGrid.SessionPrx"],,,[s.PermissionDeniedException],,],createAdminSessionFromSecureConnection:[,,,,["IceGrid.AdminSessionPrx"],,,[s.PermissionDeniedException],,],getSessionTimeout:[,2,1,,[3],,,,,],getACMTimeout:[,2,1,,[3],,,,,]}),s.Locator=class extends r.Object{static get _iceImplements(){return[r.Locator]}},s.LocatorPrx=class extends r.ObjectPrx{static get _implements(){return[r.LocatorPrx]}},o.defineOperations(s.Locator,s.LocatorPrx,["::Ice::Locator","::Ice::Object","::IceGrid::Locator"],2,{getLocalRegistry:[,2,2,,["IceGrid.RegistryPrx"],,,,,],getLocalQuery:[,2,2,,["IceGrid.QueryPrx"],,,,,]}),t.IceGrid=s},9744:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice.defineSequence(r,"EndpointSeqHelper","Ice.ObjectHelper",!1,"Ice.Endpoint"),t.Ice=r},9898:(e,t,i)=>{const n=i(5828),r=i(1402),s=i(1030),o=i(5411),a=new class{constructor(){this.elements={},this.isrecording=!1,this.iceManager=null}setIceManager(e){this.iceManager=e}initialize(){this.elements={chatList:document.getElementById("chat-list"),messagesContainer:document.getElementById("messages-container"),messageInput:document.getElementById("message-input"),btnSendMessage:document.getElementById("btn-send-message"),chatName:document.getElementById("chat-name"),chatType:document.getElementById("chat-type"),currentUserName:document.getElementById("current-user-name"),btnNewGroup:document.getElementById("btn-new-group"),btnRefreshChats:document.getElementById("btn-refresh-chats"),modalNewGroup:document.getElementById("modal-new-group"),modalClose:document.getElementById("modal-close"),btnCancelGroup:document.getElementById("btn-cancel-group"),btnCreateGroup:document.getElementById("btn-create-group"),groupNameInput:document.getElementById("group-name"),usersList:document.getElementById("users-list"),loading:document.getElementById("loading"),modalLogin:document.getElementById("modal-login"),loginNameInput:document.getElementById("login-name"),btnLogin:document.getElementById("btn-login")},this.updateUserInfo()}attachEventListeners(){this.elements.btnSendMessage.addEventListener("click",()=>this.handleSendMessage()),this.elements.messageInput.addEventListener("keypress",e=>{"Enter"===e.key&&this.handleSendMessage()}),this.elements.btnRefreshChats.addEventListener("click",()=>this.handleRefreshChats()),this.elements.btnNewGroup.addEventListener("click",()=>this.showNewGroupModal()),this.elements.modalClose.addEventListener("click",()=>this.hideNewGroupModal()),this.elements.btnCancelGroup.addEventListener("click",()=>this.hideNewGroupModal()),this.elements.btnCreateGroup.addEventListener("click",()=>this.handleCreateGroup()),this.elements.modalNewGroup.addEventListener("click",e=>{e.target===this.elements.modalNewGroup&&this.hideNewGroupModal()}),this.elements.btnRecordAudio=document.getElementById("btn-record-audio"),this.elements.btnRecordAudio.addEventListener("click",()=>this.handleRecordAudio())}updateUserInfo(){this.elements.currentUserName.textContent=n.getCurrentUserName()}showLoginModal(){this.elements.modalLogin.style.display="flex",this.elements.loginNameInput.focus()}hideLoginModal(){this.elements.modalLogin.style.display="none"}renderChatList(){const e=n.getChats();0!==e.length?(this.elements.chatList.innerHTML="",e.forEach(e=>{const t=this.createChatItemElement(e);this.elements.chatList.appendChild(t)})):this.elements.chatList.innerHTML='\n                <div style="padding: 20px; text-align: center; color: #667781;">\n                    No tienes chats aÃºn.<br>\n                    Crea un grupo para empezar.\n                </div>\n            '}createChatItemElement(e){const t=document.createElement("div");t.className="chat-item",n.isChatActive(e.chatId)&&t.classList.add("active");const i=n.formatTimestamp(e.lastMessageTimestamp),r=e.isGroup?'<span class="chat-item-badge">Grupo</span>':"";return t.innerHTML=`\n            <div class="chat-item-header">\n                <span class="chat-item-name">${e.chatName}${r}</span>\n                <span class="chat-item-time">${i}</span>\n            </div>\n            <div class="chat-item-preview">${e.lastMessageContent}</div>\n        `,t.addEventListener("click",()=>this.handleChatClick(e)),t}async handleChatClick(e){try{this.showLoading("Cargando mensajes..."),n.setActiveChat(e.chatId,e.chatName,e.isGroup),await s.loadChatMessages(e.chatId,e.isGroup),this.updateChatHeader(),this.renderMessages(),this.enableMessageInput(),this.renderChatList(),this.hideLoading()}catch(e){console.error("Error al seleccionar chat:",e),this.hideLoading(),alert("Error al cargar el chat")}}renderMessages(){const e=n.getActiveMessages();n.getActiveChat()?0!==e.length?(this.elements.messagesContainer.innerHTML="",e.forEach(e=>{const t=this.createMessageElement(e);this.elements.messagesContainer.appendChild(t)}),this.scrollToBottom()):this.elements.messagesContainer.innerHTML='\n                <div class="empty-state">\n                    <p>No hay mensajes en este chat</p>\n                </div>\n            ':this.showEmptyState()}displayNewMessage(e){const t=n.getActiveChat();if((!e.isGroupMessage||e.chatId!==t.id)&&(e.isGroupMessage||e.senderId!==t.id&&e.chatId!==t.id))return;const i=this.createMessageElement(e);this.elements.messagesContainer.appendChild(i),this.scrollToBottom()}createMessageElement(e){const t=document.createElement("div"),i=e.senderId===n.getCurrentUserId();t.className="message "+(i?"sent":"received");const r=n.formatTimestamp(e.timestamp),s=!i&&n.getActiveChat().isGroup;return t.innerHTML=`\n            <div class="message-bubble">\n                ${s?`<div class="message-sender">${e.senderName}</div>`:""}\n                <div class="message-content">${this.escapeHtml(e.content)}</div>\n                <div class="message-time">${r}</div>\n            </div>\n        `,t}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}scrollToBottom(){this.elements.messagesContainer.scrollTop=this.elements.messagesContainer.scrollHeight}showEmptyState(){this.elements.messagesContainer.innerHTML='\n            <div class="empty-state">\n                <p>Selecciona un chat para ver los mensajes</p>\n            </div>\n        '}async handleSendMessage(){const e=this.elements.messageInput.value.trim();if(e)try{await r.sendMessage(e),this.elements.messageInput.value="",await s.refreshActiveChat(),this.renderMessages(),await this.handleRefreshChats()}catch(e){console.error("Error al enviar mensaje:",e),alert("Error al enviar el mensaje")}}async handleRefreshChats(){try{await s.refreshChats(),this.renderChatList()}catch(e){console.error("Error al actualizar chats:",e)}}async showNewGroupModal(){try{console.log("BotÃ³n Nuevo Grupo presionado. Intentando cargar usuarios..."),await s.loadAllUsers();const e=n.getUsersExceptCurrent();this.elements.usersList.innerHTML="",e.forEach(e=>{const t=document.createElement("label");t.className="user-checkbox",t.innerHTML=`\n                    <input type="checkbox" value="${e.id}">\n                    <span>${e.name} (${e.id})</span>\n                `,this.elements.usersList.appendChild(t)}),this.elements.groupNameInput.value="",this.elements.modalNewGroup.classList.add("show")}catch(e){console.error("Error al abrir modal de grupo:",e),alert("Error al cargar usuarios")}}hideNewGroupModal(){this.elements.modalNewGroup.classList.remove("show")}async handleCreateGroup(){const e=this.elements.groupNameInput.value.trim();if(!e)return void alert("Debes ingresar un nombre para el grupo");const t=this.elements.usersList.querySelectorAll('input[type="checkbox"]:checked'),i=Array.from(t).map(e=>e.value);if(0!==i.length)try{this.showLoading("Creando grupo...");const t=n.getCurrentUserId();await this.iceManager.createGroup(t,e,i),this.hideNewGroupModal(),await this.handleRefreshChats(),this.hideLoading(),alert("Grupo creado exitosamente")}catch(e){console.error("Error al crear grupo:",e),this.hideLoading(),alert("Error al crear el grupo")}else alert("Debes seleccionar al menos un miembro")}updateChatHeader(){const e=n.getActiveChat();if(!e)return this.elements.chatName.textContent="Selecciona un chat",void(this.elements.chatType.textContent="");this.elements.chatName.textContent=e.name,this.elements.chatType.textContent=e.isGroup?"Grupo":"Directo"}enableMessageInput(){this.elements.messageInput.disabled=!1,this.elements.btnSendMessage.disabled=!1,this.elements.messageInput.focus()}disableMessageInput(){this.elements.messageInput.disabled=!0,this.elements.btnSendMessage.disabled=!0}showLoading(e="Cargando..."){this.elements.loading.querySelector("p").textContent=e,this.elements.loading.classList.add("show")}hideLoading(){this.elements.loading.classList.remove("show")}async handleRecordAudio(){if(this.isRecording)try{const e=await o.stopRecording();this.isRecording=!1,this.elements.btnRecordAudio.textContent="ðŸŽ¤",this.elements.btnRecordAudio.classList.remove("recording"),this.elements.messageInput.disabled=!1,this.elements.btnSendMessage.disabled=!1,confirm("Â¿Enviar nota de voz?")&&(this.showLoading("Enviando audio..."),await r.sendAudio(e),await s.refreshActiveChat(),this.renderMessages(),await this.handleRefreshChats(),this.hideLoading())}catch(e){console.error("Error al enviar audio:",e),alert("Error al enviar la nota de voz"),this.hideLoading()}else try{await o.initialize(),await o.startRecording(),this.isRecording=!0,this.elements.btnRecordAudio.textContent="â¹ï¸",this.elements.btnRecordAudio.classList.add("recording"),this.elements.messageInput.disabled=!0,this.elements.btnSendMessage.disabled=!0,console.log("ðŸŽ™ï¸ Grabando...")}catch(e){console.error("Error al iniciar grabaciÃ³n:",e),alert("No se pudo acceder al micrÃ³fono. Verifica los permisos.")}}createMessageElement(e){const t=document.createElement("div"),i=e.senderId===n.getCurrentUserId();t.className="message "+(i?"sent":"received");const r=n.formatTimestamp(e.timestamp),s=!i&&n.getActiveChat().isGroup;let a;if(a=e.isAudio?`\n                <div class="audio-message">\n                    <button class="audio-play-btn" data-audio="${e.audioData}">â–¶ï¸</button>\n                    <span class="audio-duration">${e.audioDuration}s</span>\n                </div>\n            `:`<div class="message-content">${this.escapeHtml(e.content)}</div>`,t.innerHTML=`\n            <div class="message-bubble">\n                ${s?`<div class="message-sender">${e.senderName}</div>`:""}\n                ${a}\n                <div class="message-time">${r}</div>\n            </div>\n        `,e.isAudio){const i=t.querySelector(".audio-play-btn");i.addEventListener("click",async()=>{try{i.textContent="â¸ï¸",await o.playAudio(e.audioData),i.textContent="â–¶ï¸"}catch(e){console.error("Error al reproducir audio:",e),i.textContent="â–¶ï¸"}})}return t}};e.exports=a},9956:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice,t.Ice=r},9994:(e,t,i)=>{const n=i(8846).Ice._ModuleRegistry;i(8930),i(1488),i(1930),i(9483),i(3239),i(1781),i(7548),i(8372);const r=n.module("Ice");r.Slice,t.Ice=r}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n](s,s.exports,i),s.loaded=!0,s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.nc=void 0,(()=>{"use strict";var e=i(5072),t=i.n(e),n=i(7825),r=i.n(n),s=i(7659),o=i.n(s),a=i(5056),c=i.n(a),l=i(540),h=i.n(l),u=i(1113),d=i.n(u),p=i(365),_={};_.styleTagTransform=d(),_.setAttributes=c(),_.insert=o().bind(null,"head"),_.domAPI=r(),_.insertStyleElement=h(),t()(p.A,_),p.A&&p.A.locals&&p.A.locals;const g=i(7104),m=i(5828),f=i(1030),y=i(9898),S=i(1402);async function w(){try{y.initialize(),y.showLoading("Conectando al servidor..."),await g.initialize(),f.setIceManager(g),S.setIceManager(g),y.hideLoading(),y.showLoginModal();const e=await new Promise(e=>{y.elements.btnLogin.addEventListener("click",function t(){const i=y.elements.loginNameInput.value.trim();i?(y.elements.btnLogin.removeEventListener("click",t),e(i)):(alert("Por favor, ingresa tu nombre."),y.elements.loginNameInput.focus())}),y.elements.loginNameInput.addEventListener("keypress",e=>{"Enter"===e.key&&y.elements.btnLogin.click()})});y.hideLoginModal();const t=e;y.showLoading(`Registrando usuario: ${t}...`),m.setCurrentUser(e,t),await g.loginAndSetup(e,t),y.updateUserInfo(),y.attachEventListeners(),await async function(){try{console.log("Cargando datos iniciales..."),console.log("MessageReceiver.iceManager:",f.iceManager),console.log("MessageReceiver.iceManager.getUserDirectChats:",f.iceManager?.getUserDirectChats),await f.refreshChats(),y.renderChatList(),console.log("Datos iniciales cargados")}catch(e){throw console.error("Error al cargar datos iniciales:",e),e}}(),y.hideLoading()}catch(e){console.error("Error al inicializar la aplicaciÃ³n:",e),y.hideLoading(),alert("No se pudo conectar al servidor. Por favor, asegÃºrate de que el servidor estÃ¡ ejecutÃ¡ndose en localhost:10000")}}f.setIceManager(g),y.setIceManager(g),S.setIceManager(g),window.addEventListener("beforeunload",async()=>{try{await g.shutdown()}catch(e){console.error("Error al cerrar conexiÃ³n:",e)}}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",w):w(),window.chatDebug={iceManager:g,chatState:m,messageReceiver:f,uiController:y}})()})();